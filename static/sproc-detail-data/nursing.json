{"module":"BSN","displayName":"Nursing","procedureCount":28,"procedures":[{"name":"AutoAssignBSNCSEAssignments","schema":"dbo","parameters":[],"lineCount":266,"tablesReferenced":["ACT_BSNEvaluationAssignmentVersions","ACT_Evaluations","ACT_Sessions","BSN_ClinicalGroups","BSN_Course","BSN_CourseFaculty","BSN_Evaluations","BSN_Faculty","BSN_LinkEvaluationsToSite","BSN_LinkEvaluationsToSiteSettings","EVAL_Evaluations","PF_EmailTemplate","SCHE_ApplicationEmailSchedules"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Automatically creates Clinical Site Coordinator and Clinical Site Faculty Evaluation (CSE) assignments for BSN nursing students by matching clinical group data, session, course, and evaluator templates, then inserts new evaluation records into both ACT_Evaluations and BSN_Evaluations and queues notification emails for evaluators. It also reconciles missed auto-evaluations that were generated centrally but not yet tracked in the BSN schema.","businessPurpose":"Drives the automated assignment pipeline for Chamberlain University BSN clinical site evaluations. This SP is executed on a scheduled basis (department ID 2531) to ensure that every student-clinical coordinator and student-faculty evaluation pair is created for the current academic year without manual intervention, covering version codes CSCCE and CSFE.","optimizationRecommendations":["The three temp tables (#CSEEvaluators, #tblClinicalData, #tblNewEvaluations) are built with correlated filtering but lack explicit indexes — add clustered indexes on their primary join columns (e.g., EvaluationID, SubjectUserID) to speed up the subsequent INSERT and LEFT JOIN operations.","Multiple individual UPDATE statements on @tblAcademicYears perform two separate passes over the same small table; collapse them into a single update with CASE expressions to reduce round-trips.","The duplicated DENSE_RANK() OVER (ORDER BY ...) expression across two INSERT statements could be extracted into a common CTE to avoid redundant computation and make batch ID generation consistent.","Consider filtering IsTemplateDepartmentClosed = 0 earlier in the EVAL_Evaluations join rather than as a post-filter predicate to reduce the rows processed in the intermediate result set.","The hardcoded DepartmentID (2531) embedded throughout the procedure limits reusability; parameterize it or read it from a configuration table."],"migrationRelevance":"high"},{"name":"AutoCloseCLCFailedAssignments","schema":"dbo","parameters":[],"lineCount":71,"tablesReferenced":["BSN_StudentCLCAssignment"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"BSN","summary":"Identifies BSN student CLC (Clinical Learning Contract) assignments that are in a failed state and have been left open for more than 72 hours, then auto-closes them by setting FinishedDate and clearing IsSaveFinishLater. The original email-notification logic is present but fully commented out.","businessPurpose":"Prevents stale failed CLC assignments from remaining open indefinitely in the Chamberlain BSN nursing workflow. Run on a schedule, it ensures that assignments where students did not return to complete a failed evaluation are automatically finalized so they do not appear as pending tasks for faculty or coordinators.","optimizationRecommendations":["The temp table #tblFailedAssignments is populated with the same WHERE predicate used immediately after in the UPDATE statement — this two-pass approach can be replaced with a single UPDATE (which is already done) making the temp table insertion redundant; remove it to eliminate unnecessary I/O.","The DATEDIFF(HOUR, ...) predicate on ModifiedDate/CreatedDate prevents index use on those columns; consider persisting a LastActivityDate computed column or adding a filtered index for the IsFailed/FinishedDate/IsSaveFinishLater combination.","Large blocks of commented-out cursor-style email notification code increase maintenance burden; extract to a separate helper SP or remove permanently."],"migrationRelevance":"medium"},{"name":"BSNAutoCompleteCLCForm","schema":"dbo","parameters":[{"name":"@StudentCLCAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoginUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CourseSessionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CourseID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StudentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":119,"tablesReferenced":["BSN_CLCAssignmentReviewHistory","BSN_CLCFormTabFields","BSN_CampusCodes","BSN_CourseCampusCourseCoordinator","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","BSN_StudentCLCAssignment","BSN_StudentCLCAssignmentCommentsHistory","BSN_StudentCLCAssignmentFieldOptions","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Programmatically populates all required CLC (Clinical Learning Contract) form field options for a given student assignment when the system auto-completes the form due to unsatisfactory performance ratings, inserting pre-set field options and comments into BSN_StudentCLCAssignmentFieldOptions and BSN_StudentCLCAssignmentCommentsHistory.","businessPurpose":"Invoked when a student accumulates too many unsatisfactory ratings on their Clinical Learning Evaluation, triggering automatic form completion. It stamps the CLC form with system-generated entries and a standard comment explaining the excess unsatisfactory ratings, ensuring the academic record is complete and the assignment can be closed without faculty manual intervention.","optimizationRecommendations":["Multiple INSERT statements each perform a LEFT OUTER JOIN against BSN_StudentCLCAssignmentFieldOptions to check for existing records — consider consolidating these NOT EXISTS / anti-join patterns into a single set-based operation or a MERGE statement to reduce repeated table scans.","Hardcoded CLCFormTabID and CLCFormTabFieldID values (e.g., 1, 10, 54) are magic numbers that should be documented or replaced by named constants read from a settings table for maintainability.","The SP accepts @StudentCLCAssignmentID and @LoginUserID as parameters but also references them inline without validation — add an early existence check to fail fast if the assignment ID is invalid.","The FROM email address 'system@myevaluations.com' is set but email sending logic appears incomplete in this SP; verify no email dispatch is orphaned."],"migrationRelevance":"high"},{"name":"CheckBSNCLENAsEvaluationsAnwsers","schema":"dbo","parameters":[],"lineCount":120,"tablesReferenced":["BSN_CampusCodes","BSN_CourseCampusCourseCoordinator","BSN_CourseFaculty","BSN_Evaluations","EVAL_AnswerScales","EVAL_AnswerTypes","EVAL_Answers","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Checks whether a submitted BSN Clinical Learning Evaluation (CLE) has two or more 'no opportunity' answers recorded for a student in a given course session, and if so sends an automated notification email to all course faculty and campus course coordinators.","businessPurpose":"Enforces BSN clinical evaluation quality rules at Chamberlain by detecting when a student's evaluation has multiple 'no opportunity' responses (indicating insufficient clinical exposure). When the threshold is reached, coordinators and faculty are immediately notified via the WHILE-loop email dispatch pattern so they can take remedial action.","optimizationRecommendations":["The WHILE loop iterating over #CourseCordinator1 to send emails one at a time is a classic cursor anti-pattern; replace with a single set-based INSERT into SCHE_ApplicationEmailSchedules joining all coordinator rows at once.","The subquery aggregation (SUM of TotalCount) re-scans vEVAL_EvaluationAnswer and multiple evaluation tables — add a filtered index on BSN_Evaluations (SessionID, CourseID, SubjectID, EvaluationID) to support this lookup efficiently.","The temp table #CourseCordinator1 is conditionally created inside an IF block; ensure it is always dropped or guarded with IF OBJECT_ID to prevent errors on re-execution in the same session.","Mixed case table references (BSN_COURSE vs bsn_coursesession) indicate inconsistent coding standards; normalize to a single case convention."],"migrationRelevance":"high"},{"name":"CheckBSNCLEUnsatisfactoryEvaluationsAnwsers","schema":"dbo","parameters":[],"lineCount":224,"tablesReferenced":["BSN_CampusCodes","BSN_CourseCampusCourseCoordinator","BSN_CourseFaculty","BSN_CourseSession","BSN_Evaluations","BSN_FailureReasons","BSN_StudentCLCAssignment","BSN_StudentReturnDemonstrationLogs","EVAL_AnswerScales","EVAL_AnswerTypes","EVAL_Answers","EVAL_Audiences","EVAL_Templates","PF_EmailTemplate","SEC_Users"],"sprocsCalledFromBody":["BSNAutoCompleteCLCForm","GenerateBSNCLCAssignments"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Evaluates a submitted BSN Clinical Learning Evaluation for unsatisfactory answer counts, and when the threshold is met automatically creates a CLC (Clinical Learning Contract) assignment for the student, auto-completes the CLC form via BSNAutoCompleteCLCForm, marks the evaluation as failed, and triggers CLC email notifications via GenerateBSNCLCAssignments. It also aggregates total unsatisfactory counts across all evaluations in the session to track cumulative failures.","businessPurpose":"Acts as the central trigger for the BSN academic remediation workflow at Chamberlain University. When a faculty submits an evaluation with one or more unsatisfactory ratings, this SP orchestrates the creation of the student's CLC contract, sets failure flags, and notifies stakeholders, ensuring academic policies around unsatisfactory performance are automatically enforced.","optimizationRecommendations":["Two separate aggregation sub-queries scan the same join chain (vEVAL_EvaluationAnswer, EVAL_Answers, EVAL_AnswerTypes, EVAL_AnswerScales, BSN_Evaluations, EVAL_Templates, EVAL_Audiences) with slightly different filters; consolidate into a single CTE with conditional aggregation to halve I/O.","The WHILE loop at the bottom iterates over coordinators to send emails row-by-row; replace with set-based INSERT into SCHE_ApplicationEmailSchedules.","Add a covering index on BSN_Evaluations (SessionID, CourseID, SubjectID, IsMidTerm, EvaluationID) to accelerate both aggregation queries.","The SP calls BSNAutoCompleteCLCForm and GenerateBSNCLCAssignments via EXEC — ensure error handling (TRY/CATCH) wraps these calls since a failure in the sub-SP would silently leave the parent in an inconsistent state.","Multiple ISNULL() checks on nullable flag columns (IsDeleted, IsFailed, EvaluationID) on join predicates prevent sargability — consider defaulting those columns to 0 at the table level."],"migrationRelevance":"high"},{"name":"GenerateBSNCLCAssignments","schema":"dbo","parameters":[{"name":"@StudentReturnDemonstrationAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StudentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsInitiated","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@IsAttempt2Notice","dataType":"SmallNumber","direction":"IN","defaultValue":"0"},{"name":"@StudentCLCAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":207,"tablesReferenced":["BSN_CampusCodes","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","BSN_StudentCLCAssignment","BSN_StudentCLCAssignmentFieldOptions","BSN_StudentReturnDemonstrationAssignment","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Generates and dispatches CLC-related email notifications to Student Learning Specialists, Course Coordinators, Student Services staff, and the student when a CLC assignment is initiated or updated, selecting the appropriate email template and recipient list based on the campus code, assignment type, and whether it is a second-attempt notice.","businessPurpose":"Drives communication in the BSN clinical remediation workflow by notifying all relevant stakeholders (SLS, coordinators, student services) whenever a CLC (Clinical Learning Contract) is created or modified. Uses campus code to route notifications to the correct administrative staff, supporting Chamberlain's multi-campus nursing program.","optimizationRecommendations":["Five separate CTEs each perform nearly identical lookups against BSN campus role tables (LeadProgramAdministrator, AcademicLeadership, CourseCoordinator, StudentLearningSpecialist, StudentServices) — consolidate into a single UNION CTE to eliminate repeated table scans.","Email dispatch is done via individual INSERT into SCHE_ApplicationEmailSchedules inside each branch; a single set-based insert per stakeholder group would be more efficient.","The conditional branching on @IsAttempt2Notice and @StudentCLCAssignmentID versus @StudentReturnDemonstrationAssignmentID creates high cyclomatic complexity; consider splitting into separate SPs for first-attempt and second-attempt notification paths.","Add a filtered index on BSN_CourseCampusStudentLearningSpecialist (CampusCodeID, IsDeleted) to speed up the campus-code-filtered lookups."],"migrationRelevance":"high"},{"name":"GenerateBSNClinicalHoursNotifications","schema":"dbo","parameters":[],"lineCount":311,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_BSNUserTimesheet","DH_BSNUserVerification","PF_EmailTemplate","PRC_Procedures","PRC_ProceduresSubmitted","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Identifies BSN nursing faculty who have students that submitted clinical activity hours the previous day, and queues notification emails informing each faculty member of the pending hour submissions awaiting their review, using a CTE to join timesheet, session, course, and faculty data.","businessPurpose":"Supports the clinical hours verification workflow for Chamberlain BSN students by automatically alerting faculty every day when students have logged new duty hours. This enables timely review and approval of clinical hour logs, a regulatory requirement for nursing education programs.","optimizationRecommendations":["The CTE references 50+ NOLOCK hints and performs a large multi-table join; add an index on DH_BSNUserTimesheet (DateSubmitted, CourseID) to support the previous-day filter efficiently.","The session resolution logic (first tries current date, then falls back 5 days) produces two identical SELECT statements — extract into a reusable scalar function or inline table-valued function.","Multiple parallel INSERT statements into SCHE_ApplicationEmailSchedules for different stakeholder roles (faculty, coordinators, preceptors) could be unioned into a single set-based insert to reduce transaction overhead.","Four separate temp tables are created for different notification recipient groups; consider consolidating into a single typed temp table with a role discriminator column.","The hardcoded SessionFormatDate filter (> 202150) is an undocumented magic number; document its meaning or make it configurable."],"migrationRelevance":"medium"},{"name":"GenerateBSNPreceptorCommitmentFormAssignments","schema":"dbo","parameters":[{"name":"@UserIDs","dataType":"LargeText","direction":"IN","defaultValue":"''"}],"lineCount":110,"tablesReferenced":["BSN_ClinicalGroups","BSN_CourseFaculty","BSN_Faculty","BSN_PreceptorCommitmentFormAssignments","BSN_PreceptorCourse","BSN_PreceptorOrganization","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Creates Preceptor Commitment Form assignments for verified eNurse preceptors by joining preceptor organization data, course assignments, and clinical group records, then sends commitment form notification emails to unit managers, preceptors, and clinical coordinators using the PF_EmailTemplate system.","businessPurpose":"Manages the formal preceptor onboarding commitment process in the Chamberlain BSN nursing program. When preceptors are verified through the eNurse system, this SP generates the required commitment form assignments and notifies all parties — supporting compliance with clinical preceptor documentation requirements.","optimizationRecommendations":["The STRING_SPLIT + CTE PIVOT pattern used to parse the @UserIDs parameter (comma-delimited 'UserID@OrgBillingID' pairs) is brittle; replace with a properly typed Table-Valued Parameter.","Three temp tables (#tblVerifiedPreceptors, #tblENurseVerifiedUsers, #tblUsers, #tblNewRecords) lack indexes on their join columns — add indexes on UserID, CourseSessionID, and StudentID for the subsequent join operations.","The SP calls the user-defined function [dbo].fnSplit which may be a scalar-valued function causing row-by-row execution; validate it is an inline TVF or replace with STRING_SPLIT.","Email dispatch iterates logically per preceptor/coordinator combination; consolidate into a single bulk INSERT into SCHE_ApplicationEmailSchedules."],"migrationRelevance":"high"},{"name":"GenerateCourseCampusNotifications","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoginUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CourseCampusName","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":142,"tablesReferenced":["BSN_CourseCampusAcademicLeadership","BSN_CourseCampusClinicalCoordinator","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Sends onboarding notification emails to all administrative roles (Lead Program Administrator, Academic Leadership, Course Coordinator, Clinical Coordinator, Student Learning Specialist, Student Services) associated with a newly created or updated campus location, using a single shared template with role-specific substitutions and marking recipients as emailed to prevent duplicate sends.","businessPurpose":"Ensures all campus administrative stakeholders are notified when a course campus allocation is created or modified in the Chamberlain BSN system. This supports operational continuity across the multi-campus nursing program by automating welcome/update communications to the appropriate role holders.","optimizationRecommendations":["The same INSERT/UPDATE pattern is repeated six times for each administrative role — consolidate into a single parameterized block using a UNION of all role tables to eliminate code duplication.","Each role loop drops and repopulates #tblCourseCampusUsers; a single select with a role discriminator would be more efficient and reduce temp table lifecycle overhead.","The IsEmailSent flag update uses a WHERE clause identical to the INSERT — wrap both in a single transaction to ensure atomicity.","Add a filtered index on BSN_CourseCampusLeadProgramAdministrator (CampusCodeID, IsEmailSent, IsDeleted) and equivalent indexes on the other five role tables to support the campus-filtered, unset lookups."],"migrationRelevance":"medium"},{"name":"GetAdminCampusLocations","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"'RAVI'"}],"lineCount":30,"tablesReferenced":["BSN_CourseCampusAcademicLeadership","BSN_CourseCampusClinicalCoordinator","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","Prep_CampusLocations"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Returns the list of campus location IDs and cluster name values for an administrative user by unioning their assignments across all six BSN campus administrative role tables, then splitting the ClusterNames CSV field from Prep_CampusLocations using CROSS APPLY STRING_SPLIT.","businessPurpose":"Powers the campus-scoped administrative views in the Chamberlain BSN portal, allowing the system to determine which campus clusters a logged-in administrator can view or manage, supporting role-based campus filtering throughout the application.","optimizationRecommendations":["The six-way UNION of campus role tables is a repeated pattern across many BSN SPs; create an indexed view or a persisted summary table of user-campus-role assignments to avoid re-scanning all six tables on every call.","The STRING_SPLIT on ClusterNames implies denormalized CSV data in Prep_CampusLocations; normalize cluster assignments into a separate junction table to enable proper indexing and avoid CROSS APPLY overhead.","Add a filtered index on each of the six campus role tables on (UserID, IsDeleted, CampusLocationID) to support the per-user filtered union."],"migrationRelevance":"medium"},{"name":"GetAnonymousPersonalEvalData_10112025","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":648,"tablesReferenced":["BSN_CampusCodes","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_Evaluations","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_DepartmentRotations","EVAL_Audiences","EVAL_Evaluations","EVAL_Templates","Eval_TemplateAudianceOptionslist","Eval_TemplateOptionValues","Eval_UserInbox","SEC_Departments","SEC_UserRoles","SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns anonymized BSN evaluation data for a given user filtered by department, date range, and audience, applying campus-code-based access scoping for administrator roles and alternate faculty student cross-campus logic, then joining evaluation results with template and audience metadata to support anonymous reporting views.","businessPurpose":"Supports the anonymous evaluation reporting feature in the Chamberlain BSN portal, allowing administrators and faculty to view aggregated evaluation results without revealing individual evaluator identities. The complex campus-code scoping ensures that multi-campus administrators only see data they are authorized to view, a key privacy and governance requirement.","optimizationRecommendations":["The campus code resolution logic (six-way UNION + two-pass alternate faculty logic) is duplicated across at least five BSN SPs — centralize into a table-valued function that returns the accessible (CourseID, StudentID) pairs for a given user.","Four temp tables are created with no indexes; add covering indexes on the join columns (CourseID, StudentID, CampusCodeID) before the subsequent large joins.","The procedure name suffix '_10112025' indicates date-versioned naming — this SP should be consolidated with its predecessors and proper version control used instead of name-based versioning.","The JOIN against Eval_UserInbox, EVAL_TemplateOptionValues, and Eval_TemplateAudianceOptionslist with multiple NOLOCK hints on a 37KB body SP suggests a wide result set — profile actual execution plans to identify the dominant I/O cost and add appropriate indexes.","Date range filtering using CONVERT(VARCHAR, ..., 101) comparisons prevents index range scans; use typed DATETIME parameters and direct column comparisons instead."],"migrationRelevance":"high"},{"name":"GetBSNDutyHourVerificationUsersWithDateRange","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SearchTrainee","dataType":"LargeText","direction":"IN","defaultValue":"''"}],"lineCount":197,"tablesReferenced":["BSN_CampusCodes","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_Faculty","BSN_PreceptorCourse","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_BSNUserVerification","DH_DepartmentActivities","LA_Preceptors","SEC_MyEvalMainPageLinks","SEC_ToDoAdmVrfClnHours","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["usp_TraceMyEvalMainPageCounts"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Retrieves the list of BSN students with pending duty hour verification records within a specified date range, applying role-based campus scoping for administrator users and filtering by preceptor status, then categorizes results as new, normal, or overdue based on due dates and last login.","businessPurpose":"Populates the 'Verify Clinical Hours' task list in the MyEvaluations dashboard for BSN faculty and administrators at Chamberlain. The new/normal/overdue categorization drives visual indicators (badges) in the 'Things To Do' panel, ensuring faculty act on time-sensitive hour verification requests.","optimizationRecommendations":["The six-way UNION across campus role tables (repeated from other SPs) is the dominant query pattern — create a shared indexed view or TVF to eliminate redundant scans.","The call to usf_GetUserLastLoginDetails is a scalar function applied per execution — if this is an expensive UDF, cache the result in a local variable (already done) but validate the UDF is an inline TVF rather than a multi-statement TVF.","The two temp tables lack indexes; add indexes on (CourseID, StudentID) and (CampusCodeID, CampusCode) before the subsequent joins.","New/Normal/OverDue counts are computed with separate COUNT queries on the same dataset — compute all three in a single conditional aggregation (SUM(CASE WHEN ...)) pass."],"migrationRelevance":"medium"},{"name":"GetBSNEvaluaitonsAssignmentsCritera2","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"1"},{"name":"@DepartmentID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"2207"},{"name":"@SessionID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@CourseID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@CreatedBy","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@TargetID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@TemplateID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@Status","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@ListBy","dataType":"LARGENUMBER","direction":"IN","defaultValue":"1"},{"name":"@SubjectID","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@CalendarYear","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@startIndex","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@pageSize","dataType":"LARGENUMBER","direction":"IN","defaultValue":"0"},{"name":"@SortBy","dataType":"LargeText","direction":"IN","defaultValue":"0"}],"lineCount":1106,"tablesReferenced":["ACT_BSNEvaluationAssignmentVersions","ACT_ClinicalSite","BSN_Course","BSN_Evaluations","BSN_StudentReturnDemonstrationLogs","LA_Preceptors","SEC_UserRoles"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":true,"nolockCount":2,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns a paginated, filtered list of BSN evaluation assignments with rich metadata (evaluator, evaluatee, course, session, clinical site, assignment version type, completion dates, faculty/subject signatures) for a given user's role and filter criteria, building formatted HTML for assignment details and evaluator/evaluatee cells, and returning the total record count as a separate output.","businessPurpose":"Serves as the primary data retrieval SP for the BSN Evaluation Assignments grid in the MyEvaluations web application, supporting multi-criteria search and pagination for faculty, preceptors, administrators, and students viewing their evaluation workload at Chamberlain University.","optimizationRecommendations":["The SP constructs HTML inside SQL (concatenated XML-table strings) for 'Assignment Details' and 'Evaluator/Evaluatee' columns — move HTML rendering to the application layer to eliminate SQL-level string building and reduce query complexity.","The SELECT * INTO #tempresult / #DetailedResult1 pattern builds intermediate temp tables without indexes on the pagination column (rowNumber); add a clustered index on rowNumber immediately after population for efficient range-based pagination.","Multiple ListBy branches produce near-identical large SELECT statements with minor differences — refactor into a single parameterized SELECT with conditional JOINs or CASE expressions to reduce code volume and maintenance overhead.","The assignment version type mapping (FPC/SPC/FS/SS/FSM/SSM/FSF/SSF) is a long hardcoded CASE expression; store version mappings in a reference table (ACT_BSNEvaluationAssignmentVersions already exists) and JOIN instead.","Parameter normalization (-1 to 0 conversions) for eight parameters is performed with sequential IF blocks; consolidate into a single COALESCE/NULLIF expression or inline CASE."],"migrationRelevance":"high"},{"name":"GetBSNLatestCourse1","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StudentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DutyStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":63,"tablesReferenced":["ACT_Sessions","BSN_Course","BSN_CourseSession","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Resolves the most recent BSN course(s) for a student on a given duty start date by generating a 7-day date range, matching each date to an academic session, and returning the distinct course and rotation details from the student's return demonstration logs.","businessPurpose":"Used in the clinical hours logging flow to auto-populate the course/rotation selector for a student when they submit duty hours, ensuring that the correct active course is pre-selected based on the date of the clinical activity rather than requiring manual lookup.","optimizationRecommendations":["The recursive CTE generating 7 days of dates (anchor + recursion up to 7) is a common pattern; if this SP is called frequently, generate the date range in the application layer and pass it as a TVP to avoid server-side recursion overhead.","The fallback session lookup (DATEADD(-15 days)) performs a second pass over ACT_Sessions; merge both lookups into a single query using COALESCE or a ranking function.","Add an index on ACT_Sessions (DepartmentID, SessionStartDate, SessionEndDate) to support the BETWEEN range lookups.","The ROW_NUMBER() OVER PARTITION in the final SELECT is used to deduplicate courses per rotation and start date — verify that an index on BSN_StudentReturnDemonstrationLogs (StudentID, CourseSessionID) exists to support efficient filtering."],"migrationRelevance":"low"},{"name":"GetBSNPendingReviewCount","schema":"dbo","parameters":[{"name":"@UserName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Password","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":171,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_CourseSession","BSN_Evaluations","BSN_Faculty","BSN_StudentCLCAssignment","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_BSNUserVerification","EVAL_Evaluations","PRC_ProceduresSubmitted","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Authenticates a user by username/password lookup, then returns counts of pending CLC assignments, evaluation reviews, procedure logs, and clinical hour verifications for that user's role and current session, applying campus-code-based scoping for administrator roles across multiple review categories.","businessPurpose":"Populates the dashboard summary counts for BSN nursing faculty and administrators in the MyEvaluations 'Things To Do' panel, enabling at-a-glance visibility into how many items require their attention across CLCs, evaluations, procedures, and clinical hours for the Chamberlain BSN program.","optimizationRecommendations":["This SP performs authentication (SELECT WHERE UserName=@UserName AND Password=@Password) inline — passwords should never be handled in SQL procedures; authentication must be performed at the application layer with hashed credentials, making this a critical security concern.","The six-way UNION campus role scoping is repeated in full again; extract to a TVF.","Multiple COUNT sub-queries across different entities (CLCCount, EvaluationReviewCount, ProcedureCount, ClinicalHoursCount) each scan large tables independently — consider a single consolidated query returning all counts.","Four temp tables without indexes are created and populated sequentially; add indexes on their join keys immediately after creation.","Session resolution with a 7-day fallback performs two SELECT statements on ACT_Sessions; merge into a single ranked query."],"migrationRelevance":"high"},{"name":"GetBSNStudentCLCAssignmentDetails1","schema":"dbo","parameters":[{"name":"@LoginUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StudentCLCAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":74,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","BSN_StudentCLCAssignment","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Returns the full detail record for a specific BSN student CLC assignment including course, session, faculty list with contact information, alternate faculty names (via FOR XML PATH concatenation), and campus coordinator/SLS lists scoped by role and assignment ID.","businessPurpose":"Populates the CLC assignment detail view when a student or faculty member opens a specific CLC contract in the MyEvaluations portal, providing all parties' contact information and institutional context needed to review or action the contract.","optimizationRecommendations":["The FOR XML PATH('') string concatenation pattern for AlternateFacultyNames is a legacy approach — replace with STRING_AGG (SQL Server 2017+) for cleaner, more performant concatenation.","Multiple result sets are returned (assignment header, faculty detail, coordinator/SLS list) in a single SP call — consider consolidating into a single JSON result or splitting into distinct lightweight SPs for better caching behavior.","The temp table #tblBSNAssignments lacks an index on its join columns (FacultyID, CampusCodeID); add covering indexes before the subsequent SELECT.","Add a composite index on BSN_StudentCLCAssignment (StudentCLCAssignmentID, CourseSessionID) to accelerate the primary lookup across the multiple SELECT/INSERT statements."],"migrationRelevance":"medium"},{"name":"GetChamberlainStudentsCount1","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":462,"tablesReferenced":["ACT_Course","ACT_CourseSessions","ACT_FNPBannerClinicalLog","ACT_FNPClinicalLog","ACT_Sessions","ACT_StudentActivityLog","BSN_CampusCodes","BSN_Course","BSN_CourseSession","BSN_Evaluations","BSN_StudentCLCAssignment","BSN_StudentReturnDemonstrationAssignment","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_BSNUserTimesheet","DH_BSNUserVerification","EVAL_Evaluations","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns multi-dimensional student count statistics for a BSN or FNP department across multiple academic years, segmented by campus, including total enrolled students, active users, RD (Return Demonstration) counts, evaluation counts, CLC counts, and clinical hours counts, with recursive CTE year generation and multiple aggregation passes.","businessPurpose":"Powers the administrative dashboard student count reports at Chamberlain University, giving program administrators a year-over-year view of student activity across campuses and programs. Supports accreditation reporting, resource planning, and program health monitoring for the BSN and FNP departments.","optimizationRecommendations":["Six temp tables and one table variable are created for intermediate aggregation; most can be eliminated by consolidating into a single multi-pass aggregation CTE or by using window functions (SUM OVER PARTITION BY) directly.","The SP handles multiple department branches (DepartmentID 2531 for BSN, 2175 for FNP) with large IF/ELSE blocks — split into separate SPs per department to reduce complexity and enable independent optimization.","The 43 NOLOCK hints indicate a read-heavy report SP; ensure it is only called from reporting paths (not transactional flows) and consider a snapshot isolation level instead of READ UNCOMMITTED for consistency.","Academic year generation via recursive CTE (MaxPGY iterations) is called inline — pre-generate the academic year range in the application layer and pass as a TVP.","Add composite indexes on BSN_StudentReturnDemonstrationLogs (StudentID, CourseSessionID), BSN_Evaluations (StudentID, SessionID, CourseID), and DH_BSNUserTimesheet (UserID, CourseID) to support the multi-entity aggregation joins."],"migrationRelevance":"medium"},{"name":"GetDutyHourVerificationCount","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":103,"tablesReferenced":["BSN_CampusCodes","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_BSNUserVerification","DH_DepartmentActivities","DH_DepartmentRotations","DH_UserVerification","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Returns the count of pending duty hour verification records for a user, applying role-based campus scoping for administrator types and filtering by the specified department (primarily BSN department 2531), categorized into new, normal, and overdue buckets based on due dates.","businessPurpose":"Drives the 'Verify Clinical Hours' badge count in the MyEvaluations Things To Do panel for BSN faculty and administrators. Called on page load to display how many clinical hour logs require faculty verification, a key operational metric for Chamberlain nursing program administrators.","optimizationRecommendations":["The six-way UNION campus role lookup is performed again — this is the most duplicated pattern across all BSN SPs; a persistent TVF or indexed view is strongly warranted.","The three count categories (new, normal, overdue) are computed via separate sub-queries on the same result set; use conditional aggregation (SUM CASE WHEN) in a single pass.","DH_UserVerification and DH_BSNUserVerification are both joined — verify whether both tables are needed or if one is legacy.","Add a composite index on DH_BSNUserVerification (VerifiedToUserID, IsDeleted, DueDate) to support the pending verification lookups."],"migrationRelevance":"medium"},{"name":"GetIncompleteEvaluations_20251223","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartIndex","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@PageSize","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SortBy","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Search","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@SearchBy","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@TotalCount","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":"0"},{"name":"@IsForAPI","dataType":"TINYINT","direction":"IN","defaultValue":"0  /*1=For API 0 for normal Execution*/"},{"name":"@SelectedUserID","dataType":"BIGINT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@AcademicYear","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@UserPGYLevel","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@PGYStartDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PGYEndDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodStartDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodEndDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodNo","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this column for API*/"},{"name":"@FromDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@ToDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"}],"lineCount":945,"tablesReferenced":["ACT_Course","ACT_PIPAssignmentUser","BSN_CampusCodes","BSN_ClinicalUnits","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_CourseSession","BSN_Evaluations","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_CCConferenceScheduleTemplate","DH_CCConferenceTemplate","DH_CCEvaluation","DH_ConferenceSchedules","DH_DepartmentConferences","DH_DepartmentRotations","EVAL_ACGMETemplateLink","EVAL_Audiences","EVAL_Evaluations","EVAL_Templates","Eval_BaseAudience","Prep_SiteNames","SEC_Departments","SEC_MyEvalMainPageLinks","SEC_ToDoAdmEvalToComplete","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["usp_TraceMyEvalMainPageCounts"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns a paginated, role-filtered list of incomplete (pending) BSN evaluation assignments for a user, applying campus-code scoping for administrators, multi-table joins across evaluation, course, session, clinical, and conference entities, dynamically constructing the ORDER BY clause via dynamic SQL, and categorizing results as new, normal, or overdue relative to due dates and the user's last login.","businessPurpose":"Powers the 'Evaluations to Complete' list in the MyEvaluations BSN dashboard, the primary worklist for faculty and preceptors at Chamberlain. The date-stamped SP name (_20251223) indicates this is the current production version superseding prior iterations, with Sage integration logic added in February 2025.","optimizationRecommendations":["Dynamic SQL (sp_executesql / EXEC) is used solely for ORDER BY parameterization — validate that the sort column is from a controlled whitelist to prevent SQL injection; alternatively restructure with a CASE expression on @SortBy to eliminate dynamic SQL entirely.","The SP references 35+ tables across BSN, ACT, EVAL, DH, SEC, and Prep schemas in a single query — consider materializing the base result set into a temp table, adding an index on it, then applying pagination and sorting in a second step.","The date-versioned name suffix (_20251223) is a maintenance antipattern; consolidate with version history managed in source control and rename without the date suffix.","The usf_GetUserLastLoginDetails UDF is called every execution for a hardcoded user (4275) — verify this is correct and not a development artifact that should use @UserID.","The @ShowDeleteEvalAssignmanets flag is fetched with a separate SELECT on SEC_Users; merge this into the existing user attribute lookup to save a round-trip."],"migrationRelevance":"high"},{"name":"SaveBSNStudentReturnDemonstrationForm_Test","schema":"dbo","parameters":[{"name":"@CourseID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SessionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StudentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoginUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CommentsType","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@StudentReturnDemonstrationAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsSaveFinishLater","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@FacultyID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":509,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_Course","BSN_CourseAttempts","BSN_CourseCampusCourseCoordinator","BSN_CourseFaculty","BSN_CourseFieldListItems","BSN_CourseSession","BSN_CourseSettings","BSN_CourseSkillReturnDemonstrationSteps","BSN_CourseSkillsReturnDemonstration","BSN_CourseSkillsReturnDemonstrationStatus","BSN_Faculty","BSN_FailureReasons","BSN_ReturnDemonstrationForm","BSN_SkillsReturnDemonstrationStatus","BSN_StudentCLCAssignment","BSN_StudentCourseUnSafeActions","BSN_StudentCourseUnSafeActions_History","BSN_StudentReturnDemonstrationAssignment","BSN_StudentReturnDemonstrationLogAttempts","BSN_StudentReturnDemonstrationLogAttempts_History","BSN_StudentReturnDemonstrationLogComments","BSN_StudentReturnDemonstrationLogCommentsHistory","BSN_StudentReturnDemonstrationLogOptions","BSN_StudentReturnDemonstrationLogOptions_History","BSN_StudentReturnDemonstrationLogSkillOptions","BSN_StudentReturnDemonstrationLogSkillOptions_History","BSN_StudentReturnDemonstrationLogSkills","BSN_StudentReturnDemonstrationLogSkills_History","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_UserTrainingGapHistory","SEC_Users"],"sprocsCalledFromBody":["GenerateBSNCLCAssignments"],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Saves a complete BSN student return demonstration form submission by upserting skill steps, attempt logs, form options, comments, and unsafe actions into their respective history and current tables, evaluating pass/fail logic based on unsatisfactory counts and configurable course settings, and triggering CLC assignments or training gap history updates accordingly. Also calls GenerateBSNCLCAssignments and CheckBSNCLEUnsatisfactoryEvaluationsAnwsers for downstream workflow initiation.","businessPurpose":"Acts as the primary write SP for recording a student's clinical skills return demonstration outcome in the Chamberlain BSN nursing program. A single call orchestrates all persistence operations across 25+ related tables, applies business rules for failure/unsatisfactory thresholds, and initiates remediation workflows, making it the most operationally critical write SP in the BSN module.","optimizationRecommendations":["The '_Test' suffix in the SP name suggests this may be a non-production or experimental version — clarify whether this is the active production SP or a test copy; if production, rename without the suffix.","19 INSERT statements and 11 UPDATE statements are executed sequentially with no explicit transaction wrapping — wrap the entire SP body in a TRY/CATCH + BEGIN/COMMIT TRANSACTION block to ensure atomicity across the 25+ table writes.","Multiple EXEC calls to sub-SPs (GenerateBSNCLCAssignments, CheckBSNCLEUnsatisfactoryEvaluationsAnwsers) happen inside the same logical transaction scope without error handling — add explicit error checks after each EXEC.","The 42 NOLOCK hints on a write SP are contradictory and potentially dangerous — NOLOCK should not be used on tables that are being concurrently written to in the same transaction; review and remove inappropriate NOLOCK hints.","Consider splitting the SP into discrete phases (persist-form, evaluate-rules, trigger-workflow) using a coordinator SP pattern to improve testability and reduce the 36KB body size."],"migrationRelevance":"high"},{"name":"SendBSNCSECompletedNotification","schema":"dbo","parameters":[],"lineCount":119,"tablesReferenced":["BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","PF_EmailTemplate","SCHE_ApplicationEmailSchedules"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Sends a completion notification email to all campus administrative stakeholders (Lead Program Administrators, Academic Leadership, Course Coordinators, Student Learning Specialists, Student Services) associated with the campus of a completed CSE (Clinical Site Evaluation), iterating over recipients using a WHILE loop and populating the email via SCHE_ApplicationEmailSchedules.","businessPurpose":"Notifies the full administrative team when a BSN Clinical Site Evaluation is completed at Chamberlain, ensuring that program leadership and coordinators are informed of clinical evaluation outcomes in near-real-time, supporting accreditation and program quality monitoring workflows.","optimizationRecommendations":["The WHILE loop over #CSEAcademicleaderUsers to send emails one row at a time is a cursor anti-pattern; replace with a single set-based INSERT into SCHE_ApplicationEmailSchedules selecting from the temp table directly.","Five separate UNION branches across campus role tables populate the notification list — consolidate using a single parameterized UNION and add an index on each role table for (CampusCodeID, IsDeleted, UserID).","The @CampusCodeID lookup (SELECT CampusCodeID FROM Eval_Evaluations) is done with a separate query; this could be passed as a parameter to avoid an extra round-trip.","The temp table #CSEAcademicleaderUsers lacks an index on UserID; add one before the WHILE loop."],"migrationRelevance":"medium"},{"name":"SendBSNCSEREminder","schema":"dbo","parameters":[],"lineCount":157,"tablesReferenced":["ACT_Sessions","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","EVAL_Templates","PF_EmailTemplate","SCHE_ApplicationEmailSchedules"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Sends weekly CSE (Clinical Site Evaluation) reminder emails to faculty and preceptors who have incomplete evaluations during the current BSN session, calculating week number within the session, constructing encrypted login URLs for direct access, and dispatching emails via SCHE_ApplicationEmailSchedules with a WHILE loop per recipient.","businessPurpose":"Automates weekly evaluation reminder communications in the Chamberlain BSN CSE workflow, reducing missed evaluations by prompting faculty and preceptors who have not yet completed their assigned clinical site evaluations. The direct login URL in the email simplifies access for recipients.","optimizationRecommendations":["The WHILE loop for sending emails row-by-row is repeated here as in other SPs — replace with set-based INSERT into SCHE_ApplicationEmailSchedules.","Week number calculation logic (FirstMondayOfSession, LastSunday, DATEDIFF) is computed inline with multiple date arithmetic steps; extract into a scalar function or pre-compute in the scheduler that calls this SP.","Encrypted URL construction inside SQL (string concatenation of @EncryptURLParams, @LoginType, @EncryptURL) mixes security-sensitive logic into SQL — move URL generation to the application layer.","The session lookup (SELECT SessionID FROM ACT_Sessions WHERE @CurrentDate BETWEEN ...) is performed without an index hint on DepartmentID and the date range; add a composite index on ACT_Sessions (DepartmentID, SessionStartDate, SessionEndDate)."],"migrationRelevance":"medium"},{"name":"SendBSNMidtermAndFinalEvaluationRemEmail","schema":"dbo","parameters":[],"lineCount":686,"tablesReferenced":["ACT_Sessions","BSN_CourseFaculty","BSN_CourseSession","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","EVAL_Templates","PF_EmailTemplate","SCHE_ApplicationEmailSchedules"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Sends midterm (weeks 4 and 8) and final evaluation reminder emails to BSN faculty and students who have incomplete evaluations in the current session, using WHILE loops to dispatch personalized emails with encrypted login URLs from a series of temp tables populated per timing window.","businessPurpose":"Automates scheduled evaluation reminder communications for BSN midterm and final evaluation cycles at Chamberlain University, ensuring that faculty complete their student evaluations by the required midterm and final deadlines and students are notified of pending self-evaluations.","optimizationRecommendations":["Eleven separate temp tables are declared for different timing windows (Week4Users, StudentUsers, Week4MidTerm, Week8MidTerm, etc.) — consolidate into a single result table with a timing_window discriminator column to dramatically reduce temp table overhead.","Two WHILE loops operating over separate temp tables for faculty and student emails should be replaced with set-based INSERT into SCHE_ApplicationEmailSchedules.","The week-number/timing detection logic (Week4, Week8, Final) repeats complex date arithmetic multiple times — centralize into a single date-range classification CTE.","Encrypted URL generation inside SQL is a security antipattern — move to the application layer.","The 32KB body size with multiple near-identical temp table definitions and loops is a strong indicator that this SP should be refactored into a parameterized template-driven notification SP."],"migrationRelevance":"medium"},{"name":"UpdateBSNDutyHourUserVerificationStatus","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserVerificationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsConfirm","dataType":"SmallNumber","direction":"IN","defaultValue":"0"}],"lineCount":196,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_CourseCampusAcademicLeadership","BSN_CourseFaculty","BSN_CourseSession","BSN_StudentCLCAssignment","BSN_StudentCLCAssignmentChildFieldOptions","BSN_StudentCLCAssignmentFieldOptions","DH_BSNUserTimesheet","DH_BSNUserVerification","DH_DepartmentActivities","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":["GenerateBSNCLCAssignments"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Processes a faculty member's confirm or deny action on a single BSN student duty hour verification record, updating DH_BSNUserVerification with the confirmation or denial, updating the associated timesheet status, creating CLC assignments if a denial is recorded, and queuing email notifications to the student and faculty via SCHE_ApplicationEmailSchedules.","businessPurpose":"Handles the transactional confirm/deny decision for clinical hour verification in the Chamberlain BSN program. When a faculty member approves or rejects a student's submitted clinical hours, this SP records the decision, adjusts timesheet status, triggers remediation (CLC) if hours are denied, and notifies both parties, completing the verification loop.","optimizationRecommendations":["The SP performs multiple sequential reads from DH_BSNUserVerification (initial attribute fetch, then student lookup, then session fetch) — consolidate into fewer SELECT statements using a single join.","CLC assignment creation on denial (INSERT into BSN_StudentCLCAssignment, EXEC GenerateBSNCLCAssignments) is not wrapped in a transaction with the verification status update — a failure in EXEC could leave the verification marked as denied without a corresponding CLC.","Add an index on DH_BSNUserVerification (BSNUserVerificationID, IsDeleted) for the primary key lookup pattern used throughout.","The email notification is queued via INSERT into SCHE_ApplicationEmailSchedules inside the same SP that handles the business logic — consider separating email scheduling from the state update for cleaner separation of concerns."],"migrationRelevance":"medium"},{"name":"UpdateBSNDutyHourUserVerificationStatusByDateRange","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@VerificationBatchID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsConfirm","dataType":"SmallNumber","direction":"IN","defaultValue":"0"}],"lineCount":204,"tablesReferenced":["ACT_Sessions","BSN_CampusCodes","BSN_CourseCampusAcademicLeadership","BSN_CourseFaculty","BSN_CourseSession","BSN_StudentCLCAssignment","BSN_StudentCLCAssignmentChildFieldOptions","BSN_StudentCLCAssignmentFieldOptions","DH_BSNUserTimesheet","DH_BSNUserVerification","DH_DepartmentActivities","PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":["GenerateBSNCLCAssignments"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"BSN","summary":"Processes a batch confirm or deny action on BSN duty hour verification records within a date range for a verification batch ID, updating DH_BSNUserVerification and DH_BSNUserTimesheet records in bulk, and queuing notification emails for affected students on denial.","businessPurpose":"Supports bulk verification decisions in the Chamberlain BSN clinical hours workflow, allowing faculty to confirm or deny an entire batch of submitted hours for a date range in a single operation rather than approving records individually. Reduces administrative burden for high-volume clinical hour periods.","optimizationRecommendations":["The structure mirrors UpdateBSNDutyHourUserVerificationStatus but operates on a batch — the two SPs share significant logic and should share a common helper SP or TVF for the confirmation/denial state update logic.","Bulk denial email notifications are still sent via individual WHILE iteration over affected students — replace with set-based INSERT into SCHE_ApplicationEmailSchedules.","Add an index on DH_BSNUserVerification (BSNUserVerificationID, IsDeleted) and a composite index on DH_BSNUserTimesheet (VerificationBatchID, IsDeleted) for the batch update operations.","Wrap the multi-table update sequence in an explicit TRY/CATCH transaction to prevent partial batch updates."],"migrationRelevance":"medium"},{"name":"UpdateBSNImportingStatus","schema":"dbo","parameters":[{"name":"@BannerImportedDateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ErrorMessage","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":27,"tablesReferenced":["BSN_BannerImportedDates"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"BSN","summary":"Updates the import status record in BSN_BannerImportedDates for a given BannerImportedDateID, setting the exception message, success/failure flag, modification timestamp, and optionally faculty, student, or preceptor response fields, then returns 1 as IsUpdated.","businessPurpose":"Records the outcome of Banner SIS data import operations for the BSN nursing module at Chamberlain. Called after processing Banner-imported data to log whether the import succeeded or encountered an error, and to record response information from faculty, students, and preceptors, supporting audit trails for data integration.","optimizationRecommendations":["The conditional update for FacultyResponse, StudentResponse, and PreceptorResponse uses CASE WHEN LEN(@param) > 0 THEN @param ELSE column END — this reads the existing column value on every update even when not changing it; use a nullable parameter pattern with IF EXISTS to only update changed fields.","Add a primary key or unique index on BSN_BannerImportedDates (BannerImportedDateID) if not already present to ensure the WHERE clause uses an index seek.","The LEN(@ErrorMessage) > 0 check to derive IsUpdated conflates empty string with success — use a dedicated @Success BIT parameter for clearer semantics."],"migrationRelevance":"low"},{"name":"usp_GetCompletedEvaluations_API","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartIndex","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@PageSize","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SortBy","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Search","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@SearchBy","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@TotalCount","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":"0"}],"lineCount":1012,"tablesReferenced":["ACT_Course","ACT_PIPAssignmentUser","BSN_CampusCodes","BSN_ClinicalUnits","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_CourseSession","BSN_Evaluations","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_CCConferenceScheduleTemplate","DH_CCConferenceTemplate","DH_CCEvaluation","DH_ConferenceSchedules","DH_DepartmentConferences","DH_DepartmentRotations","EVAL_ACGMETemplateLink","EVAL_Audiences","EVAL_Evaluations","EVAL_Templates","Eval_BaseAudience","MyEval_UserCompletedEvaluations","SEC_MyEvalMainPageLinks","SEC_ToDoAdmEvalToComplete","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns a paginated, role-filtered list of completed BSN evaluation assignments for a user, applying the same campus-code and alternate-faculty scoping as the incomplete evaluations SP, with dynamic ORDER BY clause construction, new/normal/overdue categorization relative to last login, and conference/Sage integration logic added in 2022-2025.","businessPurpose":"Serves the BSN 'Completed Evaluations' list in the MyEvaluations API and web interface, providing faculty, preceptors, students, and administrators with a searchable, paginated view of their finalized evaluation records. The _API suffix indicates this is also consumed by external system integrations.","optimizationRecommendations":["Dynamic SQL for ORDER BY via EXEC should be replaced with a CASE expression on a validated @SortBy whitelist to eliminate SQL injection risk and improve plan caching.","This SP is structurally near-identical to usp_GetIncompleteEvaluations_API and GetIncompleteEvaluations_20251223 — the three SPs share 70%+ of their logic and should be consolidated into a single parameterized SP with a @Status (completed/incomplete) parameter.","The usf_GetUserLastLoginDetails(4275, 13) call with a hardcoded user ID (4275) appears to be a development artifact — verify this should be @UserID and fix if so.","Add composite indexes on BSN_Evaluations (DepartmentID, SessionID, CourseID, TemplateID) and ACT_EVALUATIONS (EvaluationID, DepartmentID) to support the multi-filter joins.","The 73KB SP body is one of the largest in the BSN module; consider refactoring into a view + lightweight pagination SP to improve maintainability."],"migrationRelevance":"high"},{"name":"usp_GetIncompleteEvaluations_API","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartIndex","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@PageSize","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SortBy","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Search","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@SearchBy","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@TotalCount","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":"0"}],"lineCount":1020,"tablesReferenced":["ACT_Course","ACT_PIPAssignmentUser","BSN_CampusCodes","BSN_ClinicalUnits","BSN_Course","BSN_CourseCampusAcademicLeadership","BSN_CourseCampusCourseCoordinator","BSN_CourseCampusLeadProgramAdministrator","BSN_CourseCampusStudentLearningSpecialist","BSN_CourseCampusStudentServices","BSN_CourseFaculty","BSN_CourseSession","BSN_Evaluations","BSN_Faculty","BSN_StudentReturnDemonstrationLogs","BSN_StudentReturnDemonstrationLogsExt","DH_CCConferenceScheduleTemplate","DH_CCConferenceTemplate","DH_CCEvaluation","DH_ConferenceSchedules","DH_DepartmentConferences","DH_DepartmentRotations","EVAL_ACGMETemplateLink","EVAL_Audiences","EVAL_Evaluations","EVAL_Templates","Eval_BaseAudience","MyEval_UserPendingEvaluations","SEC_MyEvalMainPageLinks","SEC_ToDoAdmEvalToComplete","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["usp_TraceMyEvalMainPageCounts"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"BSN","summary":"Returns a paginated, role-filtered list of incomplete (pending) BSN evaluation assignments for a user via the API, structurally identical to usp_GetCompletedEvaluations_API but filtered to pending/incomplete status records, with dynamic ORDER BY, campus-code scoping, and new/normal/overdue categorization.","businessPurpose":"Powers the BSN 'Incomplete Evaluations' API endpoint consumed by the MyEvaluations web application and external integrations. Provides the pending evaluation worklist for all BSN user roles at Chamberlain, enabling the dashboard Things To Do counts and the full evaluation list page.","optimizationRecommendations":["Consolidate with usp_GetCompletedEvaluations_API and GetIncompleteEvaluations_20251223 into a single SP with a @CompletionStatus parameter, eliminating 200KB+ of nearly duplicate SQL across three procedures.","Replace dynamic SQL ORDER BY with a CASE expression on a validated sort column whitelist.","Fix the hardcoded usf_GetUserLastLoginDetails(4275, 13) user ID if it is a development artifact.","Add composite indexes on the primary filter columns: BSN_Evaluations (DepartmentID, IsDeleted, SessionID), EVAL_Evaluations (EvaluationID, IsTemplateDepartmentClosed), and BSN_StudentReturnDemonstrationLogs (StudentID, CourseSessionID).","The 72KB body with 14 temp table operations and 6 ROW_NUMBER window functions should be profiled under realistic data volumes to identify the top I/O bottleneck before further optimization."],"migrationRelevance":"high"}]}