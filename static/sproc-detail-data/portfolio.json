{"module":"PF","displayName":"Portfolio","procedureCount":388,"procedures":[{"name":"ActiveInactiveAccreditationDocuments","schema":"dbo","parameters":[{"name":"@AccreditationID","dataType":"largenumber","direction":"IN","defaultValue":null}],"lineCount":25,"tablesReferenced":["PF_Accreditation"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.ActiveInactiveAccreditationDocuments"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Toggles the active/inactive status of accreditation agreements and documentation records by updating the IsActive flag in PF_Accreditation based on the supplied accreditation ID.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"ActiveInactiveAffiliateDocuments","schema":"dbo","parameters":[{"name":"@AffiliateAgreementID","dataType":"largenumber","direction":"IN","defaultValue":null}],"lineCount":25,"tablesReferenced":["PF_AffiliateAgreement"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.ActiveInactiveAffiliateDocuments"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Toggles the active/inactive status of affiliate agreements and documentation records by updating the IsActive flag in PF_AffiliateAgreement based on the supplied agreement ID.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"AddAccreditation","schema":"dbo","parameters":[{"name":"@AccrediationDocID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LetterOfNotification","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LetterDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ActionDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ReviewAction","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ReasonForAction","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EffecWDDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DetailsOfAction","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AccrediationStatus","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@AccrediationDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LengthOfCycle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EstimateNextRevDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EstimateNextInternalReview","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@SchReviewDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@TotalTrainee","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AppealDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ResponseNote","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentUploadStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RecordSatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LengthofTraining","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AccreditationCitationID","dataType":"LargeText","direction":"IN","defaultValue":"NULL"},{"name":"@AccreditationDocIDs","dataType":"LargeText","direction":"IN","defaultValue":"NULL"}],"lineCount":194,"tablesReferenced":["PF_Accreditation","PF_AccreditationCitations","PF_AccreditationDocument"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddAccreditation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new accreditation record into PF_Accreditation with details including accrediting body, review date, next survey date, department associations, and document metadata. Also logs an audit trail entry for the creation action.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"AddAccreditationRelatedDocuments","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AccreditationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@RecordSatus","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":69,"tablesReferenced":["PF_AccreditationDocument"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddAccreditationAddAccreditationRelatedDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new document record associated with an accreditation entry into PF_AccreditationDocument, storing file path, document name, and upload metadata.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"AddAffiliateAgreements","schema":"dbo","parameters":[{"name":"@AffiliateAgreementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AffiliateName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SponsoringName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ProgramName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Trainee","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AgreementType","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Term","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EffectiveDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ProgramDirectorUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ProgramDirectorName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TerminateDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentUploadStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RecordSatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PGY","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@FPGY","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@MSY","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@PGYText","dataType":"LongText","direction":"IN","defaultValue":"null"},{"name":"@FPGYText","dataType":"LongText","direction":"IN","defaultValue":"null"},{"name":"@MSYText","dataType":"LongText","direction":"IN","defaultValue":"null"},{"name":"@Sponsorid","dataType":"CounterNumber","direction":"IN","defaultValue":"null"},{"name":"@AffiliateId","dataType":"CounterNumber","direction":"IN","defaultValue":"null"},{"name":"@DocumentBinaryFile","dataType":"varchar(max)","direction":"IN","defaultValue":"''"},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@IsRural","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"}],"lineCount":300,"tablesReferenced":["PF_AffiliateAgreement","PF_AffiliateAgreementDocument","Prep_SiteNames"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddAffiliateAgreements"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new affiliate agreement record into PF_AffiliateAgreement with comprehensive details including affiliate institution, agreement dates, rotation information, department assignments, and document attachments. Logs an audit trail entry for tracking.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddCitation","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CitationID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitationTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitationCategoryID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ProgramRequirementUniqueID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@FollowUpPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssignedToUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FinalDueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CurrentInternalStatus","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DateReviewedAndApproved","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@CurrentACGMEStatus","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AccreditationID","dataType":"BigNumber","direction":"IN","defaultValue":"Null"},{"name":"@AccreditatonNotes","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":64,"tablesReferenced":["PF_AccreditationCitations","PF_AccreditationCitationsHistory"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddCitation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new accreditation citation record into PF_AccreditationCitations with citation category, description, status, and associated accreditation ID.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddConcern","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConcernNumber","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ConcernDetails","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssignedAdmins","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@FollowUpPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StatusId","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":60,"tablesReferenced":["PF_Concern","PF_SurveyPerformanceConcernHistory"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddConcern"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new concern record into PF_Concern with concern details, status, associated user or department, and audit information.","businessPurpose":"Manages trainee/program concern records in the portfolio module, supporting the documentation of performance issues, remediation plans, and follow-up actions.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"AddConferencePFUserDocument","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConferenceDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RequiredCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@OptionalCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsConference","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":null}],"lineCount":70,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Associates a user-uploaded document with a conference portfolio entry by inserting a record into PF_UserDocuments with the conference document linkage.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddConferencePortfolioDocument_test","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConferenceDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RequiredCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@OptionalCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsConference","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DocumentCreditSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PFDocumentID","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":null}],"lineCount":260,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings","PF_Subjects","PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":["AddConferencePFUserDocument","AddPFCreditSubjectForDepartment"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Test/development version of conference portfolio document creation that inserts document details into PF_UserDocuments with extensive field mapping for conference-related scholarly activities, including credit subject assignments via a WHILE loop over split parameters.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"AddDocumentCreditSubject","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":69,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentMappingStructure"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts credit subject associations for a portfolio document by iterating through a comma-separated list of subject IDs and creating PF_DocumentCreditSubject records for each.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"low"},{"name":"AddDocumentDomainForACGME","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Name","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Defination","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":16,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddNewDocumentDomainForACGME"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Inserts a new ACGME document domain definition into Sec_DocumentDomainForACGME, linking a domain name to a document definition ID.","businessPurpose":"Manages ACGME document domain definitions, configuring which document categories are available for ACGME competency mapping.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"AddMailDistributionSendNowOrSchedule","schema":"dbo","parameters":[{"name":"@LoggedinUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EmailFrom","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Subject","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ScheduleDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":68,"tablesReferenced":["SEC_MailDistributionInfo"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddMailDistributionSendNowOrSchedule"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Creates a mail distribution schedule entry in PF_MailDistribution for either immediate sending or future scheduled delivery, storing template, recipient list, and scheduling parameters.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddMailTemplate","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@TemplateID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@TemplateName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Subject","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@BodyMessage","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":56,"tablesReferenced":["SEC_MailTemplateInfo"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddMailTemplate"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new email template record into PF_Emailtemplate with template name, subject, body content, and creation metadata.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddOutcomeNarrativeImportingDetails","schema":"dbo","parameters":[{"name":"@NewNarrativeCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@GroupID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Name","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@OutcomeGroupID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CompetencyID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@OutcomeNarrativeCode","dataType":"ShortText","direction":"IN","defaultValue":"NULL -- Optional Field"}],"lineCount":66,"tablesReferenced":["EVAL_BaseOutcomeNarratives","EVAL_Competencies","EVAL_OutcomeGroups","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertOutcomeNarrativeData"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Imports outcome narrative data by inserting or updating records in PF_UserDocuments from an external data source, mapping outcome narrative fields to portfolio document attributes.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"AddPFACGMECompetency","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CompetencyName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@AccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AudienceID","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":167,"tablesReferenced":["PF_ACGME","PF_ACGMEDetails","PF_UserReviews","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFACGMECompetency"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new ACGME competency evaluation record into PF_UserDocuments with comprehensive field mapping including competency type, assessment scores, reviewer information, document attachments, and audit trail logging. Handles both new document creation and document detail insertion across multiple related tables.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"AddPFCertificate","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserCertificateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CertificateID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PassDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PageMode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":"0"},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"},{"name":"@DocumentSectionCode","dataType":"LargeText","direction":"IN","defaultValue":"'Certificate'"}],"lineCount":332,"tablesReferenced":["PF_UserDocuments","SEC_Certifications","SEC_Departments","SEC_Events","SEC_UserCertifications"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFCertificate"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new certificate record into the portfolio system across PF_UserDocuments and related detail tables, capturing certificate type, issuing body, expiration dates, verification status, document attachments, and credit subject assignments with full audit trail logging.","businessPurpose":"Manages certificate records in the portfolio module, enabling trainees to document professional certifications (BLS, ACLS, board certifications) with expiration tracking and verification status.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"AddPFComplianceCorrespondence","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ComplianceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@TypeOfLetter","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LetterDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null}],"lineCount":86,"tablesReferenced":["PF_Compliance","PF_ComplianceDocument"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPFComplianceCorrespondence"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new compliance correspondence record into PF_UserDocuments capturing correspondence type, date, description, and associated document files for regulatory compliance tracking.","businessPurpose":"Supports compliance correspondence tracking in the portfolio, documenting regulatory communications, compliance notifications, and institutional correspondence.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddPFCreditSubjectForDepartment","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":32,"tablesReferenced":["PF_DocumentCreditSubject"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Inserts portfolio document credit subject settings for a department if they do not already exist, ensuring department-level credit subject configuration is in place.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddPFCurricula","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CurriculaMailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":235,"tablesReferenced":["DH_DepartmentRotations","PF_DocumentAccessLevel","PF_Subjects","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFCurricula"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new curricula evaluation record into the portfolio system with comprehensive field mapping across PF_UserDocuments and related tables, including rotation details, evaluation scores, completion status, document attachments, and credit subject assignments with audit trail logging.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"AddPFCurriculaVideo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CurriculaMailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":136,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFCurriculaVideo"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new curricula video record into the portfolio system, storing video metadata, completion status, evaluation details, and associated document attachments across PF_UserDocuments and related tables with audit logging.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFDocumentDetails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoginedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Organization","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SpecialtyID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentPublicationType","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DocumentLicence","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreditRequired","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CreditOptional","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ExpiryEndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DEAECFMG_Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PMID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ExternalLink","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingNumber","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingSource","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@VisaTypeID","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@StateType","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@License1Num","dataType":"ShortText","direction":"IN","defaultValue":"0"},{"name":"@StateLic1StateID","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@SchoolName","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCountry","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolState","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCity","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@Degree","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@OtherDegree","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@GraduationDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@StateID2","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@StateLicenceID","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"},{"name":"@UploadedModule","dataType":"ShortText","direction":"IN","defaultValue":"'MyPortfolio Module'"},{"name":"@PresentationDate","dataType":"LargeDate","direction":"IN","defaultValue":"''   --added by bharathi on 08/10/2018"},{"name":"@UserScope","dataType":"SmallNumber","direction":"IN","defaultValue":"0"},{"name":"@SupervisingFaculty","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL --add end by bharathi on 08/10/2018"},{"name":"@TotalCredits","dataType":"ShortText","direction":"IN","defaultValue":"'0'"},{"name":"@DocumentBinaryFile","dataType":"varchar(max)","direction":"IN","defaultValue":"''"},{"name":"@EventDate","dataType":"LargeDate","direction":"IN","defaultValue":"NULL"},{"name":"@DocumentDomainID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SSNNumber","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@SSNCountry","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@DriverLicenseNumber","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DriverStateID","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@DriverFullName","dataType":"LargeText","direction":"IN","defaultValue":"''"}],"lineCount":625,"tablesReferenced":["CME_EventCredits","CME_Events","PF_UserDocuments","PF_UserSpecificSubject","SEC_EventDetail","SEC_Events","SEC_MedicalEducationLogs"],"sprocsCalledFromBody":["UpdateAPEScholarlyActivityInfo","UpdateDateExpiryEndDate","spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFDocumentDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Generic document detail insertion procedure that adds a new portfolio document record into PF_UserDocuments using dynamic SQL to handle varying document types and field mappings across the portfolio system.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"AddPFDocumentSettings","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Levels","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Required","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Optional","dataType":"LongText","direction":"IN","defaultValue":null}],"lineCount":84,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPFDocumentSettings"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts document settings for the scholarly activities section by creating a new PF_DocumentCreditSubjectSettings record with subject, level, and department configuration.","businessPurpose":"Manages the department-level configuration for scholarly activities document settings, controlling which credit subjects, PGY levels, and document types are available in each department's portfolio configuration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddPFGeneralDocumentation","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CompetencyID","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@DocUserAccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":"5"}],"lineCount":135,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFGeneralDocumentation","UserManager.cs.UpdatePFPaperBasedEvaluation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new general documentation record into the portfolio system across PF_UserDocuments and related detail tables, capturing document type, title, description, file attachments, and credit subject assignments with audit trail logging.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFLearningAssignments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LiteratureID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LiteratureName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@LteratureDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssignmentDetails","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@IsReviewRequired","dataType":"VerySmallNumber","direction":"IN","defaultValue":"1"}],"lineCount":129,"tablesReferenced":["LA_AssignmentUsers","LA_LearningAssignments","LA_Literature"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFLearningAssignments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new learning assignment record into the portfolio system with details including assignment title, module reference, completion status, review dates, document attachments, and evaluator assignments across PF_UserDocuments and related tables.","businessPurpose":"Manages learning module assignments in the portfolio, tracking which educational modules have been assigned to trainees and their completion status.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"AddPFLearningTask","schema":"dbo","parameters":[{"name":"@Title","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Competency","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Goal","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TimeLine","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@IsReviewed","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@IsRemoved","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":92,"tablesReferenced":["PF_LearningTasks"],"sprocsCalledFromBody":["AddPFLearningTasksDocumentDetails"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPFLearningTask"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new learning task record into PF_LearningTasks with task details, goals, completion criteria, and associated user/department assignments.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"AddPFLearningTasksAssesseeReviewComments","schema":"dbo","parameters":[{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AssesseeReviewComments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":75,"tablesReferenced":["PF_LearningTaskAssesseeReviewComments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts assessee (trainee) review comments for a learning task into PF_UserReviews, capturing the trainee's self-assessment text, review date, and completion status for the learning appraisal workflow.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFLearningTasksAssessorReviewComments","schema":"dbo","parameters":[{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AssessorReviewComments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":70,"tablesReferenced":["PF_LearningTaskAssessorReviewComments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts assessor (evaluator) review comments for a learning task into PF_UserReviews, capturing the assessor's feedback text, review date, and approval status for the learning appraisal workflow.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFLearningTasksDocumentDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null}],"lineCount":115,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFLearningTaskDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts document details associated with a learning task into PF_UserDocuments, linking uploaded files and metadata to a specific learning task record.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"AddPFMoonLightingHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Description","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MailingAddress","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ContactPerson","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@HoursWorkedPerWeek","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@Payment","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@PaymentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":150,"tablesReferenced":["SEC_UserMoonLightingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFMoonLightingHistory"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new moonlighting history record into PF_UserDocuments capturing external employment details including facility name, dates, hours, compensation, and approval status for resident moonlighting activity tracking.","businessPurpose":"Tracks moonlighting (external employment) activities for residents/fellows in the portfolio, which requires program director approval and is subject to duty hour regulations.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"AddPFPaperBasedEvaluation","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocUserAccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":"5"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"}],"lineCount":165,"tablesReferenced":["PF_DocumentAccessLevel","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFPaperBasedEvaluation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new paper-based evaluation record into PF_UserDocuments with evaluation scores, evaluator information, document attachments, and credit subject assignments for tracking non-electronic evaluation submissions.","businessPurpose":"Manages paper-based evaluation records in the portfolio, supporting institutions that still use paper forms for certain evaluation types alongside the electronic system.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"AddPFPersonalStatements","schema":"dbo","parameters":[{"name":"@Title","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PersonalStatement","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TimeLine","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@IsReviewed","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@IsRemoved","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":113,"tablesReferenced":["PF_PersonalStatements"],"sprocsCalledFromBody":["AddPFPersonalStatementsDocumentDetails","spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFPersonalStatements"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new personal learning objectives and goals statement into PF_PersonalStatements with statement text, academic year, review status, and associated user/department information for the appraisal workflow.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFPersonalStatementsAssesseeReviewComments","schema":"dbo","parameters":[{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AssesseeReviewComments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":66,"tablesReferenced":["PF_PersonalStatementsAssesseeReviewComments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts assessee (trainee) review comments for personal learning statements into PF_UserReviews, capturing the trainee's self-reflection on their learning objectives and goals.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFPersonalStatementsAssessorReviewComments","schema":"dbo","parameters":[{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AssessorReviewComments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":66,"tablesReferenced":["PF_PersonalStatementsAssessorReviewComments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts assessor review comments for personal learning statements into PF_UserReviews, capturing the evaluator's feedback on the trainee's learning objectives and goals.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFPersonalStatementsDocumentDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null}],"lineCount":115,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFPersonalStatementDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts document details associated with a personal statement into PF_UserDocuments, linking uploaded supporting files to a specific personal learning objectives record.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"AddPFProgramTrainingHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ProgramID","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@InstitutionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@OtherDepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherInstitutionName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TempGUID","dataType":"LargeText","direction":"IN","defaultValue":"NULL  --Added by Vijaya on 07/01/2020 for Access History"},{"name":"@ProgramType","dataType":"VeryShortText","direction":"IN","defaultValue":"NULL   --Added by Vijaya on 06/26/2020 for Previous Training History"},{"name":"@EmployerID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@DocumentName","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DocumentTitle","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFilePath","dataType":"ShortText","direction":"IN","defaultValue":"''"}],"lineCount":145,"tablesReferenced":["MyGME_Transfer_Queue","SEC_AccessHistoryForMultipleAUD","SEC_Events","SEC_UserTrainingHistory","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFProgramTrainingHistory"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new program training history record capturing training program details, dates, institution, specialty, and completion status for a user's credentialing documentation.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"AddPFSpecialMedActivityHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Description","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MailingAddress","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ContactPerson","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@HoursWorkedPerWeek","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@Payment","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@PaymentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":106,"tablesReferenced":["SEC_UserSpecialMedActivityHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFSpecialMedActivityHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new special medical activity history record into the portfolio system capturing activity type, dates, location, description, and associated documentation for tracking specialized medical experiences.","businessPurpose":"Documents special medical activities and experiences in the portfolio, tracking unique clinical or research experiences outside the standard rotation schedule.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFStipend","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EffectiveDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"INT","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@MonthlyStipend","dataType":"Currency","direction":"IN","defaultValue":null}],"lineCount":180,"tablesReferenced":["SEC_UserStipendHistory"],"sprocsCalledFromBody":["GetObcStipendAmountByLevel","spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFStipend"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new stipend record into PF_UserDocuments capturing stipend amount, effective dates, payment schedule, and approval status for resident/fellow compensation tracking.","businessPurpose":"Manages stipend records in the portfolio, tracking resident/fellow compensation amounts, schedules, and approval status for financial administration.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFSupplimental","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PaymentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Amount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":73,"tablesReferenced":["SEC_UserSupplementalPaymentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFSupplimental"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new supplemental payment record into PF_UserDocuments capturing supplemental compensation details, dates, amounts, and approval status.","businessPurpose":"Manages supplemental payment records in the portfolio for tracking additional compensation beyond base stipend.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFTrainingAgreement","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DisplayName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ContractDescription","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null}],"lineCount":131,"tablesReferenced":["SEC_UserTrainingAgreement","SEC_UserTrainingAgreementDocument"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFTrainingAgreement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new training agreement record into the portfolio system with comprehensive contract details including agreement dates, terms, signatures, document attachments, and audit trail logging across PF_UserDocuments and related tables.","businessPurpose":"Manages training agreement records in the portfolio, documenting the formal agreements between trainees and training programs including terms, signatures, and compliance requirements.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFTrainingGapHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@GapTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@Remediate","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@Comment","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AdjustIRPLevel","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":51,"tablesReferenced":["SEC_UserTrainingGapHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingGapHistoryByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new training gap or leave of absence record into PF_UserDocuments capturing gap type, dates, reason, approval status, and supporting documentation.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPFTrainingHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CommentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":66,"tablesReferenced":["SEC_UserTrainingCommentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPFTrainingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new training history record into PF_UserDocuments capturing prior training program details, institution, specialty, dates, and completion status.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"AddPostGraduationfromMyP","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradEducationSpecialty","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PostGradEducationStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCountry","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradEducationState","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCity","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradEducationLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkSpecialty","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PostGradWorkStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCountry","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradWorkState","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCity","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PostGradWorkLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryService","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradOtherNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":291,"tablesReferenced":["SEC_City","SEC_Countries","SEC_Events","SEC_Military","SEC_PostGraduation","SEC_Specialty","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddPostGraduationfromMyP"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts or updates post-graduation fields from the MyPortfolio module into SEC_Users and SEC_UsersExt, handling comprehensive demographic and credential updates for users who have completed their training program.","businessPurpose":"Supports post-graduation tracking in the portfolio, documenting fellowship placements, job positions, and career outcomes for program reporting and alumni tracking.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 18+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"AddPreceptorNoteFromMyP","schema":"dbo","parameters":[{"name":"@PassDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":"0"},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"},{"name":"@DocumentSectionCode","dataType":"LargeText","direction":"IN","defaultValue":"'Notes'"},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocUserAccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfidential","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PageMode","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentMedical","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@NotesTitle","dataType":"ShortText","direction":"IN","defaultValue":"'No Title Provided'"}],"lineCount":37,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPreceptorNotFromMyP"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Inserts a preceptor note record from the MyPortfolio module, creating a new note entry associated with a specific user and preceptor relationship.","businessPurpose":"Manages preceptor notes in the portfolio, enabling clinical preceptors to document trainee performance observations and feedback from clinical rotations.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddQIProjectRelatedDocuments","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@QIProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":66,"tablesReferenced":["PF_QIProjectDocument"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddQIPRelatedDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new document record associated with a Quality Improvement project into PF_QIProjectDocument, storing file path, document name, and upload metadata.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"AddSurveyPerformance","schema":"dbo","parameters":[{"name":"@SurveyID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SurveySourceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SurveyCategoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DatePerformed","dataType":"LargeDate","direction":"IN","defaultValue":"NULL"},{"name":"@DateReceived","dataType":"LargeDate","direction":"IN","defaultValue":"NULL"},{"name":"@SummaryResultID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsSummaryResultReviewed","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DateReviewed","dataType":"LargeDate","direction":"IN","defaultValue":"NULL"},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ReadinessID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocFileSize","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUploadStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ConcernID","dataType":"LargeText","direction":"IN","defaultValue":"NULL"}],"lineCount":105,"tablesReferenced":["PF_Concern","PF_SurveyPerformance","PF_SurveyPerformanceDocument","PF_SurveyPerformanceHistory"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddSurveyPerformance"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new survey performance record into PF_SurveyPerformance capturing survey source, category, scores, date, and associated user/department information.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"AddUserContractDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ContractStartDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@ContractEndDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@InitialResidentTypeCode","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@CurrentResidentTypeCode","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@EmployerName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CurrentProgram","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@Transferred","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ResidentStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@InitialProgram","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ContractNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TrainingLevel","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@InitialProgramStartDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@InitialProgramEndDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@CurrentProgramStartDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@CurrentProgramEndDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@EmployerID","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"},{"name":"@InitialResidentTypeId","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"}],"lineCount":260,"tablesReferenced":["SEC_DepartmentInstitution","SEC_Programs","SEC_UserContract"],"sprocsCalledFromBody":["AddPFContractDocumentDetails","AddPFContratProgramTrainingHistory","GetObcStipendAmountByLevel","spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFCurriculaVideo"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Inserts a new user contract record into SEC_UserContract with comprehensive contract details including start/end dates, salary, benefits, terms, renewal information, and document attachments with audit trail logging.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"AddUserDependent","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DependentTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@FirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MIDdleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DateOfBirth","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@Phone","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":72,"tablesReferenced":["SEC_UserDependent"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddUserDependent"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new dependent (spouse or emergency contact) record into SEC_UserDependents with personal details, contact information, relationship type, and associated user ID.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"AddUserImportingDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MiddleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MainEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MainEmailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@UserTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@SpecialtyName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Username","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Password","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@IsShared","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@PermanentEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ProgramStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FellowProgramStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FirstTrainingStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Pager","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CellPhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Phone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AlternatePhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RoleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Address1","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Address2","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FaxNumber","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SSN","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SSNCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NPI","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DateOfBirth","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@VisaName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@VisaExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DateOfDeath","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BirthCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BirthCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StatusChangeDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PassportCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MilitaryRankName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@GenderName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EthinicName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MaritalStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EmployeeID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CitizenShipName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LanguageName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherLanguageName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@VisaIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@MilitaryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGExpDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DEANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DEANumExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DegreeName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1StateID","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@StateLic1ExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2StateID","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@StateLic2ExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LiabilityInsNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LiabilityInsExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BNDDNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BNDDNumExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AOANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AOADate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ACOSNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACOSDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LockerNumberone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LockerNumberTwo","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DegreeCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@GraduationDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedSchoolName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ProgramEndDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AANANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AANADate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AAMCNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AOAID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBODEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherMedSchool","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PreviousLastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ACLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ALSOCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ALSOCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ATLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ATLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BBPathologyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BBPathologyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EmergencyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EmergencyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EnvironmentalCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EnvironmentalCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ErgonomicsCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ErgonomicsCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FCCSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FCCSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FireTrainingCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FireTrainingCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HIPAACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HIPAACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InfectionCtrlCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InfectionCtrlCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@NRPCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@NRPCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@OSHACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@OSHACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PACLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PACLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBEducationCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBEducationCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBTestingCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBTestingCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PALSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PALSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ScheduleAppID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PIN","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ContractStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@State","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CsaPassStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CsaPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InService1_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService2_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService3_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService4_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService5_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService6_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService7_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService8_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService9_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService10_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService11_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService12_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService1_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService2_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService3_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService4_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService5_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService6_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService7_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService8_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService9_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService10_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService11_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService12_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AAMCID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSLogin","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSPassword","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LengthofTraining","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LevelofFrequency","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolHonors","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@GoodStanding","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EducationalTrainingPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EducationalTrainingExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FluVaccinationPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FluVaccinationExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@STABLEPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@STABLEExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HomeAddress1","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeAddress2","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomePhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeZip","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeStateName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FormerLastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PreferredFirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@IsImported","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@AffiliationInstitutionID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@PECOS","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1IssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCountry","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkSpecialty","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCountry","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryService","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@RosterID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Disabled","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UCW8BENDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USEntryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@SubDivison","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AltDepartmentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Category","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Certification","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Enrolled","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BirthState","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@CALSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CALSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CITICertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@AnnualMedicalClearanceCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@AnnualMedicalClearanceCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@ASANIHStrokeScaleACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@ASANIHStrokeScaleACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CulturalCompetencyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CulturalCompetencyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FESCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FESCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@MultiStarCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@MultiStarCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHCtrlVenousCathCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHLaserSafetyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHLaserSafetyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHModSedationCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHModSedationCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHPointofCareCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHPointofCareCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NonAffiliatedTrainee","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@CurrentCountry","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipendlevel","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@BSESPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@BSESExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ACGMEProgramID","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@COMLEX_Level_3","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CountFirstStarted","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CountResidency","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CurrentProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CurrentProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramName","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsIssueDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsNumber","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EMSPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EMSExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ENLSPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ENLSExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@InitialProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@InitialProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@PostGraduateNotes","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@PostGraduationPosition","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level_IRIS_STAR","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@LOATotalDays","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingApprovedByUser","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SchoolEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipend_Amount_Annual","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipend_Amount_Monthly","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level_IRIS_STAR1","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ContractEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ProgramNameInitial","dataType":"Largetext","direction":"IN","defaultValue":"''"},{"name":"@SSNEncrypt","dataType":"Largetext","direction":"IN","defaultValue":"null"},{"name":"@AuthorizedtoWork","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DATAWaivedNumber","dataType":"LargeText","direction":"IN","defaultValue":"null"},{"name":"@ASESPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ASESExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MedDegreeMonth","dataType":"ShortText","direction":"IN","defaultValue":"null"},{"name":"@MedDegreeYear","dataType":"ShortText","direction":"IN","defaultValue":"null"},{"name":"@BrainDeathDeterminationIssueDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DEANumIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@COVIDVaccinationIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@COVIDVaccinationExpirationDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InitResidencyTypeCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":2275,"tablesReferenced":["SEC_Departments","SEC_Events","SEC_MedSchools","SEC_Programs","SEC_ResidencyTypes","SEC_Specialty","SEC_UserAddress","SEC_UserContract","SEC_UserExams","SEC_UserRoles","SEC_UsersExt"],"sprocsCalledFromBody":["AddCreditSubjectSettingsNewUser","AddPostGraduationfromMyPEras","AddUserContracts","ImportingUserCertificates","InsertMissingDemographicsData","spLOG_ErrorHandling","usp_AddMissingProgramHistory"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFProcedureCompletionForReport"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Massive bulk user import procedure (130K chars) that processes imported user records from a staging area, mapping extensive demographic, program, credential, and contact fields into SEC_Users, SEC_UsersExt, and related portfolio tables. Handles field validation, data transformation, and conditional insert/update logic across dozens of user profile fields.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["This procedure exceeds 100K characters and should be decomposed into smaller, focused sub-procedures for maintainability and testability.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review query execution plan for missing index recommendations on the multi-table JOINs.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"AddUserUniformInventory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@UniformTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@Quantity","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":72,"tablesReferenced":["SEC_UserUniformInventory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.AddUserUniformInventory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts a new uniform inventory record into SEC_UserUniformInventory capturing uniform type, size, quantity, issue date, and return status for resident/employee uniform tracking.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"ARCH_AddUserGeneralDocumentation","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CreatedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":null}],"lineCount":85,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Archived version of the general documentation add procedure that inserts a user general documentation record with basic fields including document name, description, file path, and associated user/department IDs.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"ARCH_DeleteUserGeneralDocumentation","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Archived version of the general documentation delete procedure that soft-deletes a user general documentation record by updating its IsDeleted flag based on DocumentID.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"ARCH_UpdateUserGeneralDocumentation","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":35,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Archived version of the general documentation update procedure that modifies an existing user general documentation record's fields including document name, description, and file path.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"CheckAvailabilityDocumentDomain","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":26,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.CheckAvailabilityDocumentDomain"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Checks whether a document domain name already exists in Sec_DocumentDomainForACGME to prevent duplicate entries during ACGME document domain configuration.","businessPurpose":"Manages ACGME document domain definitions, configuring which document categories are available for ACGME competency mapping.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"CheckPFACGMECompetency","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CompetencyName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@AccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AudienceID","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":46,"tablesReferenced":["PF_ACGMEDetails","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.CheckPFACGMECompetency"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Validates whether an ACGME competency record already exists for a given user, competency type, and evaluation period to prevent duplicate competency evaluations.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"DeleteAccreditationDocumentDetails","schema":"dbo","parameters":[{"name":"@AccreditationDocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"LongText","direction":"IN","defaultValue":null}],"lineCount":35,"tablesReferenced":["PF_Accreditation"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteAccreditationDocumentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes an accreditation document record from PF_AccreditationDocument based on the document ID, also removing associated file references.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"DeleteAffiliateAgreementDetails","schema":"dbo","parameters":[{"name":"@AffiliateAgreementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"LongText","direction":"IN","defaultValue":null}],"lineCount":50,"tablesReferenced":["PF_AffiliateAgreement","Prep_SiteNames"],"sprocsCalledFromBody":["GetAffiliateAgreements"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteAffiliateAgreementDetails"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes an affiliate agreement record by updating the IsDeleted flag in PF_AffiliateAgreement and logging an audit trail entry for the deletion action.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"DeleteAffiliateAgreementDocumentDetails","schema":"dbo","parameters":[],"lineCount":24,"tablesReferenced":["PF_AffiliateAgreementDocument"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteAffiliateAgreementDocumentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document record associated with an affiliate agreement from PF_AffiliateAgreementDocument based on the document ID.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"DeleteAPEProject","schema":"dbo","parameters":[{"name":"@ProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDeptid","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":17,"tablesReferenced":["APE_Projects"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteAPEProject"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Deletes an APE (Annual Program Evaluation) project record from APE_Projects based on the project ID.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"DeleteArchieveUsers","schema":"dbo","parameters":[],"lineCount":112,"tablesReferenced":["CME_Evaluation","DH_ConferenceUserAttendance","DH_UserTimesheet","DH_UserTimesheetSub","EVAL_Evaluations","PF_ACGMEDetails","PF_AccrediataionEmailAdmin","PF_Accreditation","PF_AffiliateEmailAdmin","PF_DocumentCurricula","PF_InstitutionGMEA","PF_PersonalStatements","PF_TempCurriculaEmailData","PF_UserDocumentView","PF_UserDocuments","PF_UserReviews","PRC_CustomDiagnosisTabs","PRC_ProceduresSubmitted","PTL_CustomDiagnosisTabs","PTL_PatientLogSubmitted","QUIZ_AssignmentUsers","QUIZ_UserAnsweredQuestion","Quiz_TempSummaryQuizReport","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["AddArchiveQueueUsers","AddArchiveScheduleQueue","DeleteUser"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Archives or unarchives user accounts by iterating through a list of user IDs and updating their archive status in SEC_Users, handling associated cleanup of active sessions and role assignments.","businessPurpose":"Supports user archival workflows in the portfolio, managing the transition of user accounts to archived status while preserving portfolio data for historical reference.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"DeleteCitationDetails","schema":"dbo","parameters":[{"name":"@AccreditationcitationID","dataType":"Largenumber","direction":"IN","defaultValue":null},{"name":"@IsDeletedCitations","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":47,"tablesReferenced":["PF_AccreditationCitations","PF_AccreditationCitationsHistory"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteCitationDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes an accreditation citation record by updating its status flag in PF_AccreditationCitations and logging an audit trail entry.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"DeleteMailDistributionSchedules","schema":"dbo","parameters":[],"lineCount":23,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteMailDistributionSchedules"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a mail distribution schedule record from PF_MailDistribution based on the schedule ID.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"DeleteMailTemplate","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["SEC_MailTemplateInfo"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteMailTemplate"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes an email template record from PF_Emailtemplate based on the template ID.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"DeleteOrRestoreDocumentDefination","schema":"dbo","parameters":[{"name":"@DocumentDeinationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":17,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteOrRestoreDocumentDomain"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Toggles the deleted/active status of a document definition by updating the IsDeleted flag, supporting both soft-delete and restore operations.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"DeletePaperbasedEvaluation","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":"1"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":105,"tablesReferenced":["PF_DocumentAccessLevel","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePaperbasedEvaluation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a paper-based evaluation record by updating the IsDeleted flag in PF_UserDocuments and related detail tables, with audit trail logging for the deletion.","businessPurpose":"Manages paper-based evaluation records in the portfolio, supporting institutions that still use paper forms for certain evaluation types alongside the electronic system.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFAccreditationEditDocumentDetails","schema":"dbo","parameters":[{"name":"@AccreditationDocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":29,"tablesReferenced":["PF_AccreditationDocument"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFAccreditationEditDocumentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document record from the accreditation edit section in PF_UserDocuments based on the document ID.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"DeletePFACGMECompetency","schema":"dbo","parameters":[{"name":"@DefinitionID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":61,"tablesReferenced":["PF_ACGME","PF_ACGMEDetails"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFACGMECompetency"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes an ACGME competency record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging and cleanup of associated credit subject records.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFAffiliateEditDocumentDetails","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":28,"tablesReferenced":["PF_AffiliateAgreementDocument"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFAffiliateEditDocumentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document record from the affiliate agreement edit section in PF_UserDocuments based on the document ID.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"DeletePFCertificate","schema":"dbo","parameters":[{"name":"@UserCertificateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Documentid","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":89,"tablesReferenced":["OBC_RGADocumentTypeValues","PF_UserDocuments","SEC_Departments","SEC_Events","SEC_UserCertifications"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFCertificate"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a certificate record by updating the IsDeleted flag in PF_UserDocuments and related detail tables, with audit trail logging and cleanup of associated credit subject records.","businessPurpose":"Manages certificate records in the portfolio module, enabling trainees to document professional certifications (BLS, ACLS, board certifications) with expiration tracking and verification status.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFComplianceCorrespondence","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ComplianceID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":38,"tablesReferenced":["PF_Compliance"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFComplianceCorrespondence"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes or restores a compliance correspondence record by toggling the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Supports compliance correspondence tracking in the portfolio, documenting regulatory communications, compliance notifications, and institutional correspondence.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"DeletePFComplianceCorrespondenceDocument","schema":"dbo","parameters":[],"lineCount":25,"tablesReferenced":["PF_ComplianceDocument"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFComplianceCorrespondenceDocument"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document attachment associated with a compliance correspondence record from PF_UserDocuments.","businessPurpose":"Supports compliance correspondence tracking in the portfolio, documenting regulatory communications, compliance notifications, and institutional correspondence.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"DeletePFCurricula","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFCurricula"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a curricula evaluation record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging and cleanup of associated credit subject records.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFDocumentSetting","schema":"dbo","parameters":[{"name":"@SubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":51,"tablesReferenced":["PF_DocumentCreditSubject"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFDocumentSetting"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes or restores a document setting record by toggling the IsDeleted flag in PF_DocumentCreditSubjectSettings for the scholarly activities department configuration.","businessPurpose":"Manages the department-level configuration for scholarly activities document settings, controlling which credit subjects, PGY levels, and document types are available in each department's portfolio configuration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"DeletePFExamTests","schema":"dbo","parameters":[{"name":"@UserExamTestID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserExamTests"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFExamTests"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes exam/test score records by updating the IsDeleted flag in SEC_UserExams and related tables, with audit trail logging.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFGeneralDocument","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":68,"tablesReferenced":["OBC_DocumentUploadHistory","OBC_RGADocumentTypeValues","PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFGeneralDocument"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a general documentation record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging and cleanup of associated credit subject records.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFLearningTask","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":31,"tablesReferenced":["PF_LearningTasks"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFLearningTask"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a learning task record by updating the IsDeleted flag in PF_LearningTasks, with audit trail logging.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"DeletePFMoonLightingHistory","schema":"dbo","parameters":[{"name":"@UserMoonLightingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":["SEC_UserMoonLightingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFMoonLightingHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a moonlighting history record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging.","businessPurpose":"Tracks moonlighting (external employment) activities for residents/fellows in the portfolio, which requires program director approval and is subject to duty hour regulations.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFPersonalStatements","schema":"dbo","parameters":[{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":19,"tablesReferenced":["PF_PersonalStatements"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFPersonalStatements"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a personal learning objectives statement by updating the IsDeleted flag in PF_PersonalStatements.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"DeletePFPreviousTrainingHistory","schema":"dbo","parameters":[{"name":"@UserTrainingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":113,"tablesReferenced":["SEC_AccessHistoryForMultipleAUD","SEC_UserTrainingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFPreviousTrainingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a previous training history record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging and cleanup.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFProgramTrainingHistory","schema":"dbo","parameters":[{"name":"@UserTrainingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":164,"tablesReferenced":["SEC_AccessHistoryForMultipleAUD","SEC_Departments","SEC_UserTrainingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFProgramTrainingHistory"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a program training history record by updating the IsDeleted flag and performing cascade cleanup of associated records in PF_UserDocuments with audit trail logging.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFQIPEditDocumentDetails","schema":"dbo","parameters":[{"name":"@QIProjectnDocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":26,"tablesReferenced":["PF_AccreditationDocument","PF_QIProjectDocument"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeletePFQIPEditDocumentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document record from the QIP (Quality Improvement Project) edit section in PF_QIProjectDocument based on the document ID.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"DeletePFSpecialMedActivityHistory","schema":"dbo","parameters":[{"name":"@UserSpecialMedActivityHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserSpecialMedActivityHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFSpecialMedActivityHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a special medical activity history record by updating the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Documents special medical activities and experiences in the portfolio, tracking unique clinical or research experiences outside the standard rotation schedule.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFStipend","schema":"dbo","parameters":[{"name":"@UserStipendHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":47,"tablesReferenced":["SEC_UserStipendHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFStipend"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a stipend record by updating the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Manages stipend records in the portfolio, tracking resident/fellow compensation amounts, schedules, and approval status for financial administration.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFSupplimental","schema":"dbo","parameters":[{"name":"@UserSupplementalPaymentHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserSupplementalPaymentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFSupplimental"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a supplemental payment record by updating the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Manages supplemental payment records in the portfolio for tracking additional compensation beyond base stipend.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFTrainingAgreement","schema":"dbo","parameters":[{"name":"@UserTrainingAgreementID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":71,"tablesReferenced":["SEC_UserTrainingAgreement","SEC_UserTrainingAgreementDocument"],"sprocsCalledFromBody":["DeletePFTrainingAgreementDocument","spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFTrainingAgreement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a training agreement record by updating the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging and document cleanup.","businessPurpose":"Manages training agreement records in the portfolio, documenting the formal agreements between trainees and training programs including terms, signatures, and compliance requirements.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFTrainingAgreementDocument","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserTrainingAgreementDocument"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFTrainingAgreementDocument"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes a document attachment associated with a training agreement from PF_UserDocuments, with audit trail logging.","businessPurpose":"Manages training agreement records in the portfolio, documenting the formal agreements between trainees and training programs including terms, signatures, and compliance requirements.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFTrainingGapHistory","schema":"dbo","parameters":[{"name":"@UserTrainingGapHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserTrainingGapHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFTrainingGapHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a training gap/leave of absence record by updating the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeletePFTrainingHistory","schema":"dbo","parameters":[{"name":"@UserTrainingCommentHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserTrainingCommentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFTrainingHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a training history record by updating the IsDeleted flag in PF_UserDocuments with audit trail logging.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeleteQIPDetailsForSWOTandPDSA","schema":"dbo","parameters":[],"lineCount":14,"tablesReferenced":["APE_QIProjects","APE_TakeAction"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteQIPDetailsForSWOTandPDSA"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes QIP detail records for SWOT analysis and PDSA cycle entries associated with a quality improvement project.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"DeleteRestoreConcerns","schema":"dbo","parameters":[{"name":"@ConcernID","dataType":"Largenumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":57,"tablesReferenced":["PF_Concern","PF_SurveyPerformanceConcernHistory"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteRestoreConcerns"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Toggles the deleted/active status of a concern record in PF_Concern, supporting both soft-delete and restore operations with audit trail logging.","businessPurpose":"Manages trainee/program concern records in the portfolio module, supporting the documentation of performance issues, remediation plans, and follow-up actions.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"DeleteRestoreSurveyPerformance","schema":"dbo","parameters":[{"name":"@SurveyPerformanceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":52,"tablesReferenced":["PF_Concern","PF_SurveyPerformance","PF_SurveyPerformanceHistory"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteSurveyPerformance"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Toggles the deleted/active status of a survey performance record in PF_SurveyPerformance, supporting both soft-delete and restore operations with audit trail logging.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"DeleteTempCurriculaEmailData","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["PF_TempCurriculaEmailData"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.DeleteTempCurriculaEmailData"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Cleans up temporary curricula email notification data from the staging table after email processing is complete.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"DeleteUserContractDetails","schema":"dbo","parameters":[{"name":"@UserContractID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":67,"tablesReferenced":["OBC_DocumentUploadHistory","OBC_RGADocumentTypeValues","PF_UserDocuments","SEC_UserContract"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeleteUserContractDetails","UserManager.cs.Update"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a user contract record by updating the IsDeleted flag in SEC_UserContract and related tables, with audit trail logging and cascade cleanup.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeleteUserDependent","schema":"dbo","parameters":[{"name":"@UserDependentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserDependent"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeleteUserDependent"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a user dependent record by updating the IsDeleted flag in SEC_UserDependents with audit trail logging.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DeleteUserUniformInventory","schema":"dbo","parameters":[{"name":"@UserUniformInventoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":["SEC_UserUniformInventory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeleteUserUniformInventory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Soft-deletes a uniform inventory record by updating the IsDeleted flag in SEC_UserUniformInventory with audit trail logging.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"DoesSubjectNameExist","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":21,"tablesReferenced":["PF_DocumentCreditSubject"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.IsDocumentSubjectExists"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Checks whether a credit subject name already exists in PF_Subjects for a given department to prevent duplicate subject definitions.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GenerateDashboardResults","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcadamicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DashboardType","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":284,"tablesReferenced":["EVAL_QuestionsCategories","Eval_MilestoneSubCompetency","SEC_CompetencyDashBoard","SEC_DashBoard","SEC_Departments","SEC_EPADashBoard","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetDashboardResultsByArchivedUser","GetDashboardResultsByUser"],"crudType":"report","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDashboardResults"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Computes portfolio dashboard summary results for a specific user by aggregating completion counts across multiple document categories (certificates, curricula, training agreements, exam scores, general documents) and returning a single-row summary with category-level totals.","businessPurpose":"Powers portfolio dashboard visualizations, providing summary metrics and completion status across all portfolio sections for quick status assessment.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetAccrediationAdverseUpComingEmailInformation","schema":"dbo","parameters":[],"lineCount":731,"tablesReferenced":["PF_AccrediataionEmailAdmin","PF_Accreditation","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers","SEC_KeyTxtInfo","SEC_Settings"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrediationUpComingEmailInformation"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Generates email notification data for adverse accreditation actions by assembling HTML email templates with upcoming review dates, citation details, and department-specific information using WHILE-loop iteration over affected departments and multiple conditional template sections.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 27+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetAccrediationCitationUpComingEmailInformation","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":378,"tablesReferenced":["PF_AccrediataionEmailAdmin","PF_Accreditation","PF_AccreditationCitations","PF_CitationCategories","PF_Citations","SEC_Departments","SEC_KeyTxtInfo","SEC_Settings","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrediationCitationUpComingEmailInformation"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Generates email notification data for upcoming accreditation citation deadlines by assembling HTML email templates with citation details, status updates, and department-specific information using WHILE-loop iteration.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Review query execution plan for missing index recommendations on the multi-table JOINs.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetAccrediationDepartmentEmails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":89,"tablesReferenced":["PF_AccrediataionEmailAdmin","SEC_DepartmentInstitution","SEC_InstitutionUsers","SEC_Roles","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrediationDepartmentEmails"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of department administrator email addresses associated with accreditation notifications, used to build recipient lists for accreditation-related email distributions.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["This procedure has 12+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"medium"},{"name":"GetAccrediationInstitutionEmails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":32,"tablesReferenced":["PF_AccrediataionEmailAdmin","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrediationInstitutionEmails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves institution-level email addresses for accreditation notifications by querying the PF_AccrediataionEmailAdmin table.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccrediationUpComingEmailInformation","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":239,"tablesReferenced":["PF_AccrediataionEmailAdmin","PF_Accreditation","SEC_KeyTxtInfo","SEC_Settings","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrediationUpComingEmailInformation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates email notification content for upcoming accreditation review dates by assembling HTML email templates for PD and admin users (excluding GMEA users), using WHILE-loop iteration over upcoming accreditation events.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"high"},{"name":"GetAccreditationAgreementExpInfo","schema":"dbo","parameters":[],"lineCount":33,"tablesReferenced":["PF_Accreditation","PF_AccreditationCitations"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationAgreementExpInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves accreditation agreement expiration information including next survey dates and review deadlines for the accreditation monitoring dashboard.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationCitationInfoByID","schema":"dbo","parameters":[],"lineCount":53,"tablesReferenced":["PF_AccreditationCitations","PF_CitationCategories","PF_Citations","PF_ProgramRequirements"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationCitationInfoByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed accreditation citation information by citation ID including citation category, description, status, resolution details, and associated accreditation data.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationCitationInfoforView","schema":"dbo","parameters":[],"lineCount":44,"tablesReferenced":["PF_AccreditationCitations","PF_CitationCategories","PF_Citations","PF_ProgramRequirements","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationCitationInfoforView"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves accreditation citation information formatted for the read-only view display, including citation category name, status label, and descriptive text.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationCitationResults","schema":"dbo","parameters":[],"lineCount":47,"tablesReferenced":["PF_Accreditation","PF_AccreditationCitations","PF_CitationCategories","PF_Citations","PF_ProgramRequirements","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationCitationResults"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves a filtered and sorted list of accreditation citations for grid display, supporting pagination and search filtering by citation category and status.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetAccreditationDepartmentDetails","schema":"dbo","parameters":[],"lineCount":26,"tablesReferenced":["PF_Accreditation","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationDepartmentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves department details associated with a specific accreditation record for displaying the department assignment list.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationDocumentation","schema":"dbo","parameters":[{"name":"@DeleteFlag","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":63,"tablesReferenced":["PF_Accreditation","PF_AccreditationDocument","PF_MaximumAccrediationTrainees"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationDocumentation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the accreditation documentation grid data with dynamic SQL-based sorting and filtering, returning accreditation records with associated department names, review dates, and document counts.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"high"},{"name":"GetAccreditationDocumentationReport","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":34,"tablesReferenced":["PF_Accreditation","PF_MaximumAccrediationTrainees","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationDocumentationReport"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Generates report data for accreditation documentation printout, returning formatted accreditation records with all fields needed for the printed report view.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetAccreditationDocumentByDocumentID","schema":"dbo","parameters":[{"name":"@AccreditationDocIDs","dataType":"LargeText","direction":"IN","defaultValue":"'0'"},{"name":"@AccreditationID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":36,"tablesReferenced":["PF_AccreditationDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationDocumentByDocumentID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves a specific accreditation document record by its document ID including file path, document name, and upload metadata.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationDocumentByID","schema":"dbo","parameters":[],"lineCount":68,"tablesReferenced":["PF_Accreditation","PF_AccreditationDocument","PF_MaximumAccrediationTrainees"],"sprocsCalledFromBody":["GetCitationInfo"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationDocumentByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed accreditation record by accreditation ID including all fields for the edit form: accrediting body, review dates, department assignments, and document list.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationReviewDetails","schema":"dbo","parameters":[],"lineCount":23,"tablesReferenced":["PF_AccreditationReviewDetails"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationReviewDetails","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves accreditation review action details for displaying the review history of an accreditation record.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAccreditationTrainees","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["PF_MaximumAccrediationTrainees"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccreditationTrainees"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of trainees associated with a specific accreditation record for displaying trainee assignments.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetAccrselectedDepartments","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":101,"tablesReferenced":["PF_AccrediataionEmailAdmin","SEC_DepartmentInstitution","SEC_InstitutionUsers","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAccrselectedDepartments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the departments currently selected for an accreditation record, used to pre-populate the department multi-select control on the accreditation edit form.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This procedure has 9+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"low"},{"name":"GetACGMESubjectAndCategories","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":53,"tablesReferenced":["PF_ACGMEDocumentSubjectCategories","PF_DocumentCreditSubject","PF_DocumentMappingStructure"],"sprocsCalledFromBody":["AddDocumentCreditSubject"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetACGMESubjectAndCategories"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves ACGME subject areas and their associated categories for populating dropdown selectors in the competency evaluation forms.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"low"},{"name":"GetAffilateDocumentIDDetails","schema":"dbo","parameters":[],"lineCount":17,"tablesReferenced":["PF_AffiliateAgreementDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves document ID details for an affiliate agreement document record.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetAffiliateAgreementDepartmentDetails","schema":"dbo","parameters":[],"lineCount":26,"tablesReferenced":["PF_AffiliateAgreement","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateAgreementDepartmentDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves department details associated with a specific affiliate agreement for displaying the department assignment list.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAffiliateAgreementDepartments","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":24,"tablesReferenced":["SEC_DepartmentInstitution"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateAgreementDepartments"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of departments assigned to an affiliate agreement for the department multi-select control.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAffiliateAgreementDocumentationReport","schema":"dbo","parameters":[],"lineCount":46,"tablesReferenced":["DH_DepartmentRotations","PF_AffiliateAgreement","PF_AffiliateAgreementDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateAgreementDocumentationReport"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Generates report data for affiliate agreement documentation printout, returning formatted agreement records for the printed report view.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetAffiliateAgreementExpInfo","schema":"dbo","parameters":[],"lineCount":27,"tablesReferenced":["PF_AffiliateAgreement"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateAgreementExpInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves affiliate agreement expiration information including end dates and renewal status for the agreement monitoring dashboard.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAffiliateAgreementsBind","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":44,"tablesReferenced":["PF_AFFSponsorsName","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateSponsorNameList","UserManager.cs.GetAffiliateAgreementsBind"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the affiliate agreements grid data for a department, returning agreement records with affiliate names, dates, and status for grid display.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetAffiliateAgreementsCsv","schema":"dbo","parameters":[{"name":"@DeleteFlag","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsSponsoringName","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsParticipatingName","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsProgram","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsTrainee","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsAgreement","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsEffectiveDate","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsDirector","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@IsTerm","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":107,"tablesReferenced":["DH_DepartmentRotations","PF_AffiliateAgreement"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateAgreementsCsv"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Exports affiliate agreement data in CSV-compatible format using dynamic SQL for column ordering, returning all agreement fields for bulk export functionality.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"GetAffiliateInstitutionEmails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":32,"tablesReferenced":["PF_AffiliateEmailAdmin","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateInstitutionEmails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves institution-level email addresses for affiliate agreement notifications from PF_AffiliateEmailAdmin.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetAffiliateNameAgreementsBind","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":20,"tablesReferenced":["PF_AffiliateName"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateParticipatingNameList","UserManager.cs.GetAffiliateNameAgreementsBind"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves affiliate institution names for populating the affiliate name dropdown in the agreement form.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetAffiliateselectedDepartments","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":72,"tablesReferenced":["PF_AffiliateEmailAdmin","SEC_DepartmentInstitution","SEC_InstitutionUsers","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAffiliateselectedDepartments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the departments currently selected for an affiliate agreement, used to pre-populate the department selection on the edit form.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetAllAPEGroupsForQIP","schema":"dbo","parameters":[],"lineCount":29,"tablesReferenced":["APE_Group","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAllAPEGroupsQIP"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves all APE (Annual Program Evaluation) groups associated with Quality Improvement Projects for populating the QIP group selector.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetAllAPESectionsQIP","schema":"dbo","parameters":[],"lineCount":20,"tablesReferenced":["APE_Sections"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAllAPEGroupsSectionQIP"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves APE section definitions from APE_Sections for populating the QIP section dropdown.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetAllLatestPFUserDocumentsByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":458,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetAllLatestPFUserDocumentsByUserID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the most recent portfolio user documents across all document types for a specific user, providing a comprehensive snapshot of the user's latest portfolio entries.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"GetApprovedAdminDetails","schema":"dbo","parameters":[],"lineCount":78,"tablesReferenced":["EVAL_EvaluateEvaluation","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetApprovedAdminDetails","FieldsLookupManager.cs.GetUserApprovedByList"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves GMEA (Graduate Medical Education Administrator) details based on institution/department, used for approval workflow routing.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"low"},{"name":"GetCertificateList","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":20,"tablesReferenced":["SEC_Certifications"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetCertificateList"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of certificate types for populating the certificate type dropdown in the portfolio certificate form.","businessPurpose":"Manages certificate records in the portfolio module, enabling trainees to document professional certifications (BLS, ACLS, board certifications) with expiration tracking and verification status.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetCitationCategoryDetails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"Largenumber","direction":"IN","defaultValue":null},{"name":"@DateofAction","dataType":"LargeDate","direction":"IN","defaultValue":"''"}],"lineCount":86,"tablesReferenced":["PF_CitationCategories","PF_ProgramRequirements"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCitationCategoryDetails"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves citation category definitions and their hierarchical structure for accreditation citation classification.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetCitationDetails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"Largenumber","direction":"IN","defaultValue":null}],"lineCount":64,"tablesReferenced":["PF_AccreditationCitations","PF_CitationCategories","PF_Citations","PF_ProgramRequirements","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetLetterofNotificationDetails"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCitationDetails"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves citation detail records for display in the accreditation citation list.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetCitationHistoryDetails","schema":"dbo","parameters":[{"name":"@AccreditationCitationID","dataType":"Largenumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["PF_AccreditationCitations","PF_AccreditationCitationsHistory","PF_CitationCategories","PF_Citations","PF_ProgramRequirements","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCitationHistoryDetails"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the history of changes to a citation record for the citation audit trail view.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"low"},{"name":"GetCitationInfo","schema":"dbo","parameters":[{"name":"@AccreditationID","dataType":"Largenumber","direction":"IN","defaultValue":null},{"name":"@IsDeletedCitations","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@AccreditationMode","dataType":"VerySmallNumber","direction":"IN","defaultValue":"1"},{"name":"@AccreditationCitationID","dataType":"LargeText","direction":"IN","defaultValue":"NULL"}],"lineCount":126,"tablesReferenced":["PF_AccreditationCitations","PF_CitationCategories","PF_Citations","PF_ProgramRequirements"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCitationInfo"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves comprehensive citation information including related documents and department details using WHILE-loop iteration for associated data.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetCompetency","schema":"dbo","parameters":[],"lineCount":19,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetCompetency"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of portfolio document competency definitions for dropdown population in evaluation forms.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetCompetencyByDepartmentID","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCompetencyByDepartmentID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the osteopathic principles flag setting for a selected department, used to determine which competency frameworks apply.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetConcernHistoryDetails","schema":"dbo","parameters":[],"lineCount":42,"tablesReferenced":["PF_ConcernNumber","PF_SurveyPerformanceConcernHistory","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetConcernHistoryDetails"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the history of changes to a concern record for the concern audit trail view.","businessPurpose":"Manages trainee/program concern records in the portfolio module, supporting the documentation of performance issues, remediation plans, and follow-up actions.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetConcernInfo","schema":"dbo","parameters":[{"name":"@ConcernID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SurveyPerformanceID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":54,"tablesReferenced":["PF_Concern","PF_SurveyPerformance","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetConcernInfoforAdd"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed concern information for the concern view/edit form.","businessPurpose":"Manages trainee/program concern records in the portfolio module, supporting the documentation of performance issues, remediation plans, and follow-up actions.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetCorePersonnelOrUserEmailInformation","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@UserCorePersonnelID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@LoggedUserID","dataType":"CounterNumber","direction":"IN","defaultValue":null}],"lineCount":217,"tablesReferenced":["PF_EmailTemplate","SEC_Departments"],"sprocsCalledFromBody":["GetRowValuesToStringWithSemiColon"],"crudType":"get","antiPatterns":{"hasCursor":true,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates email notification content for new user registrations or core personnel updates using a CURSOR to iterate over recipient lists, assembling personalized HTML email templates with user profile details.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Replace the CURSOR-based row-by-row iteration with a set-based approach using CTEs, window functions, or CROSS APPLY to improve performance and reduce lock duration.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetCurriculaEmailNoticeInformation","schema":"dbo","parameters":[{"name":"@FirstName","dataType":"VARCHAR(50)","direction":"IN","defaultValue":null},{"name":"@LastName","dataType":"VARCHAR(50)","direction":"IN","defaultValue":null},{"name":"@Email","dataType":"VARCHAR(100)","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"VARCHAR(100)","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"DATETIME","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"DATETIME","direction":"IN","defaultValue":null},{"name":"@RotationName","dataType":"VARCHAR(250)","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserName","dataType":"VARCHAR(50)","direction":"IN","defaultValue":null},{"name":"@Password","dataType":"VARCHAR(50)","direction":"IN","defaultValue":null},{"name":"@AccessID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":278,"tablesReferenced":["PF_TempCurriculaEmailData","SEC_Departments","SEC_KeyTxtInfo","SEC_Settings","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":true,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetCurriculaEmailNoticeInformation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates curricula-related email notifications using a CURSOR to iterate over users with pending curricula assignments, assembling HTML email templates with curricula details, due dates, and completion status.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Replace the CURSOR-based row-by-row iteration with a set-based approach using CTEs, window functions, or CROSS APPLY to improve performance and reduce lock duration.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetCurriculaNotificationUsers","schema":"dbo","parameters":[],"lineCount":49,"tablesReferenced":["PF_UserDocuments","SEC_UserRoles"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of users who should receive curricula notification emails based on their department and curricula assignment status.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetDashboardForPortfolio","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcadamicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":317,"tablesReferenced":["MYEval_DepartmentUserPRPAndPPDetails","PF_DocumentCreditSubject","PF_UserDocuments","PF_UserSpecificSubject","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetSummaryPerformanceDateRangesByUserGaps"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDashboardResultsForPortfolio"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the portfolio dashboard data for publications and presentations by building dynamic queries across multiple document types, aggregating scholarly activity counts, and returning categorized results for the portfolio dashboard view with WHILE-loop-based iteration over document categories.","businessPurpose":"Powers portfolio dashboard visualizations, providing summary metrics and completion status across all portfolio sections for quick status assessment.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 9+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetDeletedAccreditationDocumentation","schema":"dbo","parameters":[],"lineCount":27,"tablesReferenced":["PF_Accreditation","PF_AccreditationDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDeletedAccreditationDocumentation"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves soft-deleted accreditation documentation records for the recycle bin view.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetDeletedAffiliateAgreements","schema":"dbo","parameters":[],"lineCount":40,"tablesReferenced":["DH_DepartmentRotations","PF_AffiliateAgreement"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDeletedAffiliateAgreements"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves soft-deleted affiliate agreement records for the recycle bin view, allowing administrators to review and restore deleted agreements.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetDepartmentEnableNHBInfoByID","schema":"dbo","parameters":[],"lineCount":19,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDepartmentEnableNHBInfoByID"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves the NHB (National Health Board) enablement flag for a department, used to determine department-specific feature visibility.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetDepartmentIdByUserId","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDepartmentIdByUserId","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the department ID associated with a user based on their user ID.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetDependentDetailsByUserID","schema":"dbo","parameters":[],"lineCount":38,"tablesReferenced":["SEC_DependentType","SEC_UserDependent"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetDependentDetailsByUserID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves dependent (spouse/emergency contact) records for a user.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetDependentInfoByID","schema":"dbo","parameters":[{"name":"@UserDependentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":57,"tablesReferenced":["SEC_DependentType","SEC_UserDependent"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetDependentInfoByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed dependent information by ID for the edit form.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetDependentType","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["SEC_DependentType"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetDependentType","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of dependent relationship types for the dropdown selector.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetDocumentDomainForACGME","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":45,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDocumentDomainForACGME"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves ACGME document domain definitions for the domain management grid.","businessPurpose":"Manages ACGME document domain definitions, configuring which document categories are available for ACGME competency mapping.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetDocumentDomainForACGMEbyID","schema":"dbo","parameters":[],"lineCount":14,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetDocumentDomainForACGMEbyID"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves a specific ACGME document domain definition by ID.","businessPurpose":"Manages ACGME document domain definitions, configuring which document categories are available for ACGME competency mapping.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetDocumentPortfoliotempdetails","schema":"dbo","parameters":[],"lineCount":27,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves temporary portfolio document details from the staging area during document processing.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetEmployeeHealthDemographicsInfoByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"CounterNumber","direction":"IN","defaultValue":null}],"lineCount":28,"tablesReferenced":["SEC_UsersExt"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetEmployeeHealthDemographicsInfoByUserID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves employee health demographic information for a user from SEC_UsersExt.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetImageInfoByUserID","schema":"dbo","parameters":[],"lineCount":25,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetImageInfoByUserID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user's profile image information including file path and upload metadata.","businessPurpose":"Manages user profile photo storage and retrieval in the portfolio module.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetInstitutionalAffiliateEmailInformation","schema":"dbo","parameters":[],"lineCount":904,"tablesReferenced":["DH_DepartmentRotations","PF_AFFSponsorsName","PF_AffiliateAgreement","PF_AffiliateEmailAdmin","PF_AffiliateName","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetInstitutionalAffiliateEmailInformation"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (48K chars) procedure that generates comprehensive institutional affiliate email notifications by assembling HTML templates with agreement details, expiration dates, and department information using WHILE-loop iteration over affiliate agreements and affected departments.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 45+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetInstitutionalAffiliateEmailInformationForNonGMEA","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":137,"tablesReferenced":["DH_DepartmentRotations","PF_AffiliateAgreement","PF_AffiliateEmailAdmin"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetInstitutionalAffiliateEmailInformationForNonGMEA"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Generates affiliate agreement email notifications specifically for non-GMEA users, assembling HTML templates with agreement expiration information using WHILE-loop iteration.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"GetInstitutionName","schema":"dbo","parameters":[],"lineCount":29,"tablesReferenced":["SEC_DepartmentInstitution"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetInstitutionName","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves institution name for display in the portfolio program history section.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetITEEarlyWarningTemplate","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EarlyWarningScore","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":109,"tablesReferenced":["PF_EmailTemplate","SEC_Departments","SEC_Exams","SEC_PDDeparmentPartialEvalaution","SEC_UserExams","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["MainPageBusiness.cs.GenerateITEEWEmail"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates ITE (In-Training Examination) early warning email templates for trainees with concerning exam score trends, assembling HTML notifications using WHILE-loop iteration over affected users.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetITEEarlyWarningTemplateForPD","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EarlyWarningScore","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":118,"tablesReferenced":["PF_EmailTemplate","SEC_Departments","SEC_Exams","SEC_PDDeparmentPartialEvalaution","SEC_UserExams","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["MainPageBusiness.cs.GenerateITEPDEmail"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates ITE early warning email templates specifically for Program Directors, assembling HTML notifications about trainees with concerning exam trends using WHILE-loop iteration.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetITEEarlyWarningTemplateForPreceptor","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EarlyWarningScore","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":119,"tablesReferenced":["LA_Preceptors","LA_Trainee","PF_EmailTemplate","SEC_Departments","SEC_Exams","SEC_UserExams","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["MainPageBusiness.cs.GenerateITEPreceptorEmail"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates ITE early warning email templates specifically for Preceptors, assembling HTML notifications about their assigned trainees with concerning exam trends using WHILE-loop iteration.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetLearningAppraisalEmailInformation","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsUser","dataType":"INT","direction":"IN","defaultValue":null},{"name":"@IsPD","dataType":"INT","direction":"IN","defaultValue":null},{"name":"@PSTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@GoalText","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Loggedinuser","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":332,"tablesReferenced":["LA_Preceptors","LA_Trainee","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":true,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserTypeDetailsForUserImporting"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates learning appraisal email notifications using a CURSOR to iterate over users with pending appraisal reviews, assembling personalized HTML email templates with appraisal details and due dates.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Replace the CURSOR-based row-by-row iteration with a set-based approach using CTEs, window functions, or CROSS APPLY to improve performance and reduce lock duration.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetLearningAppraisalExpInfo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":26,"tablesReferenced":["PF_LearningTasks"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetLearningAppraisalExpInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves learning appraisal expiration information for monitoring upcoming appraisal deadlines.","businessPurpose":"Supports the learning appraisal workflow, enabling structured evaluation of trainee learning plans through assessor and assessee review cycles.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetLengthofTrainingByProgramID","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":57,"tablesReferenced":["SEC_DepartmentTrainingTypes","SEC_Departments","SEC_Programs"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetLengthofTrainingByProgramID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the configured training length for a program, used to calculate expected completion dates.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetLetterofNotificationDetails","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["PF_LetterofNotification"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetLetterofNotificationDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves letter of notification details for the portfolio compliance section.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetLevelList","schema":"dbo","parameters":[{"name":"@PageMode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":51,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetLevelList","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the PGY level list for the portfolio program history dropdown using WHILE-loop iteration to generate level options.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"low"},{"name":"GetListOfDepartments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":67,"tablesReferenced":["LA_Preceptors","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetLinkedDepartmentList"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetListOfDepartments","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of departments for dropdown population in portfolio forms.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetMailDistributionSchedules","schema":"dbo","parameters":[{"name":"@FilterColumn","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":45,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMailDistributionSchedules"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves mail distribution schedule records for the email management grid using dynamic SQL for flexible sorting.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"low"},{"name":"GetMailDistributionSchedulesByID","schema":"dbo","parameters":[],"lineCount":32,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMailDistributionSchedulesByID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed mail distribution schedule by ID for the edit form.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetMailTemplateInfoByID","schema":"dbo","parameters":[],"lineCount":30,"tablesReferenced":["SEC_MailTemplateInfo"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMailTemplateInfoByID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves email template details by template ID for the template editor.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetMailTemplateList","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["SEC_MailTemplateInfo"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMailTemplateList"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of email templates for the template management grid.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetMilitaryRankList","schema":"dbo","parameters":[{"name":"@ArmedForcesBranchID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":48,"tablesReferenced":["SEC_MilitaryRank","SEC_Ranks","SEC_UsersExt"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMilitaryRankList","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves military rank definitions for the military rank dropdown in the user profile.","businessPurpose":"Manages military service information in the user profile, tracking rank, service branch, and military-related data for military-affiliated training programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetMyEvalsDBParametersForACGMEImporting","schema":"dbo","parameters":[],"lineCount":29,"tablesReferenced":["PF_ACGMEImportingMyEvalsAliasNameFields","PF_ACGMEImportingMyEvalsFields"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMyEvalsDBParametersForACGMEImporting"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves database parameter mappings for the ACGME data import process, defining how external ACGME fields map to MyEvaluations database columns.","businessPurpose":"Supports the ACGME data integration workflow, enabling institutions to import competency evaluation data from the ACGME reporting system into MyEvaluations for consolidated tracking and reporting.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetMyEvalsDBParametersForUserImporting","schema":"dbo","parameters":[],"lineCount":51,"tablesReferenced":["SEC_UserImportingMyEvalsAliasNameFields","SEC_UserImportingMyEvalsFields"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMyEvalsDBParametersForUserImporting"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves database parameter mappings for the user import process, defining how external user data fields map to MyEvaluations database columns.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"GetMyEvalsFieldsForACGMEImporting","schema":"dbo","parameters":[],"lineCount":27,"tablesReferenced":["PF_ACGMEImportingMyEvalsAliasNameFields","PF_ACGMEImportingMyEvalsFields"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMyEvalsFieldsForACGMEImporting"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of MyEvaluations field definitions available for ACGME import field mapping.","businessPurpose":"Supports the ACGME data integration workflow, enabling institutions to import competency evaluation data from the ACGME reporting system into MyEvaluations for consolidated tracking and reporting.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetMyEvalsFieldsForOutcomeNarratives","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["EVAL_OutcomeNarrativeImportingMyEvalsFields"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMyEvalsFieldsForOutcomeNarratives"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves MyEvaluations field definitions for outcome narrative import mapping.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetMyEvalsFieldsForUserImporting","schema":"dbo","parameters":[],"lineCount":77,"tablesReferenced":["MGMT_FieldTypes","OBC_CustomFields","OBC_FieldTypeInfo","SEC_Departments","SEC_UserImportingMyEvalsAliasNameFields","SEC_UserImportingMyEvalsFields"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMyEvalsFieldsForUserImporting"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the comprehensive list of MyEvaluations field definitions available for user import field mapping, covering all user profile sections.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["This procedure has 11+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetMypDepartments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":24,"tablesReferenced":["SEC_Departments","SEC_MypDepartments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetMypDepartments"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves department list for the MyPortfolio module's department selector.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetONCallCurriculaAssignments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0--Added by shashank"}],"lineCount":460,"tablesReferenced":["DH_AmionSchedule","DH_AmionScheduleCrossCoverAssignments","DH_AmionScheduleRotationAssignments","DH_AmionTangierUsers","DH_DepartmentRotations","DH_MomentumSchedule","DH_MomentumTaskRoles","DH_QGendaSchedule","DH_QgendaScheduleEntry","DH_QgendaTaskRoles","DH_SyncAMIONRotations","DH_SyncAMIONUsers","EVAL_CurriculaAssignmentsDetailAuto","EVAL_TemplateRotation","Momentum_Assignments","Momentum_Staff","PF_TempCurriculaEmailData","SEC_DepartmentInstitution","SEC_UserRoles"],"sprocsCalledFromBody":["MergeAssignmentBasedonRotationGapDaysForONCallCurricula"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetONCallCurriculaAssignments"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Retrieves on-call curricula assignment details for email notification processing, building comprehensive assignment data with user, rotation, and schedule information using WHILE-loop iteration.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 43+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetOriginalDocID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":18,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetOriginalDocID"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves the original document ID for a portfolio document, used when tracking document lineage after copy or transfer operations.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetPaperBasedEvaluation","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":"'PBE'"}],"lineCount":84,"tablesReferenced":["PF_UserDocuments","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPaperBasedEvaluation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves paper-based evaluation records for a user's portfolio, returning evaluation entries with scores, evaluator details, and completion dates.","businessPurpose":"Manages paper-based evaluation records in the portfolio, supporting institutions that still use paper forms for certain evaluation types alongside the electronic system.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPersonalStatementsEmailInformation","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsUser","dataType":"INT","direction":"IN","defaultValue":null},{"name":"@IsPD","dataType":"INT","direction":"IN","defaultValue":null},{"name":"@PSTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PSText","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":210,"tablesReferenced":["LA_Preceptors","LA_Trainee","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPersonalStatementsEmailInformation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates personal statement email notifications by assembling HTML templates for users with pending personal learning statement reviews using WHILE-loop iteration.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetPF_AffiliateAgreementsBind","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":18,"tablesReferenced":["PF_AffiliateName"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves a simplified list of affiliate agreements for dropdown binding, returning agreement IDs and display names.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetPFACGMECompetencies","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":294,"tablesReferenced":["PF_ACGME","PF_ACGMEDetails","PF_UserReviews","SEC_UserRoles","SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":["GetACGMECore","spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFACGMECompetencies"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the ACGME competency evaluation grid data for a user, returning competency records with scores, evaluator details, dates, and completion status with support for multiple competency framework types.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"high"},{"name":"GetPFACGMECompetenciesByID","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DefinitionID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":93,"tablesReferenced":["PF_ACGME","PF_ACGMEDetails","PF_DocumentAccessLevel","PF_UserReviews","SEC_UserTypes"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFACGMECompetenciesByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed ACGME competency evaluation record by ID for the edit form, including all assessment scores, evaluator information, and document attachments.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFACGMEUserAccessLevel","schema":"dbo","parameters":[],"lineCount":48,"tablesReferenced":["PF_DocumentAccessLevel","SEC_UserRoles"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFACGMEUserAccessLevel"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user's access level for ACGME competency features, determining whether the user can view, edit, or administer competency evaluations based on their role and department.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFBarChartsDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":179,"tablesReferenced":["PF_DocumentCreditSubject","PF_UserDocuments"],"sprocsCalledFromBody":["GetRoleIDByUserID","GetUserTypeByID"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFBarChartsDetails","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves data for portfolio bar chart visualizations showing publication and research project statistics by category, using WHILE-loop iteration and dynamic SQL for flexible grouping.","businessPurpose":"Generates data for portfolio reports and visualizations, supporting program oversight and accreditation documentation requirements.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"high"},{"name":"GetPFCertificateInfoByID","schema":"dbo","parameters":[{"name":"@UserCertificateID","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL    --added by bharathi on 23/2/2018"}],"lineCount":59,"tablesReferenced":["PF_UserDocuments","SEC_UserCertifications"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCertificateInfoByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed certificate information by certificate record ID for the edit form, including certificate type, issuing body, dates, and verification status.","businessPurpose":"Manages certificate records in the portfolio module, enabling trainees to document professional certifications (BLS, ACLS, board certifications) with expiration tracking and verification status.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetPFCertificatesListByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LARGENUMBER","direction":"IN","defaultValue":null},{"name":"@LoginUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"null"}],"lineCount":139,"tablesReferenced":["PF_UserDocuments","SEC_Certifications","SEC_Departments","SEC_UserCertifications","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCertificatesListByUserID","UserManager.cs.GetPFEmployeeHealthListByUserID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves all certificate records for a specific user, returning the certificate grid data with type names, expiration dates, and verification status.","businessPurpose":"Manages certificate records in the portfolio module, enabling trainees to document professional certifications (BLS, ACLS, board certifications) with expiration tracking and verification status.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFCompetencyDocuments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":78,"tablesReferenced":["PF_UserDocuments","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCompetencyDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves portfolio documents associated with a specific competency type for displaying linked evidence in the competency evaluation view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFCompetencyInfo","schema":"dbo","parameters":[],"lineCount":34,"tablesReferenced":["EVAL_QuestionsCategories"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFCompetencyInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves competency configuration information for the learning appraisal competency grid, returning available competency types and their settings.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFComplianceCorrespodence","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":47,"tablesReferenced":["PF_Compliance","PF_ComplianceDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFComplianceCorrespodence"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves p f compliance correspodence data in the PF (Portfolio) module. Body length: 2483 chars.","businessPurpose":"Supports compliance correspondence tracking in the portfolio, documenting regulatory communications, compliance notifications, and institutional correspondence.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"low"},{"name":"GetPFComplianceCorrespondenceByID","schema":"dbo","parameters":[],"lineCount":32,"tablesReferenced":["PF_Compliance","PF_ComplianceDocument","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFComplianceCorrespondenceByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves p f compliance correspondence by i d data in the PF (Portfolio) module. Body length: 1289 chars.","businessPurpose":"Supports compliance correspondence tracking in the portfolio, documenting regulatory communications, compliance notifications, and institutional correspondence.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFContractAgreement","schema":"dbo","parameters":[{"name":"@UserContractID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":52,"tablesReferenced":["PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFContractAgreement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves contract agreement information for the portfolio contracts overview.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFContractsByID","schema":"dbo","parameters":[],"lineCount":64,"tablesReferenced":["SEC_UserMyGME","SEC_UserProgram","SEC_UserTrainingAgreement","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFContractsByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed portfolio contract record by ID for the edit form.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFCreditRequiredDetails","schema":"dbo","parameters":[{"name":"@SELECTedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":93,"tablesReferenced":["PF_DocumentCreditSubject","PF_UserSpecificSubject","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFCreditRequiredDetails"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves credit requirement details for scholarly activities based on department and user type configuration.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetPFCurriculaByID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":169,"tablesReferenced":["DH_DepartmentRotations","PF_DocumentAccessLevel","PF_Subjects","PF_UserDocuments","PF_UserReviews"],"sprocsCalledFromBody":["GetUserTitleByUserID","spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed curricula evaluation record by ID for the edit form, including rotation details, scores, completion status, and evaluator information.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFCurriculaDepartmentReportInfo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":"- 1"},{"name":"@SelectedUserIDs","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@ReportStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"}],"lineCount":361,"tablesReferenced":["DH_DepartmentRotations","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaDepartmentReportInfo"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates department-level curricula report data by aggregating curricula completion and scores across users within a department using WHILE-loop iteration for pagination.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 23+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"high"},{"name":"GetPFCurriculaDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Report","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":"'CEMD'"}],"lineCount":964,"tablesReferenced":["DH_DepartmentRotations","LA_Preceptors","PF_Subjects","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_Programs","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaDetails","UserManager.cs.GetCurriculaMeasuresDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (38K chars) procedure that retrieves curricula and conference handout grid data with extensive field mapping, conditional display logic based on document type and user access level, and complex JOINs across multiple tables.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 40+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"GetPFCurriculaDetailsByRotationName","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":55,"tablesReferenced":[],"sprocsCalledFromBody":["GetPFCurriculaDetails"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaDetailsByRotationName"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves curricula details filtered by rotation name for the rotation-specific curricula view.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFCurriculaReportInfo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":441,"tablesReferenced":["DH_DepartmentRotations","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaReportInfo"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates curricula evaluation report data with aggregated scores and completion statistics for the curricula report printout.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 24+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFCurriculaVideoByID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":161,"tablesReferenced":["PF_DocumentAccessLevel","PF_UserDocuments","PF_UserReviews"],"sprocsCalledFromBody":["GetUserTitleByUserID","spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaVideoByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed curricula video record by ID for the edit form, including video metadata, completion status, and evaluation details.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFCurriculaVideoDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":550,"tablesReferenced":["DH_DepartmentRotations","LA_Preceptors","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaVideoDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Retrieves curricula video grid data with field mapping similar to GetPFCurriculaDetails but specifically for video-based curricula records.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 23+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFCurriculaVideoReportInfo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":311,"tablesReferenced":["DH_DepartmentRotations","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFCurriculaVideoReportInfo"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates curricula video report data with aggregated completion statistics for the video curricula report printout.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 24+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFDegree","schema":"dbo","parameters":[],"lineCount":223,"tablesReferenced":["SEC_City","SEC_Countries","SEC_Degrees","SEC_MedSchools","SEC_States","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFDegree"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves comprehensive degree information for a user including medical school, undergraduate, graduate, and other degree details from SEC_Users, SEC_UsersExt, and SEC_MedSchools with extensive field mapping.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 10+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetPFDeleteAllByDocID","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentUserId","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FlagDiff","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":44,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFDeleteAllByDocID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Checks for multiple documents associated with a document ID and returns details for the bulk deletion confirmation view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFDeletedDocsforGenDocumentation","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":23,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFDeletedDocsforGenDocumentation"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves soft-deleted general documentation records for the recycle bin view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetPFDeletedDocumentDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FileType","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":22,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQualityImprovementProjects"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves soft-deleted portfolio document details for the recycle bin view, showing deleted records across document types.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"high"},{"name":"GetPFDepartmentReport","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DateOption","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ReportStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ReportEndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@SELECTedSubjectID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ReportFormat","dataType":"ShortText","direction":"IN","defaultValue":"''"}],"lineCount":1301,"tablesReferenced":["DH_ConferenceSchedulePresenters","DH_ConferenceSchedules","DH_ConferenceUserAttendance","PF_ACGMEDocumentSubjectCategories","PF_DocumentCreditSubject","PF_UserDocuments","SEC_Users","Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":true,"nolockCount":1,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFDepartmentReport"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Very large (72K chars) procedure that generates comprehensive department-level portfolio reports by aggregating document counts, completion rates, and scores across all portfolio categories (scholarly activities, certificates, exams, training, etc.) for all users in a department, using WHILE-loop iteration over users and document types.","businessPurpose":"Generates the comprehensive department portfolio report used by program directors to review all trainees' portfolio completion status across every document category. This is one of the most-used reports for program oversight and accreditation readiness assessment.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 50+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"GetPFDepartmentReport_TB","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DateOption","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ReportStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ReportEndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@SELECTedSubjectID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ReportFormat","dataType":"ShortText","direction":"IN","defaultValue":"''"}],"lineCount":682,"tablesReferenced":["PF_ACGMEDocumentSubjectCategories","PF_DocumentCreditSubject","PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Variant of GetPFDepartmentReport (34K chars) that generates department portfolio report data in a tabular format optimized for the report grid view, using WHILE-loop iteration.","businessPurpose":"Generates the comprehensive department portfolio report used by program directors to review all trainees' portfolio completion status across every document category. This is one of the most-used reports for program oversight and accreditation readiness assessment.","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 21+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetPFDocSettLastUpdatedInfo","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":35,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFDocSettLastUpdatedInfo"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the last updated timestamp and user information for portfolio department settings, displaying when settings were last modified.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFDocumentAccessLevel","schema":"dbo","parameters":[{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":31,"tablesReferenced":["PF_DocumentAccessLevel","SEC_DepartmentInstitution"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetPFDocumentAccessLevel","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the access level configuration for portfolio documents based on archive flag status, determining which users can view specific document types.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"high"},{"name":"GetPFDocumentDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FileType","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":2238,"tablesReferenced":["DH_ConferenceSchedulePresenters","DH_ConferenceSchedules","DH_ConferenceUserAttendance","LA_Preceptors","PF_DocumentCreditSubject","PF_UserDocuments","PF_UserSpecificSubject","SEC_Roles","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetLinkedDepartmentList","GetRowValuesToString","spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFDocumentDetails","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Extremely large (207K chars) master document retrieval procedure that handles fetching portfolio document details across all document types (certificates, curricula, exams, training agreements, general docs, etc.) using extensive dynamic SQL and conditional branching based on document type parameters, with complex JOINs across PF_UserDocuments and dozens of related tables.","businessPurpose":"Core document retrieval engine for the entire Portfolio module. Every document view, edit, and report operation ultimately depends on this procedure to fetch the appropriate document fields based on document type. Its reliability and performance directly impact the user experience across all portfolio sections.","optimizationRecommendations":["This procedure exceeds 100K characters and should be decomposed into smaller, focused sub-procedures for maintainability and testability.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 359+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"GetPFDocumentDetailsByDocID","schema":"dbo","parameters":[{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SessionUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":210,"tablesReferenced":["CME_EventCredits","DH_ConferenceSchedules","PF_DocumentAccessLevel","PF_DocumentCreditSubject","PF_Subjects","PF_UserDocuments","PF_UserSpecificSubject","SEC_States","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["GetUserTitleByUserID","spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFDocumentDetailsByDocID"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed portfolio document information by document ID using dynamic SQL to handle varying document types, returning full field details for the document view/edit form across PF_UserDocuments and related tables.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 20+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"high"},{"name":"GetPFDocumentDetailsByDocID_Edit","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":115,"tablesReferenced":["PF_DocumentAccessLevel","PF_DocumentCreditSubject","PF_Subjects","PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves portfolio document details by document ID formatted specifically for the edit form, returning editable field values using dynamic SQL for document type variations.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"high"},{"name":"GetPFDocumentFilePath","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":18,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFDocumentFilePath"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves the physical file path for a portfolio document based on its document ID, used for document download and file access operations.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"GetPFDocumentIDDetails","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":16,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves basic document ID details for a portfolio document record.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"high"},{"name":"GetPFDocumentSettings","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":78,"tablesReferenced":["PF_ACGMEDocumentSubjectCategories","PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFDocumentSettings"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves portfolio department document settings configuration including credit subject definitions, level mappings, and display preferences using dynamic SQL for flexible result formatting.","businessPurpose":"Manages the department-level configuration for scholarly activities document settings, controlling which credit subjects, PGY levels, and document types are available in each department's portfolio configuration.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"high"},{"name":"GetPFDocumentSettMaxPgyByID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":135,"tablesReferenced":["SEC_Departments","SEC_Programs","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetMaxPGYforDepartment"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetPFDocumentSettMaxPgyByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the maximum PGY (Post-Graduate Year) level settings for department document configuration, returning level thresholds and subject mappings for the document settings editor.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetPFDocumentsForBinaryConvertion","schema":"dbo","parameters":[],"lineCount":40,"tablesReferenced":["PF_AffiliateAgreement","PF_AffiliateAgreementDocument","PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves portfolio document records that have binary data stored inline for conversion to file-based storage, used in data migration operations.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"high"},{"name":"GetPFGeneralDocumentation","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":95,"tablesReferenced":["PF_UserDocuments","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFGeneralDocumentation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves general documentation grid data for a user's portfolio, returning document records with titles, descriptions, dates, and file information.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFGeneralDocumentationByID","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":59,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFGeneralDocumentationByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed general documentation record by ID for the edit form, including document title, description, file path, and upload metadata.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFLearningAppraisalDocuments","schema":"dbo","parameters":[{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":58,"tablesReferenced":["PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFLearningAppraisalDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves documents associated with a learning appraisal record for displaying linked evidence files.","businessPurpose":"Supports the learning appraisal workflow, enabling structured evaluation of trainee learning plans through assessor and assessee review cycles.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFLearningAssignmentByID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":141,"tablesReferenced":["LA_AssignmentComments","LA_AssignmentUsers","LA_LearningAssignments","LA_Literature","LA_UserDocuments","PF_UserDocuments","QUIZ_Assignment","QUIZ_AssignmentUsers","QUIZ_Template","SEC_Departments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningAssignmentByID"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed learning assignment record by ID for the edit form, including assignment details, module reference, completion status, and evaluator information.","businessPurpose":"Manages learning module assignments in the portfolio, tracking which educational modules have been assigned to trainees and their completion status.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 10+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"medium"},{"name":"GetPFLearningAssignments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":63,"tablesReferenced":["LA_AssignmentUsers","LA_LearningAssignments","LA_Literature","QUIZ_Assignment","QUIZ_AssignmentUsers","QUIZ_Template","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningAssignments","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the learning assignments grid data for a user's portfolio, returning assignment records with completion status, due dates, and evaluator details.","businessPurpose":"Manages learning module assignments in the portfolio, tracking which educational modules have been assigned to trainees and their completion status.","optimizationRecommendations":["Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetPFLearningModuleDescriptionByID","schema":"dbo","parameters":[],"lineCount":34,"tablesReferenced":["LA_LearningAssignments","LA_Literature","LA_LiteratureData","QUIZ_Template"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningModuleDescriptionByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the description for a selected learning module by ID, used to display module details in the learning assignment form.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFLearningModuleList","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningModuleList"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of available learning modules for the dropdown selector in the learning assignment form.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetPFLearningTask","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":70,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningTask","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves learning task grid data for the learning appraisal section using dynamic SQL for flexible sorting and filtering.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"medium"},{"name":"GetPFLearningTaskByID","schema":"dbo","parameters":[{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":97,"tablesReferenced":["PF_LearningTaskAssesseeReviewComments","PF_LearningTaskAssessorReviewComments","PF_LearningTasks","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFLearningTaskByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed learning task record by ID for the edit form, including task details, goals, completion criteria, and review status.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"GetPFLicenses","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":92,"tablesReferenced":["SEC_States","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFLicenses"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves license information for a user including state medical licenses, DEA registration, and other professional licenses from SEC_Users and related tables.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFMoonLightingHistory","schema":"dbo","parameters":[],"lineCount":69,"tablesReferenced":["SEC_UserMoonLightingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFMoonLightingHistory","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves moonlighting history records for a user's portfolio credentialing documentation.","businessPurpose":"Tracks moonlighting (external employment) activities for residents/fellows in the portfolio, which requires program director approval and is subject to duty hour regulations.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFMoonLightingHistoryByID","schema":"dbo","parameters":[{"name":"@UserMoonLightingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":64,"tablesReferenced":["SEC_UserMoonLightingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFMoonLightingHistoryByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed moonlighting history record by ID for the edit form.","businessPurpose":"Tracks moonlighting (external employment) activities for residents/fellows in the portfolio, which requires program director approval and is subject to duty hour regulations.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFNValues","schema":"dbo","parameters":[{"name":"@SessionID","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":206,"tablesReferenced":["EVAL_AnswerTypes","EVAL_Evaluations","EVAL_Questions","EVAL_QuestionsCategories","EVAL_TemplateQuestion","EVAL_Templates","PF_Operations","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFNValues"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves N-values (sample size statistics) for portfolio evaluation metrics by aggregating evaluation counts across document types and user groups using WHILE-loop iteration.","businessPurpose":"Provides N-value (sample size) statistics for portfolio evaluation metrics, used in reports to indicate the statistical significance of evaluation scores.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 10+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFPaperBasedEvaluationByID","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":57,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPaperBasedEvaluationByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed paper-based evaluation record by ID for the edit form.","businessPurpose":"Manages paper-based evaluation records in the portfolio, supporting institutions that still use paper forms for certain evaluation types alongside the electronic system.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFPatientLogCompletionForReport","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedDepartment","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Gender","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@SelectedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":[],"sprocsCalledFromBody":["GeneratePatientLogDiagnosisReport"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFPatientLogCompletionForReport"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Calculates patient log completion metrics for the portfolio summary report, computing completion percentages against required log counts.","businessPurpose":"Generates data for portfolio reports and visualizations, supporting program oversight and accreditation documentation requirements.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFPersonalStatements","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchieved","dataType":"VeryShortText","direction":"IN","defaultValue":"NULL"},{"name":"@DeleteFlag","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":62,"tablesReferenced":["PF_PersonalStatements"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPersonalStatements","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves personal learning objectives and goals grid data using dynamic SQL for flexible sorting, returning statement records with academic year, review status, and assessor information.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited."],"migrationRelevance":"medium"},{"name":"GetPFPersonalStatementsByID","schema":"dbo","parameters":[{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":119,"tablesReferenced":["PF_PersonalStatements","PF_PersonalStatementsAssesseeReviewComments","PF_PersonalStatementsAssessorReviewComments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPersonalStatementsByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed personal learning statement record by ID for the edit form, including statement text, academic year, reviewer assignments, and approval status.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFPolicyDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"- 1"}],"lineCount":397,"tablesReferenced":["DH_DepartmentRotations","LA_Preceptors","PF_UserDocuments","PF_UserReviews","SEC_DepartmentInstitution","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFPolicyDetails","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Retrieves policy documentation grid data for the portfolio policies and documentation section, returning policy records with titles, effective dates, categories, and compliance status across multiple document types.","businessPurpose":"Manages policy documentation in the portfolio, providing access to institutional policies and procedures that trainees must acknowledge and comply with.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 23+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFPreceptorNotes","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":94,"tablesReferenced":["PF_UserDocuments","SEC_Departments","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPreceptorNotes"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves preceptor notes for a user's portfolio, returning note records with preceptor name, date, content, and associated rotation/clinical context.","businessPurpose":"Manages preceptor notes in the portfolio, enabling clinical preceptors to document trainee performance observations and feedback from clinical rotations.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFPreviousTrainingHistory","schema":"dbo","parameters":[],"lineCount":64,"tablesReferenced":["SEC_Programs","SEC_UserTrainingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPreviousTrainingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves previous training history records for a user's portfolio credentialing documentation section.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFPreviousTrainingHistoryByID","schema":"dbo","parameters":[{"name":"@UserTrainingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":62,"tablesReferenced":["SEC_UserTrainingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFPreviousTrainingHistoryByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed previous training history record by ID for the edit form.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFProcedureCompletionForReport","schema":"dbo","parameters":[{"name":"@RequestedDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":495,"tablesReferenced":["PRC_Procedures","PRC_ProceduresCertificationStatus","PRC_ProceduresCertificationStatusTypes","PRC_ProceduresSubmitted","SEC_UserCertifications","SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":true,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFProcedureCompletionForReport"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Large (30K chars) procedure that calculates procedure completion metrics for the MyPortfolio summary report using a CURSOR to iterate over users within a department, computing individual completion percentages against required procedure counts for credentialing documentation.","businessPurpose":"Generates data for portfolio reports and visualizations, supporting program oversight and accreditation documentation requirements.","optimizationRecommendations":["Replace the CURSOR-based row-by-row iteration with a set-based approach using CTEs, window functions, or CROSS APPLY to improve performance and reduce lock duration.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 42+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetPFProgramTrainingHistory","schema":"dbo","parameters":[],"lineCount":29,"tablesReferenced":[],"sprocsCalledFromBody":["spLOG_ErrorHandling","usp_GetUserProgramHistory"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFProgramTrainingHistory","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves program training history records for a user's credentialing documentation.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFProgramTrainingHistoryByID","schema":"dbo","parameters":[{"name":"@UserTrainingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":86,"tablesReferenced":["SEC_Programs","SEC_ResidencyTypes","SEC_UserProgramHistorySettings","SEC_UserProgramLog","SEC_UserTrainingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFProgramTrainingHistoryByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed program training history record by ID for the edit form, including program details, dates, institution, and completion status.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetPFQuizAssignmentByID","schema":"dbo","parameters":[],"lineCount":75,"tablesReferenced":["DH_DepartmentRotations","QUIZ_Assignment","QUIZ_AssignmentUsers","QUIZ_Template","SEC_Departments","SEC_TimeZones"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFQuizAssignmentByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed quiz assignment record by ID for the edit form, including quiz details, completion status, and score information.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFQuizAssignments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":109,"tablesReferenced":["DH_DepartmentRotations","QUIZ_Assignment","QUIZ_AssignmentUsers","QUIZ_Template","SEC_TimeZones","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFQuizAssignments"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves quiz assignment grid data for the portfolio appraisals and goals section, returning quiz records with completion status and scores.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFRecordOfRotations","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":244,"tablesReferenced":["DH_AmionSchedule","DH_AmionScheduleRotationAssignments","DH_DepartmentRotations","DH_SyncAMIONRotations","DH_SyncAMIONUsers","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFRecordOfRotations"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves the record of rotations grid data for credentialing documentation, aggregating rotation assignments, dates, and completion status using WHILE-loop iteration.","businessPurpose":"Manages rotation-related data in the portfolio, tracking clinical rotation assignments, schedules, and completion status.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review query execution plan for missing index recommendations on the multi-table JOINs."],"migrationRelevance":"medium"},{"name":"GetPFSearchResults","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AllWordsValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ExactWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AnyWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NoneWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CmbAllWordsValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbExactWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbAnyWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbNoneWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@LastUpdatedValue","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":1502,"tablesReferenced":["LA_Preceptors","PF_Subjects","SEC_DepartmentInstitution"],"sprocsCalledFromBody":["GetQualityImprovementProjects"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFSearchResults"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (60K chars) advanced search procedure that retrieves portfolio search results using LIKE-based keyword matching across multiple document types and fields, with dynamic SQL for flexible filtering, sorting, and pagination using WHILE-loop iteration over result pages.","businessPurpose":"Powers the portfolio advanced search feature, enabling users to find specific documents across their entire portfolio collection using keyword searches. Critical for users with large portfolios who need to quickly locate specific evaluations, certificates, or documentation.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 25+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetPFSearchResultsByFullTextSearch","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SelectedDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AllWordsValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ExactWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AnyWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NoneWordValue","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CmbAllWordsValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbExactWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbAnyWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CmbNoneWordValue","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@LastUpdatedValue","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":1352,"tablesReferenced":["LA_Preceptors","PF_Subjects","PF_UserDocuments","SEC_DepartmentInstitution","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["GetPFSearchResults","GetQualityImprovementProjects","GetRowValuesToString"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFSearchResultsByFullTextSearch"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (59K chars) full-text search procedure that retrieves portfolio search results using SQL Server Full-Text Search indexes across multiple document types, with dynamic SQL for result ranking, filtering, and pagination using WHILE-loop iteration.","businessPurpose":"Powers the portfolio advanced search feature, enabling users to find specific documents across their entire portfolio collection using keyword searches. Critical for users with large portfolios who need to quickly locate specific evaluations, certificates, or documentation.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 28+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"GetPFSpecialMedActivityHistory","schema":"dbo","parameters":[],"lineCount":30,"tablesReferenced":["SEC_UserSpecialMedActivityHistory"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFSpecialMedActivityHistory","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves special medical activity history records for a user's portfolio.","businessPurpose":"Documents special medical activities and experiences in the portfolio, tracking unique clinical or research experiences outside the standard rotation schedule.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFSpecialMedActivityHistoryByID","schema":"dbo","parameters":[{"name":"@UserSpecialMedActivityHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":62,"tablesReferenced":["SEC_UserSpecialMedActivityHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFSpecialMedActivityHistoryByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed special medical activity record by ID for the edit form.","businessPurpose":"Documents special medical activities and experiences in the portfolio, tracking unique clinical or research experiences outside the standard rotation schedule.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFStipend","schema":"dbo","parameters":[],"lineCount":46,"tablesReferenced":["SEC_UserStipendHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFStipend","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves stipend history records for a user's portfolio compensation section.","businessPurpose":"Manages stipend records in the portfolio, tracking resident/fellow compensation amounts, schedules, and approval status for financial administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFStipendByID","schema":"dbo","parameters":[{"name":"@UserStipendHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":70,"tablesReferenced":["SEC_UserStipendHistory","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFStipendByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed stipend record by ID for the edit form, including amount, dates, and approval status.","businessPurpose":"Manages stipend records in the portfolio, tracking resident/fellow compensation amounts, schedules, and approval status for financial administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFSubjectAverages","schema":"dbo","parameters":[{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":81,"tablesReferenced":["PF_DocumentCreditSubject","PF_UserDocuments","PF_UserSpecificSubject"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFSubjectAverages","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves subject-level score averages for portfolio bar chart display, aggregating evaluation scores by subject across the user's document collection.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFSubjectAveragesForAOTUsers","schema":"dbo","parameters":[{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UserCurrentYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":83,"tablesReferenced":["PF_DocumentCreditSubject","PF_UserDocuments","PF_UserSpecificSubject"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFSubjectAveragesForAOTUsers"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves subject-level score averages specifically for AOT (Allied and Other Trained) user types, using a modified aggregation query tailored to their document structure.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFSupplimentalByID","schema":"dbo","parameters":[{"name":"@UserSupplementalPaymentHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":51,"tablesReferenced":["SEC_UserSupplementalPaymentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFSupplimentalByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed supplemental payment record by ID for the edit form.","businessPurpose":"Manages supplemental payment records in the portfolio for tracking additional compensation beyond base stipend.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFSupplimentalDetails","schema":"dbo","parameters":[],"lineCount":39,"tablesReferenced":["SEC_UserSupplementalPaymentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFSupplimentalDetails","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves supplemental payment records for a user's portfolio compensation section.","businessPurpose":"Manages supplemental payment records in the portfolio for tracking additional compensation beyond base stipend.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFTrainingAgreement","schema":"dbo","parameters":[{"name":"@UserTrainingAgreementID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":69,"tablesReferenced":["SEC_UserTrainingAgreement","SEC_UserTrainingAgreementDocument","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingAgreement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves training agreement grid data for a user's portfolio, returning agreement records with dates, terms, and signature status.","businessPurpose":"Manages training agreement records in the portfolio, documenting the formal agreements between trainees and training programs including terms, signatures, and compliance requirements.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFTrainingGapHistory","schema":"dbo","parameters":[],"lineCount":48,"tablesReferenced":["SEC_TrainingGapType","SEC_UserTrainingGapHistory","Sec_EmployerNames"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingGapHistory","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves training gap/leave of absence records for a user's portfolio.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFTrainingGapHistoryByID","schema":"dbo","parameters":[{"name":"@UserTrainingGapHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":58,"tablesReferenced":["SEC_TrainingGapType","SEC_UserTrainingGapHistory","Sec_EmployerNames"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingGapHistoryByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed training gap record by ID for the edit form, including gap type, dates, reason, and approval status.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFTrainingHistory","schema":"dbo","parameters":[],"lineCount":33,"tablesReferenced":["SEC_UserTrainingCommentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingHistory","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves training history records for a user's portfolio credentialing documentation section.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFTrainingHistoryByID","schema":"dbo","parameters":[{"name":"@UserTrainingCommentHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_UserTrainingCommentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFTrainingHistoryByID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed training history record by ID including institution, specialty, dates, and completion comments.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetPFUniformLockersByID","schema":"dbo","parameters":[],"lineCount":35,"tablesReferenced":["SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFUniformLockersByID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves uniform and locker assignment details for a user.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFUserDocuments","schema":"dbo","parameters":[],"lineCount":30,"tablesReferenced":["PF_UserDocuments","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFUserDocuments"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves user documents list for the portfolio document view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFUserMilitaryByID","schema":"dbo","parameters":[],"lineCount":40,"tablesReferenced":["SEC_MilitaryCampaign","SEC_MilitaryServiceMedal","SEC_MilitaryStatusDisability","SEC_MilitaryVitenamStatus","SEC_UserMilitary"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFUserMilitaryByID","UserManager.cs.GetPFUserMilitaryByUserID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves military service details for a user by user ID.","businessPurpose":"Manages military service information in the user profile, tracking rank, service branch, and military-related data for military-affiliated training programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFUserProgramHistoryByID","schema":"dbo","parameters":[],"lineCount":84,"tablesReferenced":["SEC_Departments","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFUserProgramHistoryByID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed program history information for a user including program name, dates, level progression, and training status.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetPFUserTaxWithholdingsBankByID","schema":"dbo","parameters":[],"lineCount":48,"tablesReferenced":["SEC_BankAccType","SEC_DCFICA","SEC_FederalTaxMaritalStatus","SEC_StateTaxMaritalStatus","SEC_UsersTax"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetPFUserTaxWithholdingsBankByID"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves user tax withholding and bank information from SEC_UsersTaxWithholdingsBank for payroll integration.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetPostGradInfoforMyPortfolioModule","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":84,"tablesReferenced":["SEC_City","SEC_Countries","SEC_Military","SEC_PostGraduation","SEC_Specialty"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPostGradInfoforMyPortfolioModule"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves post-graduation information for the MyPortfolio module, returning fellowship/job placement data for graduated users.","businessPurpose":"Supports post-graduation tracking in the portfolio, documenting fellowship placements, job positions, and career outcomes for program reporting and alumni tracking.","optimizationRecommendations":["This procedure has 9+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"low"},{"name":"GetPostGradMyPGenDemoRpt","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":71,"tablesReferenced":["SEC_City","SEC_Countries","SEC_Military","SEC_PostGraduation","SEC_Specialty"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPostGradMyPGenDemoRpt"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves post-graduation general demographic report data for graduated users.","businessPurpose":"Supports post-graduation tracking in the portfolio, documenting fellowship placements, job positions, and career outcomes for program reporting and alumni tracking.","optimizationRecommendations":["This procedure has 9+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"low"},{"name":"GetProgramRequirementDetails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"Largenumber","direction":"IN","defaultValue":null}],"lineCount":26,"tablesReferenced":["PF_ProgramRequirements"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetProgramRequirementDetails"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves program requirement definitions for the program configuration view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetPRPDOCDetailsUpd","schema":"dbo","parameters":[],"lineCount":71,"tablesReferenced":["PF_UserSpecificSubject","SEC_Users"],"sprocsCalledFromBody":["AddCreditSubjectSettingsNewUser"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Large (61K chars) procedure that retrieves publication, research, and presentation document details with extensive conditional logic and WHILE-loop iteration for building comprehensive PRP documentation views.","businessPurpose":"Supports the publication, research, and presentations documentation section of the portfolio, which tracks scholarly activity required for ACGME competency assessment and program accreditation.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetQIPDetailsForSWOTandPDSA","schema":"dbo","parameters":[],"lineCount":35,"tablesReferenced":["APE_TakeAction"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQIPDetailsForSWOTandPDSA"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves SWOT analysis and PDSA cycle detail records for a specific Quality Improvement Project.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetQIPDocumentByDocumentID","schema":"dbo","parameters":[{"name":"@QIProjectnDocumentIDs","dataType":"LargeText","direction":"IN","defaultValue":"'0'"},{"name":"@QIProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":31,"tablesReferenced":["PF_QIProjectDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQIPDocumentByDocumentID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves a specific QIP document record by document ID from PF_QIProjectDocument.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetQualityImprovementProjects","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FileType","dataType":"VerySmallNumber","direction":"IN","defaultValue":"1"},{"name":"@ProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SEARCHWORD","dataType":"ShortText","direction":"IN","defaultValue":"'' --added by aparna for ISSUE: MyPortfolio > Search 10/01/2018"},{"name":"@IsForAPI","dataType":"TINYINT","direction":"IN","defaultValue":"0  /*1=For API 0 for normal Execution*/"},{"name":"@SelectedUserID","dataType":"BIGINT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@AcademicYear","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@UserPGYLevel","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this Column for API*/"},{"name":"@PGYStartDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PGYEndDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodStartDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodEndDate","dataType":"DATETIME","direction":"IN","defaultValue":"NULL"},{"name":"@PeriodNo","dataType":"INT","direction":"IN","defaultValue":"0  /*Using this column for API*/"},{"name":"@StatusID","dataType":"INT","direction":"IN","defaultValue":"0"}],"lineCount":980,"tablesReferenced":["APE_FacultyTopicCategories","APE_Main","APE_ProgramStatus","APE_Projects","APE_ProjectsLeaders","APE_ProjectsParticipants","APE_QIProjectLeaders","APE_QIProjectParticipants","APE_QIProjects","APE_SubSectionTabs","APE_SubSections","APE_TakeAction","DH_CCTopicCategories","MYEVAL_PerformanceQIPProjects","PF_QIProjectDocument","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["GetRowValuesToString"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQualityImprovementProjects"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Massive (71K chars) procedure that retrieves Quality Improvement Project data with extensive dynamic SQL-based filtering, sorting, and pagination across APE_Projects, participants, leaders, and related tables, supporting complex search criteria and role-based access filtering using WHILE-loop iteration.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 71+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetQualityImprovementProjectsForMainPage","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FileType","dataType":"VerySmallNumber","direction":"IN","defaultValue":"1"},{"name":"@ProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SEARCHWORD","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@StartIndex","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":1301,"tablesReferenced":["APE_FacultyTopicCategories","APE_Main","APE_ProgramStatus","APE_Projects","APE_ProjectsLeaders","APE_ProjectsParticipants","APE_QIProjectLeaders","APE_QIProjectParticipants","APE_QIProjects","APE_SubSectionTabs","APE_SubSections","APE_TakeAction","DH_CCTopicCategories","PF_QIProjectDocument","SEC_Departments","SEC_Users"],"sprocsCalledFromBody":["GetRowValuesToString"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQualityImprovementProjectsForMainPage"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Variant of GetQualityImprovementProjects optimized for the main QIP listing page (70K chars), with similar dynamic SQL-based filtering and pagination but streamlined result set for the overview grid display.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 74+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"GetRoleIDByUserID","schema":"dbo","parameters":[],"lineCount":20,"tablesReferenced":["SEC_UserRoles"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetRoleIDByUserID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the role ID for a user based on their user ID from SEC_UserRoles.","businessPurpose":"Supports role-based access control in the portfolio module, determining user permissions for viewing and editing portfolio data.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetRolePreceptorIDs","schema":"dbo","parameters":[],"lineCount":25,"tablesReferenced":["LA_Preceptors","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetRolePreceptorIDs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves both the role ID and preceptor ID for a user, used to determine the user's evaluation permissions.","businessPurpose":"Manages preceptor notes in the portfolio, enabling clinical preceptors to document trainee performance observations and feedback from clinical rotations.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetSpecialtyList","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":42,"tablesReferenced":["SEC_Departments","SEC_Specialty"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSpecialtyList","MyEvaluations.Business.Security/LookUpTables.cs","UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of medical specialties for dropdown population.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetSpecialtyNameBySpecialtyCode","schema":"dbo","parameters":[],"lineCount":19,"tablesReferenced":["SEC_Specialty"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetSpecialtyNameBySpecialtyCode"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves a specialty name by its specialty code for display purposes.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetSpecificUsersListforPP","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserScope","dataType":"SmallNumber","direction":"IN","defaultValue":null}],"lineCount":97,"tablesReferenced":["SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSpecificUsersListforPP"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves a filtered list of ATT, OT, and Nurse user types for the portfolio picker, using WHILE-loop iteration to build the user list.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"low"},{"name":"GetSurveyPerformance","schema":"dbo","parameters":[],"lineCount":44,"tablesReferenced":["PF_Concern","PF_SurveyCategory","PF_SurveyPerformance","PF_SurveyPerformanceDocument","PF_SurveySource"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveyPerformance"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves survey performance grid data for a user's portfolio.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetSurveyPerformanceByID","schema":"dbo","parameters":[{"name":"@SurveyPerformanceID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":37,"tablesReferenced":["PF_SurveyPerformance","PF_SurveyPerformanceDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveyPerformanceInfoByID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed survey performance record by ID for the edit form.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetSurveyPerformanceDocumentByDocumentID","schema":"dbo","parameters":[{"name":"@SurveyPerformanceDocumentIDs","dataType":"LargeText","direction":"IN","defaultValue":"'0'"},{"name":"@SurveyPerformanceID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":37,"tablesReferenced":["PF_SurveyPerformanceDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveyDocumentByDocumentID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves a document attachment associated with a survey performance record.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetSurveyPerformanceHistory","schema":"dbo","parameters":[],"lineCount":45,"tablesReferenced":["PF_SurveyCategory","PF_SurveyPerformanceHistory","PF_SurveySource","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveuPerformanceHistoryDetails"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves the history of survey performance entries for a user.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetSurveySource","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":52,"tablesReferenced":["PF_SurveyCategory","PF_SurveySource","SEC_DepartmentInstitution","SEC_Departments","SEC_InstitutionUsers","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveySource"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Retrieves survey source definitions for the survey dropdown selectors.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetTrainingGapType","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["SEC_TrainingGapType"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetTrainingGapType","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves training gap type definitions for the dropdown selector in the training gap form.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetUniformDetailsByUserID","schema":"dbo","parameters":[],"lineCount":44,"tablesReferenced":["SEC_UniformType","SEC_UserUniformInventory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetUniformDetailsByUserID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves uniform inventory records for a user's portfolio.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetUniformInventoryInfoByID","schema":"dbo","parameters":[{"name":"@UserUniformInventoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":54,"tablesReferenced":["SEC_UniformType","SEC_UserUniformInventory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetUniformInventoryInfoByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed uniform inventory record by ID for the edit form.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetUniformType","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["SEC_UniformType"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetUniformType","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of uniform types for the dropdown selector.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetUserContractByID","schema":"dbo","parameters":[{"name":"@UserContractID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":77,"tablesReferenced":["PF_UserDocuments","SEC_UserContract","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetUserContractByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed user contract record by ID for the edit form.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetUserContractDetails","schema":"dbo","parameters":[],"lineCount":133,"tablesReferenced":["PF_UserDocuments","SEC_UserContract"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetUserContractDetails","MyEvaluations.Business.Security/FieldsLookupManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves user contract grid data for the portfolio contracts section.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"GetUserContractDetailsByID","schema":"dbo","parameters":[{"name":"@UserContractID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":87,"tablesReferenced":["OBC_DocumentUploadHistory","PF_UserDocuments","SEC_UserContract","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetUserContractDetailsByID","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves detailed user contract information by ID including terms, dates, salary, and renewal status.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"GetUserExpiredContractEmailNoticeInformation","schema":"dbo","parameters":[],"lineCount":191,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserExpiredContractEmailNoticeInformation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates email notifications for expired user contracts by assembling HTML templates with contract expiration details using WHILE-loop iteration over expired contract records.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"GetUserExpiringContractEmailNoticeInformation","schema":"dbo","parameters":[],"lineCount":290,"tablesReferenced":["SEC_UserContract"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserExpiringContractEmailNoticeInformation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Generates email notifications for soon-to-expire user contracts by assembling HTML templates with contract details and expiration countdown information using WHILE-loop iteration.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Review query execution plan for missing index recommendations on the multi-table JOINs.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"GetUserImageFileName","schema":"dbo","parameters":[],"lineCount":20,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetUserImageFileName"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user's profile image file name for display in the portfolio photo section.","businessPurpose":"Manages user profile photo storage and retrieval in the portfolio module.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetUserImportMailTemplates","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ImageType","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":56,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":["GetUserEmailInformation"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetNewUserEmailInformation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves email template data for user import notification emails, passing data from user import staging records to generate notification content using WHILE-loop iteration.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain."],"migrationRelevance":"high"},{"name":"GetUserInfo","schema":"dbo","parameters":[],"lineCount":29,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves basic user profile information including name, email, and department for display in portfolio headers.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"GetUserProgramList","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":21,"tablesReferenced":["SEC_Programs"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetUserProgramList","FieldsLookupManager.cs.GetProgramList"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the list of programs from SEC_Programs for the program dropdown selector.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetUserTitleByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetUserTitleByUserID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user's title and credential information by user ID for display in portfolio headers and reports.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"GetUserTrainingStartDate","schema":"dbo","parameters":[],"lineCount":22,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserTrainingStartDate"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user's training start date from their program history.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"medium"},{"name":"GetUserTypeByID","schema":"dbo","parameters":[],"lineCount":24,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["LookUpTables.cs.GetUserTypeByID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves the user type ID for a user based on their user ID.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"GetUserTypeDetailsForUserImporting","schema":"dbo","parameters":[],"lineCount":21,"tablesReferenced":["SEC_UserTypes"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetUserTypeDetailsForUserImporting"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves user type definitions for the user import module's type mapping dropdown.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"high"},{"name":"ImportACGMEDocumentDetails","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@IsFromMypImport","dataType":"verySmallNumber","direction":"IN","defaultValue":"1"}],"lineCount":432,"tablesReferenced":["PF_ACGMEDocumentSubjectCategories","PF_ACGMEImportFailureDocuments","PF_DocumentCreditSubject","PF_DomainLegend","PF_UserDocuments","SEC_Departments","SEC_UserTitle","SEC_Users"],"sprocsCalledFromBody":["GetSummaryPerformanceDateRangesByUserGaps","UpdateAPEScholarlyActivityInfo"],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.ImportACGMEDocumentDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Imports ACGME document records from a staging/import area into PF_UserDocuments, mapping external ACGME data fields to portfolio document attributes with WHILE-loop iteration over import records.","businessPurpose":"Supports the ACGME data integration workflow, enabling institutions to import competency evaluation data from the ACGME reporting system into MyEvaluations for consolidated tracking and reporting.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","This procedure has 14+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"InsertAccessHistory","schema":"dbo","parameters":[{"name":"@SelectedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@TempGuid","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":88,"tablesReferenced":["SEC_AccessHistory","SEC_AccessHistoryTemp"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPFProgramTrainingHistory","UserManager.cs.DeletePFProgramTrainingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts access history records from a temporary table into the main access history table for audit trail tracking of portfolio document access.","businessPurpose":"Tracks document access history for audit trail purposes, recording who viewed or modified portfolio documents and when.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"InsertAccessHistoryForMultipleAUD","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":50,"tablesReferenced":["SEC_AccessHistoryForMultipleAUD","SEC_AccessHistoryTemp"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddPFProgramTrainingHistory","UserManager.cs.DeletePFProgramTrainingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts multiple add/update/delete access history records from a temporary table into the main history table for batch audit trail operations.","businessPurpose":"Tracks document access history for audit trail purposes, recording who viewed or modified portfolio documents and when.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"InsertDepartmentAccrediationDepartment","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DatePartCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DatePartValue","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":100,"tablesReferenced":["PF_AccrediataionEmailAdmin","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertDepartmentAccrediationDepartment"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Manages department-accreditation associations by deleting existing associations and re-inserting the current department list using WHILE-loop iteration, ensuring accreditation-department mapping stays synchronized.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"InsertDepartmentAffiliateDepartment","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@InstituionID","dataType":"SmallNumber","direction":"IN","defaultValue":null}],"lineCount":32,"tablesReferenced":["PF_AffiliateEmailAdmin"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertDepartmentAffiliateDepartment"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Manages department-affiliate agreement associations by deleting existing associations and re-inserting the current department list.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"InsertInstitutionAccrediationAllDepartments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@linkDepartments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DatePartCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DatePartValue","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":158,"tablesReferenced":["PF_AccrediataionEmailAdmin","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertInstitutionAccrediationAllDepartments"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Assigns all departments under an institution to an accreditation record using WHILE-loop iteration, used when an institution-level accreditation applies to all its departments.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"InsertInstitutionAffiliateAllDepartments","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@linkDepartments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DatePartCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DatePartValue","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":158,"tablesReferenced":["PF_AffiliateEmailAdmin","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertDepartmentAffiliateDepartment"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Assigns all departments under an institution to an affiliate agreement using WHILE-loop iteration, used when an institution-level agreement applies to all its departments.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"InsertSchedulerJobHistory","schema":"dbo","parameters":[{"name":"@ScheduledName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LogInfo","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":24,"tablesReferenced":["SCHE_ScheduledJobs","SCHE_ScheduledJobsHistory"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertSchedulerJobHistory","MyEvaluations.Business.Quiz/AssignmentUsersManager.cs","MyEvaluations.Business.Security/UserManager.cs"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Inserts a scheduler job execution history record for tracking scheduled task runs and their outcomes.","businessPurpose":"Supports the background job scheduler infrastructure, logging execution history for scheduled portfolio processing tasks.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"InsertUpdateSurveyCategory","schema":"dbo","parameters":[{"name":"@SurveyCategoryName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SurveyCategoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"}],"lineCount":67,"tablesReferenced":["PF_SurveyCategory"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertUpdateSurveyCategory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts or updates a survey category definition, using conditional logic to either create a new category or modify an existing one.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"InsertUpdateSurveySource","schema":"dbo","parameters":[{"name":"@SurveySourceName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SurveySourceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"}],"lineCount":74,"tablesReferenced":["PF_SurveySource"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertUpdateSurveySource"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Inserts or updates a survey source definition, using conditional logic to either create a new source or modify an existing one.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"MainPulicationResearch","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SectionID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FileType","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Report","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StartIndex","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":467,"tablesReferenced":["DH_ConferenceSchedulePresenters","DH_ConferenceSchedules","DH_ConferenceUserAttendance","PF_DocumentCreditSubject","PF_UserDocuments","PF_UserSpecificSubject","SEC_UserRoles","SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":["GetLinkedDepartmentList","GetRowValuesToString"],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.MainPulicationResearch"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (28K chars) procedure that manages publication and research project records in the portfolio, handling comprehensive field mapping for multiple publication types (journal articles, book chapters, presentations, grants, abstracts) across PF_UserDocuments and related tables with conditional insert/update logic.","businessPurpose":"Manages scholarly activity records (publications, research projects, presentations, grants) in the portfolio, which are tracked for faculty promotion, trainee milestones, and program accreditation metrics.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 48+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"PFDeleteDocumentsEMNBP","schema":"dbo","parameters":[],"lineCount":24,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.PFDeleteDocumentsEMNBP"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Deletes individual document records from the EMN (Encounter, Milestone, Notes) and BP (Business Plan) portfolio sections.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"Proc_GetQIDocs","schema":"dbo","parameters":[],"lineCount":23,"tablesReferenced":["APE_QIProjects","PF_QIProjectDocument","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetQIPDocumentByID"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Retrieves QI (Quality Improvement) document records for the QIP document listing view.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"Proc_Sec_DepartmentQuizScore","schema":"dbo","parameters":[{"name":"@ScoreID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Score","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":35,"tablesReferenced":["Sec_DepartmentQuizScore"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["EvaluationsTemplateManager.cs.GetEwScoreDeptId","MainPageBusiness.cs.SubmitITEScoreForDepartment"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves department-level quiz score statistics for the department quiz performance report.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"RestorePFDocumentDetails","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"}],"lineCount":221,"tablesReferenced":["PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.RestorePFDocumentDetails"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Restores a soft-deleted portfolio document by resetting the IsDeleted flag in PF_UserDocuments and related tables, with audit trail logging for the restore action.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"high"},{"name":"RestorePFNotes","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":40,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.RestorePFNotes"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Restores soft-deleted preceptor notes by resetting the IsDeleted flag in the notes table.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"RestorePFPersonalStatements","schema":"dbo","parameters":[{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"VeryShortText","direction":"IN","defaultValue":"null"}],"lineCount":32,"tablesReferenced":["PF_PersonalStatements"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.RestorePFPersonalStatements"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Restores a soft-deleted personal learning statement by resetting the IsDeleted flag in PF_PersonalStatements.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"SaveQIPForTakeAction","schema":"dbo","parameters":[{"name":"@AreaofConcern","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MonitoringPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ActionPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MeasurementPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@IsDeleted","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@QIPStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ActionWeakness","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ActionlOpportunity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AdminAssignedTo","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ProjectDueDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@hdnPDSA","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FileUpload","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ActionThreat","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@APEGroupID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CategoryName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@QIProjectID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":58,"tablesReferenced":["APE_Main","APE_TakeAction","QIPSubSections"],"sprocsCalledFromBody":[],"crudType":"mixed","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateQIPSWOT"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Saves Quality Improvement Project take-action data including action items, responsible parties, and target dates for PDSA cycle tracking.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"SendDevryMailstoArchivedUsers","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsArchived","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@EncryptText","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":83,"tablesReferenced":["PF_EmailTemplate","SCHE_ApplicationEmailSchedules","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Sends email notifications to archived and unarchived users for DeVry-specific (institution-specific) communication workflows.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"SendPIPReviewNotification","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsInitialReview","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":39,"tablesReferenced":["PF_EmailTemplate","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Sends PIP (Performance Improvement Plan) review notification emails to designated reviewers when a PIP review is due.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"SendRemindersForIncorrectSync","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LARGENUMBER","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LARGENUMBER","direction":"IN","defaultValue":null}],"lineCount":98,"tablesReferenced":["PF_EmailTemplate"],"sprocsCalledFromBody":["GetDepartmentAdminsForIncorrectSync","InsertApplicationEmailSchedules"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Sends reminder emails to department administrators about incorrect data synchronization issues using WHILE-loop iteration over affected departments.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"low"},{"name":"sp_fileDownload","schema":"dbo","parameters":[],"lineCount":19,"tablesReferenced":["PF_AffiliateAgreementDocument"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Retrieves file download information for a portfolio document including file path and content type for the document download handler.","businessPurpose":"Supports document file storage and retrieval operations in the portfolio module.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"SurveyPerformanceDocuments","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SurveyPerformanceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":44,"tablesReferenced":["PF_SurveyPerformanceDocument"],"sprocsCalledFromBody":[],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.AddSurveyPerformanceDocuments"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves documents associated with a survey performance record.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"SurveyPerformanceStatusInfo","schema":"dbo","parameters":[],"lineCount":23,"tablesReferenced":["PF_SurveyPerformance"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.GetSurveyPerformanceInfo"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Retrieves survey performance status information for the survey status display.","businessPurpose":"Manages survey performance records in the portfolio, tracking trainee performance scores from institutional surveys and patient satisfaction measurements.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"TransferPortfolioItems","schema":"dbo","parameters":[{"name":"@OldUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@NewUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsArchiveWhilePromoting","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":111,"tablesReferenced":["PF_DocumentCurricula","PF_LearningTasks","PF_PersonalStatements","PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":[],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Transfers portfolio document items from one user to another using WHILE-loop iteration, updating document ownership across PF_UserDocuments and related tables for user transfer/merge operations.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdateAffilateBinaryData","schema":"dbo","parameters":[{"name":"@AffiliateAgreementID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@file","dataType":"VARBINARY(max)","direction":"IN","defaultValue":null}],"lineCount":16,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Updates binary data content for an affiliate agreement document record.","businessPurpose":"Supports document file storage and retrieval operations in the portfolio module.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"UpdateAPEScholarlyActivityInfo","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":529,"tablesReferenced":["APE_Main","APE_ScholarlyActivity","PF_DocumentCreditSubject","PF_DocumentMappingStructure","PF_UserDocuments","SEC_Users"],"sprocsCalledFromBody":["GetACGMESubjectAndCategories","GetPFDepartmentReport"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Updates APE (Annual Program Evaluation) scholarly activity information by synchronizing publication, research, and presentation data across APE_Projects tables using WHILE-loop iteration.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 16+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"UpdateBinaryData","schema":"dbo","parameters":[{"name":"@AffiliateAgreementID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@file","dataType":"VARBINARY(max)","direction":"IN","defaultValue":null},{"name":"@contentType","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":26,"tablesReferenced":["PF_AffiliateAgreementDocument","PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates binary data content for a portfolio document record, used for document file replacement.","businessPurpose":"Supports document file storage and retrieval operations in the portfolio module.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"UpdateCEMdUserReviewDateById","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"}],"lineCount":69,"tablesReferenced":["PF_UserReviews","SEC_EventDetail","SEC_Events","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateCEMdUserReviewDateById"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates the CE-Md (Continuing Education-Medical) user review date for curricula evaluation records.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdateCitation","schema":"dbo","parameters":[{"name":"@AccreditationCitationID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CitationID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitationTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitationCategoryID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ProgramRequirementUniqueID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@FollowUpPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssignedToUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FinalDueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Notes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CurrentInternalStatus","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DateReviewedAndApproved","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@CurrentACGMEStatus","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AccreditatonNotes","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":52,"tablesReferenced":["PF_AccreditationCitations","PF_AccreditationCitationsHistory"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateCitation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing accreditation citation record with modified citation details, status, and resolution information.","businessPurpose":"Manages accreditation citations within the portfolio module, enabling tracking of regulatory findings, corrective actions, and resolution status for program accreditation compliance.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"UpdateConcern","schema":"dbo","parameters":[{"name":"@SurveyConcernID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConcernNumber","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConcernDetails","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@FollowUpPlan","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssignedToAdmins","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DueDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":38,"tablesReferenced":["PF_Concern","PF_SurveyPerformanceConcernHistory"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateConcern"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates an existing concern record with modified concern details and status.","businessPurpose":"Manages trainee/program concern records in the portfolio module, supporting the documentation of performance issues, remediation plans, and follow-up actions.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"UpdateConferencePFUserDocument","schema":"dbo","parameters":[{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ConferenceDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RequiredCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@OptionalCredit","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsConference","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"OUTPUT","defaultValue":null}],"lineCount":37,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the association between a conference document and a portfolio user document record.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"UpdateCustomFields","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CustomFieldID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":16,"tablesReferenced":["OBC_CustomFields"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["MainPageBusiness.cs.UpdateCustomFields"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Simple update procedure for custom field values in portfolio records.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"UpdateDeleteStatusForAccrediation","schema":"dbo","parameters":[],"lineCount":23,"tablesReferenced":["PF_Accreditation"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateDeleteStatusForAccrediation"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the deletion status flag for accreditation document records.","businessPurpose":"Supports the accreditation management workflow in the portfolio module, enabling institutions to track accreditation status, review dates, citations, and compliance documentation required by accrediting bodies (ACGME, AOA, CODA, etc.).","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"UpdateDocumentDomainName","schema":"dbo","parameters":[{"name":"@CCategoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Name","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":20,"tablesReferenced":["Sec_DocumentDomainForACGME"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateDocumentDomainName"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the name of an ACGME document domain definition.","businessPurpose":"Manages ACGME document domain definitions, configuring which document categories are available for ACGME competency mapping.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"UpdateDuplicateBP","schema":"dbo","parameters":[],"lineCount":115,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Identifies and updates duplicate business plan records in the portfolio, consolidating duplicate entries and updating references.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"UpdateGeneralDemographicsByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SSN","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SSNCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@BirthCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@BirthCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DateOfBirth","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DateOfDeath","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@GenderID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@EthnicityID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@LanguageID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AffiliationInstitutionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@OtherLanguageID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DisabledStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@RosterID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MaritalStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@StatusChangeDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@NPI","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EmployeeID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ScheduleAppID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PIN","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MilitaryID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryRankID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitizenShipID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CitizenshipCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PassportCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@VisaTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@VisaIssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@VisaExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DateUCW8BEN","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DateI9","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DateOathSig","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@UsEntryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EducationCertificationID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@EnrolledStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DeptSubDiv","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InitialSubSpecialityID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EducationCategoryID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@InstitutionCertificatesID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CertificateNotes","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@UserGoodStandingID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StatusID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SourceID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CurrentSubSpecialityID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ERASMatch","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@CertificationStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@AlternateDepartmentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Pager","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CellPhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Phone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AlternatePhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MainEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PermanentEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Defaultemail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Address1","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Address2","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@CountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@HomeAddress1","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@HomeAddress2","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@HomeCity","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@HomeCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@HomePhone","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@HomeStateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@HomeZip","dataType":"Largetext","direction":"IN","defaultValue":null},{"name":"@BirthState","dataType":"ShortText","direction":"IN","defaultValue":"NULL -- Added by rajiv on 29-3-2016"}],"lineCount":1106,"tablesReferenced":["SEC_AccessHistory","SEC_UserAddress","SEC_UserCertificateReqStatus","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["usp_InsertUpdateMissingMyGMEDemographics"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateGeneralDemographicsByUserID"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (33K chars) procedure that updates comprehensive user demographic information in SEC_Users and SEC_UsersExt including personal details, contact information, SSN (encrypted), addresses, and emergency contacts, using WHILE-loop iteration for multi-value field processing.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdateLearningAssignmentDocumentDetails","schema":"dbo","parameters":[{"name":"@LearningAssignmentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AssignedDocumentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AssignedDocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":18,"tablesReferenced":["LA_AssignmentUsers"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateLearningAssignmentDocumentDetails"],"complexity":"trivial","aiEnrichment":null,"module":"PF","summary":"Updates document details associated with a learning assignment record.","businessPurpose":"Manages learning module assignments in the portfolio, tracking which educational modules have been assigned to trainees and their completion status.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"high"},{"name":"UpdateLetterofNotification","schema":"dbo","parameters":[{"name":"@LetterofNotificationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LetterofNotification","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":46,"tablesReferenced":["PF_Accreditation","PF_LetterofNotification"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateLetterofNotification"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates letter of notification details in the portfolio compliance section.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"medium"},{"name":"UpdateMailDistributionSchedules","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@selectedDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@MailDistributionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EmailFrom","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Subject","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":86,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateMailDistributionSchedules"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates mail distribution schedule settings including schedule dates, recipients, and template assignments using WHILE-loop iteration.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Consider moving HTML email template assembly out of T-SQL and into the application layer (.NET) where string manipulation is more efficient and templates are easier to maintain."],"migrationRelevance":"medium"},{"name":"UpdateMailDistributionSchedulesResend","schema":"dbo","parameters":[{"name":"@MailDistributionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ScheduleDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":[],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateMailDistributionSchedulesResend"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Marks a mail distribution schedule for resending, updating the send status and scheduling a new delivery.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdateMilestionRotationHistoryAndAuditTrail","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ToEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@SelectedRotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FromDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ToDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@GroupID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@IsCurriculumNotification","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":49,"tablesReferenced":["EVAL_RotationEmailHistory","PF_UserDocumentNotifications","SEC_EventDetail","SEC_Events"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateMilestionRotationHistoryAndAuditTrail"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates milestone rotation history records and creates audit trail entries for rotation milestone changes.","businessPurpose":"Manages rotation-related data in the portfolio, tracking clinical rotation assignments, schedules, and completion status.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"UpdateMyPQualityImprovementProjects","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SWOT","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"}],"lineCount":198,"tablesReferenced":["APE_Projects","APE_ProjectsLeaders","APE_ProjectsParticipants","APE_QIProjectLeaders","APE_QIProjectParticipants","APE_QIProjects","APE_SubSectionTabs"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateMypPrograms"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates Quality Improvement Project records from the MyPortfolio module with project details, status, SWOT analysis, and PDSA cycle data.","businessPurpose":"Supports the Quality Improvement Project (QIP) module within the portfolio, enabling program directors and trainees to document, track, and report on quality improvement initiatives as required by ACGME and other accrediting bodies.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 25+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePermanentEmailByUserID","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PermanentEmailID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":48,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":["CheckEmailStatus"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePermanentEmailByUserID"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the permanent email address for an archived user, maintaining contact information after account archival.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFACGMECompetency","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Definition","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DefinitionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@AccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CompetencyName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@AudienceID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SubmitButtonType","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreateNewRecordButtonHitNo","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":174,"tablesReferenced":["PF_ACGME","PF_ACGMEDetails"],"sprocsCalledFromBody":["AddPFACGMECompetency","GetPFACGMECompetenciesByID","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFACGMECompetency"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates an existing ACGME competency evaluation record with modified scores, evaluator feedback, and completion status using WHILE-loop iteration for multi-value field updates.","businessPurpose":"Manages ACGME core competency evaluations (Patient Care, Medical Knowledge, Practice-Based Learning, Interpersonal Skills, Professionalism, Systems-Based Practice) in the portfolio, which are required for ACGME accreditation compliance.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdatePFContracts","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LArgeNumber","direction":"IN","defaultValue":null},{"name":"@TrainingAgreement","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ContractStartDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@ContractEndDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@CurentProgram","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@Transferred","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ResIDentStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@InitialProgram","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AppointmentEndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@InitialResIDentTypeCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CurrentResIDentTypeCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EmployerName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FTE","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DaysOff","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@InitialResIDentTypeId","dataType":"ShortText","direction":"IN","defaultValue":"NULL"}],"lineCount":184,"tablesReferenced":["SEC_UserMyGME","SEC_UserProgram","SEC_UserTrainingAgreement","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFContracts"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates portfolio contract details including terms, dates, salary, and renewal information.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdatePFCurricula","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RotationID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@CurriculaMailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"}],"lineCount":153,"tablesReferenced":["DH_DepartmentRotations","PF_DocumentAccessLevel","PF_Subjects","PF_UserDocuments","PF_UserReviews","SEC_EventDetail","SEC_Events","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFCurricula"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates an existing curricula evaluation record with modified scores, completion status, and evaluator information.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdatePFCurriculaVideo","schema":"dbo","parameters":[{"name":"@DocID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CurriculaMailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":94,"tablesReferenced":["PF_UserDocuments","SEC_EventDetail","SEC_Events"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFCurriculaVideo"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing curricula video record with modified metadata and completion status.","businessPurpose":"Supports the curricula evaluation section of the portfolio, enabling tracking of resident/fellow completion of required curricula modules, conference attendance, and handout acknowledgments.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFDegree","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DegreeID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@MedSchoolID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@OtherMedSchool","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DegreeCountryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DegreeStateID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DegreeCityID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@GraduationDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Honors","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":303,"tablesReferenced":["SEC_AccessHistory","SEC_MedicalEducationLogs","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFDegree"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates comprehensive degree information for a user including medical school, undergraduate, and graduate degree details across SEC_Users and SEC_UsersExt.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePFDocSettSubjectLevelsForAllUser","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Optional","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@Required","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":95,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings","PF_UserSpecificSubject","SEC_Users"],"sprocsCalledFromBody":["UpdatePFDocSettSubjectLevelsForSingleUser"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Propagates document subject level settings to all users in a department using WHILE-loop iteration, ensuring consistent credit subject configuration across the department.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"medium"},{"name":"UpdatePFDocSettSubjectLevelsForSingleUser","schema":"dbo","parameters":[{"name":"@SubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Optional","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@Required","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":65,"tablesReferenced":["PF_DocumentCreditSubjectSettings","PF_UserSpecificSubject"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates document subject level settings for a single user, applying individual credit subject configuration overrides.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFDocumentDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PortfolioSectionId","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentConferenceScheduleID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FormatDocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@SpecialtyID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ExpiryEnddate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentLicence","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreditRequired","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreditOptional","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Organization","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentPublicationType","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentConfidential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DEAECFMG_Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PMID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ExternalLink","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingNumber","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingSource","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@VisaTypeID","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@StateType","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@License1Num","dataType":"ShortText","direction":"IN","defaultValue":"0"},{"name":"@StateLic1StateID","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@SchoolName","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCountry","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolState","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCity","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@Degree","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@OtherDegree","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@GraduationDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@StateID2","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@UploadedModule","dataType":"ShortText","direction":"IN","defaultValue":"'MyPortfolio Module'"},{"name":"@StateLicenceID","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"},{"name":"@PresentationDate","dataType":"LargeDate","direction":"IN","defaultValue":"'' --added by bharathi on 08/10/2018"},{"name":"@UserScope","dataType":"SmallNumber","direction":"IN","defaultValue":"0"},{"name":"@SupervisingFaculty","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL   --add end by bharathi on 08/10/2018"},{"name":"@TotalCredits","dataType":"ShortText","direction":"IN","defaultValue":"'0'"},{"name":"@DocumentBinaryFile","dataType":"varchar(max)","direction":"IN","defaultValue":"''"}],"lineCount":549,"tablesReferenced":["CME_EventCredits","CME_Events","DH_ConferenceSchedules","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_MedicalEducationLogs","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["UpdateDateExpiryEndDate","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFDocumentDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (33K chars) procedure that updates portfolio document details across PF_UserDocuments using dynamic SQL for handling varying document types, supporting comprehensive field updates with audit trail logging.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePFDocumentDetailsEventDate","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PortfolioSectionId","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DepartmentConferenceScheduleID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FormatDocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@SpecialtyID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ExpiryEnddate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DocumentLicence","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ApplyToLevel","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreditRequired","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreditOptional","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FlagArchived","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentSubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Organization","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentPublicationType","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentConfidential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@DEAECFMG_Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PMID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ExternalLink","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingNumber","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingSource","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FundingAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@VisaTypeID","dataType":"BigNumber","direction":"IN","defaultValue":"0"},{"name":"@StateType","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@License1Num","dataType":"ShortText","direction":"IN","defaultValue":"0"},{"name":"@StateLic1StateID","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@SchoolName","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCountry","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolState","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@SchoolCity","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@Degree","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@OtherDegree","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@GraduationDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@StateID2","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@UploadedModule","dataType":"ShortText","direction":"IN","defaultValue":"'MyPortfolio Module'"},{"name":"@StateLicenceID","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"},{"name":"@PresentationDate","dataType":"LargeDate","direction":"IN","defaultValue":"'' --added by bharathi on 08/10/2018"},{"name":"@UserScope","dataType":"SmallNumber","direction":"IN","defaultValue":"0"},{"name":"@SupervisingFaculty","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL   --add end by bharathi on 08/10/2018"},{"name":"@TotalCredits","dataType":"ShortText","direction":"IN","defaultValue":"'0'"},{"name":"@DocumentBinaryFile","dataType":"varchar(max)","direction":"IN","defaultValue":"''"},{"name":"@EventDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@SSNNumber","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@SSNCountry","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@DriverLicenseNumber","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DriverStateID","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"}],"lineCount":674,"tablesReferenced":["CME_EventCredits","CME_Events","DH_ConferenceSchedules","OBC_RGADocumentTypeValues","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_UserRoles","SEC_Users"],"sprocsCalledFromBody":["UpdateDateExpiryEndDate","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFDocumentDetailsEventDate"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Large (34K chars) procedure that updates portfolio document event dates across PF_UserDocuments using dynamic SQL, handling date-specific updates for various document types with comprehensive field mapping.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePFDocumentSettAllUsers","schema":"dbo","parameters":[{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Levels","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Required","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Optional","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ModifiedDate","dataType":"LargeDate","direction":"IN","defaultValue":null}],"lineCount":72,"tablesReferenced":[],"sprocsCalledFromBody":["UpdatePFDocSettSubjectLevelsForAllUser"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFDocumentSettAllUsers"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Applies document settings changes to all users in a department using WHILE-loop iteration, propagating scholarly activity settings updates department-wide.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"low"},{"name":"UpdatePFDocumentSettIncomingUsers","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@SubjectName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Levels","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Required","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Optional","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ButtonFlag","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":113,"tablesReferenced":["PF_DocumentCreditSubject","PF_DocumentCreditSubjectSettings"],"sprocsCalledFromBody":["UpdateAPEScholarlyActivityInfo"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFDocumentSettIncomingUsers"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Applies document settings to incoming (newly assigned) users in a department, ensuring new users receive the current department document configuration.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFExamScores","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ExamID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PassFailStatusID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Score","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TestDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PercentileScore","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AcademicYear","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IsUpdateExamScores","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0 -- Added by Ashok for access history on 07/31/2018"}],"lineCount":255,"tablesReferenced":["PF_TempExaminationScoresDetails","SEC_AccessHistory","SEC_Exams","SEC_UserExams"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFExamScores"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates exam score records in SEC_UserExams with modified scores, dates, and pass/fail status.","businessPurpose":"Manages examination and in-training exam (ITE) score records in the portfolio, supporting performance tracking and early warning notifications for trainees with concerning score trends.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdatePFGeneralDocumentation","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CompetencyID","dataType":"BigNumber","direction":"IN","defaultValue":"0"}],"lineCount":51,"tablesReferenced":["PF_UserDocuments"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFGeneralDocumentation"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing general documentation record with modified title, description, file path, and metadata.","businessPurpose":"Manages general documentation records in the portfolio, providing a flexible document storage area for miscellaneous portfolio items that don't fit into specific categorized sections.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFLearningAssignement","schema":"dbo","parameters":[{"name":"@LoggedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Topic","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AccessedDateTime","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@SummaryNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LearningAssignmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Flag","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LearningAssignmentCommentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LearningAssignmentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":106,"tablesReferenced":["LA_AssignmentComments","LA_AssignmentUsers"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFLearningAssignement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing learning assignment record with modified details, completion status, and evaluator information.","businessPurpose":"Manages learning module assignments in the portfolio, tracking which educational modules have been assigned to trainees and their completion status.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFLearningTask","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ReviewerComment","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AssessorReviewComments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Title","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Competency","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Goal","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ReviewByDirector","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":249,"tablesReferenced":["LA_Preceptors","PF_LearningTasks","SEC_Users"],"sprocsCalledFromBody":["AddPFLearningTasksAssesseeReviewComments","AddPFLearningTasksAssessorReviewComments"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFLearningTask"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates an existing learning task record with modified goals, completion criteria, and review status using WHILE-loop iteration for multi-value updates.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors."],"migrationRelevance":"medium"},{"name":"UpdatePFLearningTaskUserGoalComplete","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LearningTaskID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":25,"tablesReferenced":["PF_LearningTasks"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFLearningTaskUserGoalComplete"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the goal completion status for learning tasks across multiple users using WHILE-loop iteration.","businessPurpose":"Supports the learning appraisal and plan section of the portfolio, enabling trainees and assessors to document learning goals, track progress, and complete the appraisal review workflow.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"medium"},{"name":"UpdatePFLicenses","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StateLic1Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1StateID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1ExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@StateLic2Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2StateID","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2ExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ECFMGNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGIssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ECFMGExpDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LiabilityInsNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LiabilityInsExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@DEANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DEANumExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@BNDDNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BNDDNumExpiryDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@AOANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AOADate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ACOSNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACOSDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@USMLEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBODEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AAMCID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSLogin","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSPassword","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicaidLegacy","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PECOS","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicareApproved","dataType":"VerySmallNumber","direction":"IN","defaultValue":"NULL"},{"name":"@NPI","dataType":"LargeNumber","direction":"IN","defaultValue":"null --Added by Sbharathi NPI Number 23/02/2107"},{"name":"@StateLic1IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@StateLic2IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@DEANumIssueDate","dataType":"LargeDate","direction":"IN","defaultValue":"''"},{"name":"@CaseLogACGMEID","dataType":"LargeText","direction":"IN","defaultValue":"'' -- added by bharathi on 21/04/2017"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"13"},{"name":"@DATAWaivedNumber","dataType":"ShortText","direction":"IN","defaultValue":"null"}],"lineCount":739,"tablesReferenced":["PF_UserDocuments","SEC_AccessHistory","SEC_EventDetail","SEC_Events","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFLicenses"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Updates comprehensive license information for a user including state medical licenses, DEA registration, and professional certifications across SEC_Users and related tables.","businessPurpose":"Manages user profile and credentialing data in the portfolio including demographics, degrees, licenses, and professional credentials required for trainee verification and board eligibility.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePFMoonLightingHistory","schema":"dbo","parameters":[{"name":"@UserMoonLightingHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Description","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MailingAddress","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ContactPerson","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@HoursWorkedPerWeek","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@Payment","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@PaymentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":112,"tablesReferenced":["SEC_UserMoonLightingHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFMoonLightingHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing moonlighting history record with modified employment details, dates, and approval status.","businessPurpose":"Tracks moonlighting (external employment) activities for residents/fellows in the portfolio, which requires program director approval and is subject to duty hour regulations.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFPaperBasedEvaluation","schema":"dbo","parameters":[{"name":"@DocumentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentTitle","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentDescription","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentSectionCode","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentConfIDential","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ModifiedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocUserAccessLevelID","dataType":"LargeNumber","direction":"IN","defaultValue":"5"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":87,"tablesReferenced":["PF_DocumentAccessLevel","PF_UserDocuments","SEC_EventDetail","SEC_Events","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFPaperBasedEvaluation"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates an existing paper-based evaluation record with modified scores, evaluator information, and completion status.","businessPurpose":"Manages paper-based evaluation records in the portfolio, supporting institutions that still use paper forms for certain evaluation types alongside the electronic system.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency."],"migrationRelevance":"medium"},{"name":"UpdatePFPersonalStatements","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Title","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Goal","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TimeLine","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ReviewByDirector","dataType":"VerySmallNumber","direction":"IN","defaultValue":null}],"lineCount":228,"tablesReferenced":["LA_Preceptors","PF_PersonalStatements","SEC_Users"],"sprocsCalledFromBody":["AddPFPersonalStatementsAssesseeReviewComments","AddPFPersonalStatementsAssessorReviewComments","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFPersonalStatements"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates an existing personal learning objectives statement with modified text, review status, and assessor feedback using WHILE-loop iteration for multi-section updates.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"UpdatePFPersonalStatementsUserTitleComplete","schema":"dbo","parameters":[{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PersonalStatementID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":25,"tablesReferenced":["PF_PersonalStatements"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFPersonalStatementsUserTitleComplete"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the title completion status for personal learning statements across users using WHILE-loop iteration.","businessPurpose":"Supports the personal learning objectives and goals section of the portfolio, where trainees document their learning objectives and assessors provide feedback through a structured review workflow.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions."],"migrationRelevance":"medium"},{"name":"UpdatePFProgramTrainingHistory","schema":"dbo","parameters":[{"name":"@UserTrainingHistoryID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@ProgramID","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@DepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@InstitutionID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@OtherDepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherInstitutionName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ProgramType","dataType":"VeryShortText","direction":"IN","defaultValue":"NULL  /*--Added by Vijaya For Previous Training History on 06/29/2020--*/"},{"name":"@TempGUID","dataType":"LargeText","direction":"IN","defaultValue":"NULL  /*--Added by Vijaya For Access History on 07/01/2020--*/"},{"name":"@EmployerID","dataType":"LargeNumber","direction":"IN","defaultValue":"0"},{"name":"@DocumentName","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DocumentTitle","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@DocumentFilePath","dataType":"ShortText","direction":"IN","defaultValue":"''"}],"lineCount":284,"tablesReferenced":["MyGME_Transfer_Queue","SEC_AccessHistoryForMultipleAUD","SEC_Departments","SEC_Events","SEC_UserProgramHistorySettings","SEC_UserProgramLog","SEC_UserTrainingHistory","SEC_Users"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFProgramTrainingHistory"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates program training history records with customized data including program details, dates, level progression, and institution information.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"medium"},{"name":"UpdatePFSpecialMedActivityHistory","schema":"dbo","parameters":[{"name":"@UserSpecialMedActivityHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@Description","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MailingAddress","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@ContactPerson","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@HoursWorkedPerWeek","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@Payment","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@PaymentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":51,"tablesReferenced":["SEC_UserSpecialMedActivityHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFSpecialMedActivityHistory"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing special medical activity record with modified activity details and dates.","businessPurpose":"Documents special medical activities and experiences in the portfolio, tracking unique clinical or research experiences outside the standard rotation schedule.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFStipend","schema":"dbo","parameters":[{"name":"@UserStipendHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@EffectiveDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@MonthlyStipend","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":111,"tablesReferenced":["SEC_UserStipendHistory"],"sprocsCalledFromBody":["GetObcStipendAmountByLevel","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFStipend"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing stipend record with modified amount, dates, and approval status.","businessPurpose":"Manages stipend records in the portfolio, tracking resident/fellow compensation amounts, schedules, and approval status for financial administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFSupplimental","schema":"dbo","parameters":[{"name":"@UserSupplementalPaymentHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@PaymentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Amount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@LocationName","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ActivityType","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@TotalHours","dataType":"BigNumber","direction":"IN","defaultValue":null}],"lineCount":40,"tablesReferenced":["SEC_UserSupplementalPaymentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFSupplimental"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates an existing supplemental payment record with modified details.","businessPurpose":"Manages supplemental payment records in the portfolio for tracking additional compensation beyond base stipend.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"UpdatePFTrainingAgreement","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DisplayName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ContractDescription","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"Currency","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null}],"lineCount":89,"tablesReferenced":["SEC_UserTrainingAgreement","SEC_UserTrainingAgreementDocument"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFTrainingAgreement"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates an existing training agreement record with modified terms, dates, and signature status.","businessPurpose":"Manages training agreement records in the portfolio, documenting the formal agreements between trainees and training programs including terms, signatures, and compliance requirements.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFTrainingGapHistory","schema":"dbo","parameters":[{"name":"@UserTrainingGapHistoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@GapTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@Remediate","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@Comment","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":46,"tablesReferenced":["SEC_UserTrainingGapHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.DeletePFTrainingGapHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates an existing training gap/leave of absence record with modified dates, reason, and approval status.","businessPurpose":"Tracks leaves of absence and gaps in training within the portfolio, which are required for accurate calculation of training completion dates and board eligibility.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFTrainingHistory","schema":"dbo","parameters":[{"name":"@UserTrainingCommentHistoryID","dataType":"CounterNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CommentDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null}],"lineCount":39,"tablesReferenced":["SEC_UserTrainingCommentHistory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFTrainingHistory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates an existing training history record with modified program details and dates.","businessPurpose":"Supports credentialing documentation in the portfolio by tracking prior training program history, which is required for verification during the credentialing and privileging process.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFUniformLockers","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LockerNumberone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LockerNumberTwo","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"1"}],"lineCount":121,"tablesReferenced":["SEC_AccessHistory","SEC_UsersExt"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFUniformLockers"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates uniform and locker assignment details for a user including sizes, quantities, and return status.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"UpdatePFUserMilitary","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryServiceObligation","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryVitenamStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryCampaignStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryStatusDisabilityID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@MilitaryServiceMedalID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@VetSeparatedDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@military","dataType":"Bignumber","direction":"IN","defaultValue":"null"}],"lineCount":39,"tablesReferenced":["SEC_UserMilitary","SEC_UsersExt"],"sprocsCalledFromBody":["AddUserMilitary"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFUserMilitary"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates military service details for a user profile.","businessPurpose":"Manages military service information in the user profile, tracking rank, service branch, and military-related data for military-affiliated training programs.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"UpdatePFUserProgramHistory","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@LengthOfTraining","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LevelOfFrequency","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PriorServiceMonth","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@PriorServiceCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ProgramEndDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGraduatePositionID","dataType":"LargeNumber","direction":"IN","defaultValue":"-1"},{"name":"@PostGraduateNotes","dataType":"LargeText","direction":"IN","defaultValue":"NULL"},{"name":"@IsNonAffiliatedTraineeChecked","dataType":"VerySmallNumber","direction":"IN","defaultValue":"0"},{"name":"@ResidencyTypeCode","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":"0 --added by bharathi on 10-26-2016"},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":"0 --added by bharathi on 10-26-2016"},{"name":"@ResidencyTypeCode1","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL -- added by charan 05-09-2019"},{"name":"@IRPValue","dataType":"LargeText","direction":"IN","defaultValue":"NULL"},{"name":"@ResidencyTypeId","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL --Added by Mahendar 03042024"}],"lineCount":351,"tablesReferenced":["SEC_AccessHistory","SEC_Events","SEC_ProgramHistoryLog","SEC_ResidencyTypes","SEC_UserRoles","SEC_Users","SEC_UsersExt"],"sprocsCalledFromBody":["UpdateCAWDataWhileUserLevelChanged","spLOG_ErrorHandling","usp_UpdateUserProgramHistory"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFUserProgramHistory"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates comprehensive user program history including level changes, dates, and training milestones using WHILE-loop iteration for multi-period updates.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Evaluate whether the WHILE loop can be replaced with a set-based operation using JOINs, CROSS APPLY, or window functions.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdatePFUserTaxWithholdingsBank","schema":"dbo","parameters":[{"name":"@CreatedUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@VABilling","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DCFICAID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@FederalTaxMaritalStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@FederalTaxAllow","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateTaxMaritalStatusID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@StateTaxAllow","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateTaxDeduc","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FederalAddTaxWith","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@StateAddTaxWith","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@BankCheckDisp","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BankRTN","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BankCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BankAccTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@BankAccNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BankAccFormat","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Account","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":45,"tablesReferenced":["SEC_UsersTax"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdatePFUserTaxWithholdingsBank"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates user tax withholding and bank information for payroll integration.","businessPurpose":"Supports the Portfolio (PF) module functionality in the MyEvaluations platform, which manages trainee and faculty portfolio documentation for medical education programs.","optimizationRecommendations":["Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application."],"migrationRelevance":"low"},{"name":"UpdateUserContractDetails","schema":"dbo","parameters":[{"name":"@UserContractID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ContractStartDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@ContractEndDate","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@InitialResidentTypeCode","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@CurrentResidentTypeCode","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@EmployerName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CurrentProgram","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@Transferred","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@ResidentStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@InitialProgram","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StipendLevel","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@StipendAmount","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@ContractNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@TrainingLevel","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@LoggedInUserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DocumentName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFilePath","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@DocumentFileSize","dataType":"ScoreNumber","direction":"IN","defaultValue":null},{"name":"@DocumentAccessLevelID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@InitialProgramStartDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@InitialProgramEndDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@CurrentProgramStartDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@CurrentProgramEndDate","dataType":"SmallDate","direction":"IN","defaultValue":"NULL"},{"name":"@EmployerID","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"},{"name":"@InitialResidentTypeId","dataType":"LargeNumber","direction":"IN","defaultValue":"NULL"}],"lineCount":237,"tablesReferenced":["OBC_RGADocumentTypeValues","PF_UserDocuments","SEC_DepartmentInstitution","SEC_Programs","SEC_UserContract"],"sprocsCalledFromBody":["AddOBCDocumentUploadHistory","AddPFContractDocumentDetails","GetObcStipendAmountByLevel","UpdatePFContratProgramTrainingHistory","spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdatePFCurriculaVideo"],"complexity":"complex","aiEnrichment":null,"module":"PF","summary":"Updates user contract details including terms, dates, salary, benefits, and renewal information with audit trail logging.","businessPurpose":"Manages user contract records in the portfolio, tracking employment agreements, terms, expiration dates, and renewal status for residents/fellows and faculty.","optimizationRecommendations":["Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdateUserDependent","schema":"dbo","parameters":[{"name":"@UserDependentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DependentTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@FirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MIDdleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DateOfBirth","dataType":"SmallDate","direction":"IN","defaultValue":null},{"name":"@Phone","dataType":"ShortText","direction":"IN","defaultValue":null}],"lineCount":46,"tablesReferenced":["SEC_UserDependent"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdateUserDependent"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates dependent (spouse/emergency contact) information for a user.","businessPurpose":"Manages dependent (spouse and emergency contact) information in the user profile for institutional recordkeeping and benefits administration.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"UpdateUserIDForACGMEImportData","schema":"dbo","parameters":[],"lineCount":113,"tablesReferenced":["SEC_UserTypes","SEC_Users"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":true,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateUserIDForACGMEImportData"],"complexity":"moderate","aiEnrichment":null,"module":"PF","summary":"Updates user ID mapping for ACGME import data records before the actual import process, resolving user identity matches between external and internal data.","businessPurpose":"Supports the ACGME data integration workflow, enabling institutions to import competency evaluation data from the ACGME reporting system into MyEvaluations for consolidated tracking and reporting.","optimizationRecommendations":["The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 11+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions."],"migrationRelevance":"high"},{"name":"UpdateUserImageFileName","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":20,"tablesReferenced":["SEC_Users"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateUserImageFileName"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates the user's profile image file name after a new photo upload.","businessPurpose":"Manages user profile photo storage and retrieval in the portfolio module.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"high"},{"name":"UpdateUserImport","schema":"dbo","parameters":[],"lineCount":1246,"tablesReferenced":["SEC_DepartmentInstitution"],"sprocsCalledFromBody":["UpdateUserImportingDetails"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.UpdateUserImportingDetails"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Very large (93K chars) procedure that processes user import update operations, modifying existing user records in SEC_Users and SEC_UsersExt from import staging data with comprehensive field mapping and WHILE-loop iteration for batch processing.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["Consider refactoring this large procedure (>50K chars) into smaller sub-procedures to improve maintainability and reduce compilation overhead.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"UpdateUserImportingDetails","schema":"dbo","parameters":[{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@FirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MiddleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MainEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MainEmailStatus","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@UserTypeID","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@SpecialtyName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Username","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Password","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@IsShared","dataType":"VerySmallNumber","direction":"IN","defaultValue":null},{"name":"@PermanentEmail","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ProgramStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FellowProgramStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FirstTrainingStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DepartmentName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Pager","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CellPhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Phone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AlternatePhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@RoleName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Address1","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Address2","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@City","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Zip","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FaxNumber","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SSN","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@SSNCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NPI","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@DateOfBirth","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@VisaName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@VisaExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DateOfDeath","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BirthCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BirthCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StatusChangeDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PassportCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MilitaryRankName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@GenderName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EthinicName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MaritalStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EmployeeID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CitizenShipName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LanguageName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherLanguageName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@VisaIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@MilitaryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ECFMGExpDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DEANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DEANumExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@DegreeName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic1StateID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StateLic1ExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2Num","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2Type","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StateLic2StateID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@StateLic2ExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LiabilityInsNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LiabilityInsExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BNDDNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@BNDDNumExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AOANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AOADate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ACOSNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACOSDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LockerNumberone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LockerNumberTwo","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DegreeCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@StartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EndDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@GraduationDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedSchoolName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ProgramEndDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@AANANum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AANADate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AAMCNum","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AOAID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBODEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@OtherMedSchool","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PreviousLastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE1_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CK_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE2_CS_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_Score","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_TestDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USMLE3_PassFailStatusName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ACLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ALSOCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ALSOCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ATLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ATLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BBPathologyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BBPathologyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@BLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EmergencyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EmergencyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EnvironmentalCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EnvironmentalCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ErgonomicsCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@ErgonomicsCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FCCSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FCCSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FireTrainingCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FireTrainingCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HIPAACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HIPAACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InfectionCtrlCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InfectionCtrlCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@NRPCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@NRPCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@OSHACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@OSHACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PACLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PACLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBEducationCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBEducationCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBTestingCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@TBTestingCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PALSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PALSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@LoggedInDepartmentID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@ScheduleAppID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PIN","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ContractStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@State","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@CsaPassStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@CsaPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@InService1_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService2_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService3_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService4_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService5_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService6_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService7_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService8_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService9_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService10_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService11_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService12_Score","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService1_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService2_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService3_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService4_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService5_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService6_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService7_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService8_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService9_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService10_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService11_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@InService12_PercentScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@USMLEID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@AAMCID","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSLogin","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ACGMEADSPassword","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LengthofTraining","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@LevelofFrequency","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolHonors","dataType":"LongText","direction":"IN","defaultValue":null},{"name":"@MedicalSchoolID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@GoodStanding","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@EducationalTrainingPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@EducationalTrainingExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FluVaccinationPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@FluVaccinationExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@STABLEPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@STABLEExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@HomeAddress1","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeAddress2","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomePhone","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeZip","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeCountryName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@HomeStateName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@FormerLastName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PreferredFirstName","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCountry","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradEducationNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkSpecialty","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCountry","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkState","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkCity","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkZip","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradWorkNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryService","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryStartDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradMilitaryNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvLocation","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvStartDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@PostGradPubSrvNotes","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@RosterID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Disabled","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@UCW8BENDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@USEntryDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@SubDivison","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@AltDepartmentCode","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@Category","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Certification","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Enrolled","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Birthstate","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@CALSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CALSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CITICertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@AnnualMedicalClearanceCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@AnnualMedicalClearanceCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@ASANIHStrokeScaleACertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@ASANIHStrokeScaleACertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CulturalCompetencyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@CulturalCompetencyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FESCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FESCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FLSCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@FLSCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@MultiStarCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@MultiStarCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHCtrlVenousCathCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHLaserSafetyCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHLaserSafetyCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHModSedationCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHModSedationCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHPointofCareCertPassDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NYPHPointofCareCertExpiryDate","dataType":"VeryShortText","direction":"IN","defaultValue":"''"},{"name":"@NonAffiliatedTrainee","dataType":"ShortText","direction":"IN","defaultValue":"''"},{"name":"@CurrentCountry","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipendlevel","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@BSESPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@BSESExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ACGMEProgramID","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@COMLEX_Level_3","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CountFirstStarted","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CountResidency","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CurrentProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@CurrentProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramName","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsIssueDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EducationalProgramsNumber","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EMSPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@EMSExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ENLSPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ENLSExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@InitialProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@InitialProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@PostGraduateNotes","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@PostGraduationPosition","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level_IRIS_STAR","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@LOATotalDays","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingApprovedByUser","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingStartDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MoonlightingEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@SchoolEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipend_Amount_Annual","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Stipend_Amount_Monthly","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@Level_IRIS_STAR1","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ContractEndDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ProgramNameInitial","dataType":"Largetext","direction":"IN","defaultValue":"''"},{"name":"@SSNEncrypt","dataType":"Largetext","direction":"IN","defaultValue":"null"},{"name":"@AuthorizedtoWork","dataType":"LargeText","direction":"IN","defaultValue":"null"},{"name":"@DATAWaivedNumber","dataType":"ShortText","direction":"IN","defaultValue":"null"},{"name":"@ASESPassDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@ASESExpDate","dataType":"LargeText","direction":"IN","defaultValue":"''"},{"name":"@MedDegreeMonth","dataType":"ShortText","direction":"IN","defaultValue":"null"},{"name":"@MedDegreeYear","dataType":"ShortText","direction":"IN","defaultValue":"null"},{"name":"@BrainDeathDeterminationIssueDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@NBPMEPartIIIStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABPMITEStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEScore","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@ABFASITEStatus","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@DEANumIssueDate","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Level_IRIS_STAR1","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Stipendlevel","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@BSESPassDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@BSESExpDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ACGMEProgramID","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@COMLEX_Level_3","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CountFirstStarted","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CountResidency","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CurrentProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CurrentProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EducationalProgramName","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EducationalProgramsIssueDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EducationalProgramsExpDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EducationalProgramsNumber","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EMSPassDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@EMSExpDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ENLSPassDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@ENLSExpDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@InitialProgramStartDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@InitialProgramEndDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Level","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Level_IRIS_STAR","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@LOATotalDays","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MoonlightingApprovedByUser","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MoonlightingStartDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@MoonlightingEndDate","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Stipend_Amount_Annual","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@Stipend_Amount_Monthly","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@COVIDVaccinationIssueDate","dataType":"VeryShortText","direction":"IN","defaultValue":null},{"name":"@COVIDVaccinationExpirationDate","dataType":"VeryShortText","direction":"IN","defaultValue":null}],"lineCount":3310,"tablesReferenced":["LOG_ErrorHandling","SEC_Departments","SEC_Events","SEC_MedSchools","SEC_Programs","SEC_UserAddress","SEC_UserContract","SEC_UserExams","SEC_UserRoles","SEC_UserTrainingAgreement","SEC_UsersExt"],"sprocsCalledFromBody":["UpdateImportedUserCertificates"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":true,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.GetPFProcedureCompletionForReport"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Extremely large (147K chars) procedure that handles detailed user import updates with dynamic SQL, processing comprehensive demographic, credential, and contact field updates from import staging data into SEC_Users, SEC_UsersExt, and related portfolio tables.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["This procedure exceeds 100K characters and should be decomposed into smaller, focused sub-procedures for maintainability and testability.","Review dynamic SQL usage for SQL injection risks; parameterize user inputs with sp_executesql and use QUOTENAME for object name injection. Consider replacing dynamic SQL with conditional static queries where the variation is limited.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations."],"migrationRelevance":"high"},{"name":"UpdateUserUniformInventory","schema":"dbo","parameters":[{"name":"@UserUniformInventoryID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@UserID","dataType":"LargeNumber","direction":"IN","defaultValue":null},{"name":"@IssueDate","dataType":"LargeDate","direction":"IN","defaultValue":null},{"name":"@UniformTypeID","dataType":"SmallNumber","direction":"IN","defaultValue":null},{"name":"@Quantity","dataType":"BigNumber","direction":"IN","defaultValue":null},{"name":"@Status","dataType":"ShortText","direction":"IN","defaultValue":null},{"name":"@Comments","dataType":"LargeText","direction":"IN","defaultValue":null},{"name":"@CreatedBy","dataType":"LargeNumber","direction":"IN","defaultValue":null}],"lineCount":42,"tablesReferenced":["SEC_UserUniformInventory"],"sprocsCalledFromBody":["spLOG_ErrorHandling"],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":false},"calledFromCode":["DocDetailsManager.cs.UpdateUserUniformInventory"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates uniform inventory record details including type, size, quantity, and return status.","businessPurpose":"Manages uniform inventory and locker assignments in the portfolio for tracking institutional equipment issued to trainees.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"high"},{"name":"UserImporting","schema":"dbo","parameters":[],"lineCount":1478,"tablesReferenced":["SEC_DepartmentInstitution","SEC_Departments"],"sprocsCalledFromBody":["AddUserImportingDetails","usp_GetDeptPGYLengthofTraining","usp_UpdateFellowProgramHistoryForDefaultCRP","usp_UpdateUserProgramHistory"],"crudType":"insert","antiPatterns":{"hasCursor":false,"hasSelectStar":true,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":true,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":true,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.InsertUserData"],"complexity":"very-complex","aiEnrichment":null,"module":"PF","summary":"Very large (110K chars) master user import procedure that orchestrates the complete user import workflow including data validation, user matching, field mapping, and bulk insert/update operations across SEC_Users, SEC_UsersExt, and portfolio tables using WHILE-loop iteration for batch processing.","businessPurpose":"Critical for the user onboarding and data migration workflow in MyEvaluations. These bulk import procedures enable institutions to load trainee demographic, credential, and program data from external sources (ERAS, institutional HR systems) into the platform, avoiding manual entry for large cohorts of residents/fellows.","optimizationRecommendations":["This procedure exceeds 100K characters and should be decomposed into smaller, focused sub-procedures for maintainability and testability.","Replace WHILE-loop string concatenation for HTML email templates with a set-based approach using STRING_AGG (SQL Server 2017+) or FOR XML PATH to reduce iteration overhead.","Review temporary table usage; consider using table variables for small result sets (<1000 rows) or indexed temp tables with explicit statistics updates for large datasets.","The READ UNCOMMITTED isolation level risks dirty reads; evaluate whether SNAPSHOT isolation or READ COMMITTED SNAPSHOT would provide acceptable performance with better data consistency.","Add TRY/CATCH error handling with proper transaction rollback to prevent partial data modifications in case of runtime errors.","This procedure has 13+ JOINs; review the execution plan for missing indexes and consider breaking complex queries into staged temp table operations for better optimizer decisions.","Add SET NOCOUNT ON to suppress row count messages and reduce network traffic between SQL Server and the application.","Review UNION operations for potential UNION ALL usage where duplicate elimination is not needed, to avoid unnecessary sort operations.","Consider refactoring nested subqueries into CTEs for improved readability and potential optimizer benefits."],"migrationRelevance":"high"},{"name":"usp_CleanupPF_AffiliateAgreementRotationIDs","schema":"dbo","parameters":[],"lineCount":35,"tablesReferenced":["PF_AffiliateAgreement","PF_AffiliateAgreement_CleanupTable"],"sprocsCalledFromBody":[],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":true,"nolockCount":1,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Cleans up duplicate rotation IDs and sponsor rotation IDs in PF_AffiliateAgreement records, resolving data integrity issues from historical imports.","businessPurpose":"Supports institutional affiliate agreement management, enabling GME offices to track rotation site agreements, expiration dates, and departmental assignments for clinical training partnerships.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"medium"},{"name":"usp_CleanupRotationSponserRotationIDs","schema":"dbo","parameters":[],"lineCount":31,"tablesReferenced":["PF_AffiliateAgreement_CleanupTable"],"sprocsCalledFromBody":["usp_UpdateDistinctRotationAndSponsorRotationIDs"],"crudType":"delete","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Cleans up rotation ID and sponsor rotation ID fields in PF_AffiliateAgreement by removing duplicate and invalid values.","businessPurpose":"Data maintenance utility that cleans up duplicate or invalid records in portfolio tables, ensuring data integrity for rotation and affiliate agreement records.","optimizationRecommendations":["This is a small, focused procedure with minimal optimization opportunities. Ensure proper indexing on the queried columns."],"migrationRelevance":"low"},{"name":"usp_UpdateDistinctRotationAndSponsorRotationIDs","schema":"dbo","parameters":[],"lineCount":34,"tablesReferenced":["PF_AffiliateAgreement"],"sprocsCalledFromBody":[],"crudType":"update","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":true,"nolockCount":1,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":true,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":[],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Updates rotation ID and sponsor rotation ID columns with distinct deduplicated values across affiliate agreement records.","businessPurpose":"Manages rotation-related data in the portfolio, tracking clinical rotation assignments, schedules, and completion status.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"},{"name":"VerifyMailTemplate","schema":"dbo","parameters":[],"lineCount":28,"tablesReferenced":["SEC_MailTemplateInfo"],"sprocsCalledFromBody":[],"crudType":"get","antiPatterns":{"hasCursor":false,"hasSelectStar":false,"hasDynamicSql":false,"hasNolock":false,"nolockCount":0,"missingSetNocountOn":false,"hasTableVariable":false,"hasTempTable":false,"hasWhileLoop":false,"hasNoTryCatch":true},"calledFromCode":["DocDetailsManager.cs.VerifyMailTemplate"],"complexity":"simple","aiEnrichment":null,"module":"PF","summary":"Validates a mail template by checking for required fields and proper formatting before allowing it to be used in email distributions.","businessPurpose":"Powers the automated email notification system in the portfolio module, generating and scheduling email communications for accreditation deadlines, contract expirations, curricula assignments, and other time-sensitive portfolio events.","optimizationRecommendations":["Add appropriate covering indexes for the main query predicates if not already present."],"migrationRelevance":"low"}]}