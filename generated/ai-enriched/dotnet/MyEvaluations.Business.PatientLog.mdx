---
title: "MyEvaluations.Business.PatientLog"
description: "Auto-generated documentation for the MyEvaluations.Business.PatientLog module"
sidebar_label: "PatientLog"
tags: [dotnet, business-layer]
---

{/* Auto-generated by ai-enrich-dotnet.ts on 2026-02-20T12:00:00.000Z */}

## Overview

The **MyEvaluations.Business.PatientLog** module manages patient encounter logging for medical training programs. It contains **31 classes** covering patient encounter submission, case review workflows, education diagnosis classification, encounter types, location management, custom field configuration, import/export, supervisor management, and lookup item management.

Patient logging is distinct from procedure tracking: while the Procedures module tracks specific surgical/clinical procedures performed, the PatientLog module tracks broader patient encounters -- the patients a trainee sees, the diagnoses encountered, the locations visited, and the supervisors involved. This data feeds into competency assessments and accreditation reporting for both GME and nursing programs. The module has a dependency on `MyEvaluations.Business.Procedures` through the `PatientLogProceduresSubmittedInfo` class which extends `SubmittedProcedureInfo`.

## Key Classes

### Core Patient Log
- **`PatientLogInfo`** -- Primary DTO for patient encounter log entries with nested `CustomFieldDetails` for dynamic fields. Located in `PatientLogInfo.cs`.
- **`PatientLogProceduresSubmittedInfo`** (extends `SubmittedProcedureInfo`) -- Links patient encounters to submitted procedures. Demonstrates cross-module dependency with the Procedures module.
- **`PatientLogSearchCriteria`** -- Search/filter parameters for patient log queries.
- **`SubmitPatientLogCustomizations`** -- Configuration for patient log submission form customization.
- **`ProcedureSelection`** -- Model for selecting procedures to link with patient encounters.

### Case Review Workflow
- **`CaseReviewManager`** (extends `Manager`) -- Manages the case review workflow with 8 stored procedures for submitting cases for review, tracking learner reviews, and closing cases. Located in `CaseReviewManager.cs`.
- **`CaseReviewInfo`** -- Case review request data DTO.
- **`LearnerReviewInfo`** -- Learner/peer review response data DTO.

### Education Diagnosis (DX) Classification
- **`EducationDXManager`** (extends `Manager`) -- Manages education diagnosis classifications with 10 stored procedures for CRUD, DX classification settings, and name-based lookups. Located in `EducationDXManager.cs`.
- **`EducationDXInfo`** -- Education diagnosis DTO.
- **`EducationDXSearchCriteria`** -- Search parameters for education diagnosis queries.

### Encounter Types
- **`EncounterTypeManager`** (extends `Manager`) -- Manages encounter type definitions with 8 stored procedures for CRUD, soft-delete/restore, and name-based lookups. Located in `EncounterTypeManager.cs`.
- **`EncounterTypeInfo`** -- Encounter type DTO (e.g., inpatient, outpatient, emergency, telehealth).
- **`EncounterTypeSearchCriteria`** -- Search parameters for encounter type queries.

### Location Management
- **`LocationNameManager`** (extends `Manager`) -- Manages clinical location definitions with 8 stored procedures for CRUD, soft-delete/restore, and name-based lookups. Located in `LocationNameManager.cs`.
- **`LocationNameInfo`** -- Clinical location DTO (hospital, clinic, community site, etc.).
- **`LocationNameSearchCriteria`** -- Search parameters for location queries.

### Custom Fields
- **`PatientLogFieldsManager`** (extends `Manager`) -- Manages custom patient log form fields with **15 stored procedures** for field CRUD, ordering, visibility, required flags, and restoration. Located in `PatientLogFieldsManager.cs`.
- **`PatientLogFieldsGroupManager`** (extends `Manager`) -- Field group management (hide/show, required, ordering) with 3 stored procedures.
- **`PatientLogFieldInfo`** -- Custom field configuration DTO.
- **`PatientLogFieldGroupsInfo`** -- Field group configuration DTO.
- **`CustomFieldDetails`** -- Dynamic custom field value storage.

### Lookup Items
- **`PatientLogLookupItemManager`** (extends `Manager`) -- Manages dropdown/lookup field options for patient log custom fields with 8 stored procedures. Located in `PatientLogLookupItemManager.cs`.
- **`PatientLogLookupItemInfo`**, **`PatientLogLookUpValue`** -- Lookup item DTOs.

### Import/Export
- **`ExportPatientLogManager`** (extends `Manager`) -- Patient log data export with `GetDataForPatientLogExport` stored procedure.
- **`ImportPatientLogManager`** (extends `Manager`) -- Patient log data import with NPI-based user lookup (`GetUserIdByNPIForImport`).
- **`ExportPatientLogInfo`**, **`ImportPatientLogInfo`** -- Import/export DTOs.

### Supervisor Management
- **`PatientLogSupervisorsManager`** (extends `Manager`) -- Manages patient log supervisor assignments with 8 stored procedures for supervisor CRUD, department queries, and active status checking.
- **`PatientLogSupervisorInfo`** -- Supervisor assignment DTO.

## Patterns

1. **Manager/Info Pattern** -- 7 explicit Manager-Info counterparts (e.g., `CaseReviewManager`/`CaseReviewInfo`, `EncounterTypeManager`/`EncounterTypeInfo`).
2. **Mirror of Procedures Module** -- Several classes mirror Procedures module counterparts with "PatientLog" prefixes (e.g., `PatientLogFieldsManager` mirrors `FieldsManager`, `PatientLogLookupItemManager` mirrors `LookUpItemManager`).
3. **Search Criteria Pattern** -- Dedicated `*SearchCriteria` classes for `EducationDX`, `EncounterType`, `LocationName`, and `PatientLog`.
4. **Soft Delete/Restore** -- Encounter types, locations, education DX classifications, and custom fields all support soft-delete with restore.
5. **Cross-Module Inheritance** -- `PatientLogProceduresSubmittedInfo` extends `Procedures.SubmittedProcedureInfo`, creating a compile-time dependency between modules.
6. **NPI-Based Import** -- Import uses National Provider Identifier (NPI) for user matching, indicating healthcare-specific identity resolution.

## Notes

- This module has **10 manager classes** with **~70 stored procedure calls** total.
- The custom field system (`PatientLogFieldsManager` with 15 stored procedures) is a near-exact mirror of the Procedures module's `FieldsManager`. During migration, these should be consolidated into a shared configurable field service.
- `PatientLogProceduresSubmittedInfo` extending `SubmittedProcedureInfo` creates tight coupling with the Procedures module. In NestJS, use composition over inheritance.
- The case review workflow (`CaseReviewManager`) represents a multi-step approval process: submit for review, learner reviews, close case. This maps well to a NestJS state machine or workflow engine.
- `ImportPatientLogManager` uses NPI (National Provider Identifier) for user lookup during import, which is a healthcare-industry-standard identifier.
- `EncounterTypeManager`, `LocationNameManager`, and `EducationDXManager` follow an identical CRUD + restore + name-lookup pattern -- prime candidates for a generic base service in NestJS.
- The `PatientLogSupervisorsManager` mirrors `SupervisorsManager` from the Procedures module -- during migration, consider a shared supervisor service parameterized by context (procedure vs. patient log).

---
*This documentation was auto-generated from source code analysis. Last updated: 2026-02-20T12:00:00.000Z*
